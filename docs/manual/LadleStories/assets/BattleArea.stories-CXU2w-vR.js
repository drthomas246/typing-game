import{R as k,r as o,j as e,B as r,H as C,e as q,T as g,I as O,A as Q,S as Y,V as T,c as u,F as B,f as M,g as D,h as P,i as F,k as N,l as J,m as K,n as X,o as Z,p as ee,q as b,s as te}from"./chakra-CqoQXF85.js";import{A as R,m as A}from"./framer-CHoWeZHT.js";import"./react-UMYjPOC7.js";function se({arenaRef:t,slashId:s,hurtId:n}){const[l,h]=k.useState(400),d=k.useCallback(()=>{const a=t==null?void 0:t.current;if(!a||typeof a.getBoundingClientRect!="function")return;const c=a.getBoundingClientRect(),x=Math.hypot(c.width,c.height)/2+60;h(x)},[t]);return o.useLayoutEffect(()=>{const a=requestAnimationFrame(d);return()=>cancelAnimationFrame(a)},[d]),k.useEffect(()=>{const a=t==null?void 0:t.current;if(!a||typeof ResizeObserver>"u")return;const c=new ResizeObserver(()=>d());return c.observe(a),()=>c.disconnect()},[t,d]),e.jsxs(e.Fragment,{children:[e.jsx(R,{children:s>0&&e.jsx(r,{position:"absolute",inset:"0",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:10,children:e.jsx(A.div,{style:{width:"160%",height:"12px",borderRadius:"999px",background:"linear-gradient(90deg, rgba(255,0,0,0) 0%, rgba(255,0,0,1) 50%, rgba(255,0,0,0) 100%)",boxShadow:"0 0 8px rgba(255,0,0,0.9), 0 0 16px rgba(255,0,0,0.6)",transformOrigin:"center"},initial:{opacity:0,rotate:-45,x:+l,y:-l},animate:{opacity:[0,1,1,0],rotate:-45,x:-l,y:+l},transition:{duration:.4,ease:"easeOut"},exit:{opacity:0,rotate:-45}},s)})}),e.jsx(R,{children:n>0&&e.jsx(A.div,{style:{position:"absolute",inset:0,background:"rgba(255,0,0,0.35)",pointerEvents:"none",zIndex:15},initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:.6,times:[0,.2,.8,1],ease:"easeOut"},exit:{opacity:0}},`flash-${n}`)})]})}function ne({current:t,max:s,pct:n}){return e.jsxs(C,{gap:"3",align:"center",children:[e.jsx(q,{colorPalette:"purple",variant:"solid",children:"„Å¶„Åç„ÅÆHP"}),e.jsx(r,{flex:"1",h:"18px",rounded:"full",bg:"blackAlpha.200",overflow:"hidden",children:e.jsx(r,{h:"full",w:`${n}%`,bg:"purple.500"})}),e.jsxs(g,{w:"96px",textAlign:"right",children:[t,"/",s]})]})}const ie=A.img;function oe({backgroundImg:t,enemyImg:s,vanishId:n,vanished:l,onVanishDone:h}){return e.jsxs(e.Fragment,{children:[e.jsx(O,{src:t,alt:"Background",fit:"cover",w:"100%",h:"100%"}),!l&&e.jsx(ie,{src:s,alt:"Enemy",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain"},initial:{opacity:1,scale:1,x:0},animate:{opacity:n>0?[1,1,0]:1,x:n>0?[0,-20,20,-18,18,-15,15,-10,10,-5,5,0]:0,scale:n>0?.95:1},transition:{opacity:{duration:1.2,ease:"easeOut",times:[0,.6,1]},x:{duration:1.2,ease:"easeInOut"},scale:{duration:1.2,ease:"easeOut"}},onAnimationComplete:()=>{n>0&&h()}},`monster-${n}`)]})}function re({questionText:t,questionImg:s}){return e.jsxs(r,{w:"450px",children:[e.jsx(r,{rounded:"lg",borderWidth:"1px",p:"3",bg:"gray.subtle",children:e.jsx(g,{fontSize:{base:"lg",md:"xl"},color:"fg",children:t})}),e.jsx(r,{mt:"16px",children:e.jsx(Q,{ratio:1/1,w:"200px",mx:"auto",children:s?e.jsx(O,{src:s,alt:t||"question image",objectFit:"contain",rounded:"lg",borderWidth:"1px",bg:"white",p:"2"}):e.jsx(Y,{rounded:"lg"})})})]})}const ae=A.div,le=o.forwardRef(({enemyImg:t,backgroundImg:s,hurtId:n,vanishId:l,vanished:h,slashId:d,onVanishDone:a,questionText:c,questionImg:x,state:m,enemyHpPct:p,arenaRef:y,outerH:z,arenaH:w,safeNoAnimatePresence:H=!1,safeNoDamageMotion:S=!1},E)=>{const v=z??"calc(100vh - 293px)",j=w??"calc(100vh - 367px)",f=e.jsx(oe,{backgroundImg:s,enemyImg:t,vanishId:l,vanished:h,onVanishDone:a});return e.jsxs(r,{rounded:"xl",borderWidth:"1px",p:"4",bg:"bg.subtle",h:v,children:[e.jsxs(C,{gap:"16px",h:j,mb:"16px",children:[e.jsxs(r,{ref:E,mx:"auto",w:"100%",h:j,rounded:"2xl",borderWidth:"1px",overflow:"hidden",bg:"blackAlpha.50",position:"relative",children:[H?e.jsx(r,{w:"100%",h:"100%",position:"relative",children:f}):e.jsx(R,{initial:!1,mode:"popLayout",children:n>0?e.jsx(ae,{style:{width:"100%",height:"100%",position:"relative"},initial:{x:0},animate:{x:[0,-14,14,-10,10,-6,6,0]},transition:{duration:.45,ease:"easeInOut"},exit:{x:0},children:f},`shake-${n}`):e.jsx(r,{w:"100%",h:"100%",position:"relative",children:f})}),!S&&e.jsx(se,{arenaRef:y,slashId:d,hurtId:n})]}),e.jsx(re,{questionText:c,questionImg:x})]}),e.jsx(ne,{current:m.enemyHp,max:m.enemyMaxHp,pct:p})]})});class ce extends k.Component{constructor(s){super(s),this.state={error:null}}static getDerivedStateFromError(s){return{error:s}}componentDidCatch(s,n){console.error("DebugBoundary caught:",s,n)}render(){var s;return this.state.error?e.jsxs(r,{p:"4",borderWidth:"1px",rounded:"md",bg:"red.50",color:"red.700",children:[e.jsx(g,{fontWeight:"bold",children:"üí• Runtime Error"}),e.jsx(g,{whiteSpace:"pre-wrap",fontSize:"sm",children:String(((s=this.state.error)==null?void 0:s.message)??this.state.error)}),e.jsx(g,{mt:"2",fontSize:"xs",opacity:.8,children:"„Éñ„É©„Ç¶„Ç∂„ÅÆ DevToolsÔºàConsoleÔºâ„Å´„ÇÇ„Çπ„Çø„ÉÉ„ÇØ„ÅåÂá∫„Å¶„ÅÑ„Åæ„Åô„ÄÇ"})]}):this.props.children}}const de="data:image/svg+xml;utf8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700">
      <defs>
        <linearGradient id="g" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#e2e8f0"/>
          <stop offset="100%" stop-color="#cbd5e1"/>
        </linearGradient>
      </defs>
      <rect width="100%" height="100%" fill="url(#g)"/>
      <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#475569" font-size="36">Background</text>
    </svg>`),he="data:image/svg+xml;utf8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400">
      <circle cx="200" cy="200" r="140" fill="#ef4444"/>
      <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#fff" font-size="32">Enemy</text>
    </svg>`),xe="data:image/svg+xml;utf8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="420" height="120">
      <rect width="100%" height="100%" fill="#22c55e"/>
      <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#fff" font-size="24">Question Image</text>
    </svg>`),pe={title:"Components/typing/BattleArea"},je=()=>{const[t,s]=o.useState(80),[n]=o.useState(100),[l,h]=o.useState(0),[d,a]=o.useState(0),[c,x]=o.useState(0),[m,p]=o.useState(!1),[y,z]=o.useState(!1),[w,H]=o.useState(!1),[S,E]=o.useState(!1),v=o.useRef(null),j=o.useMemo(()=>Math.round(t/n*100),[t,n]),f=o.useMemo(()=>({enemyHp:t,enemyMaxHp:n}),[t,n]),W=()=>h(i=>i+1),V=()=>a(i=>i+1),_=()=>{x(i=>i+1),p(!1)},G=()=>p(!0),L=(i=10)=>s(I=>Math.min(n,I+i)),U=(i=10)=>s(I=>Math.max(0,I-i)),$=()=>{s(80),h(0),a(0),x(0),p(!1)};return e.jsx(ce,{children:e.jsxs(r,{p:"6",children:[e.jsxs(T,{align:"stretch",gap:"3",mb:"4",children:[e.jsxs(C,{gap:"2",flexWrap:"wrap",children:[e.jsx(u,{size:"sm",onClick:W,children:"Ë¢´„ÉÄ„É°Ôºàhurt Êè∫„ÇåÔºâ"}),e.jsx(u,{size:"sm",onClick:V,children:"Êñ¨ÊíÉÔºàslashÔºâ"}),e.jsx(u,{size:"sm",onClick:_,disabled:m,children:"ÊïµÊ∂àÊªÖÈñãÂßãÔºàvanishÔºâ"}),e.jsx(u,{size:"sm",variant:"outline",onClick:$,children:"„É™„Çª„ÉÉ„Éà"})]}),e.jsxs(C,{gap:"4",align:"start",children:[e.jsxs(T,{align:"stretch",minW:"220px",children:[e.jsx(u,{size:"sm",onClick:()=>U(10),children:"HP -10"}),e.jsx(u,{size:"sm",onClick:()=>L(10),children:"HP +10"}),e.jsxs(B,{orientation:"horizontal",alignItems:"center",gap:"2",children:[e.jsx(M,{fontSize:"sm",mr:"2",children:"No AnimatePresence"}),e.jsxs(D,{checked:y,onCheckedChange:i=>z(i.checked),children:[e.jsx(P,{})," ",e.jsx(F,{children:e.jsx(N,{})})]})]}),e.jsxs(B,{orientation:"horizontal",alignItems:"center",gap:"2",children:[e.jsx(M,{fontSize:"sm",mr:"2",children:"No DamageMotion"}),e.jsxs(D,{checked:w,onCheckedChange:i=>H(i.checked),children:[e.jsx(P,{}),e.jsx(F,{children:e.jsx(N,{})})]})]}),e.jsxs(B,{orientation:"horizontal",alignItems:"center",gap:"2",children:[e.jsx(M,{fontSize:"sm",mr:"2",children:"No Slider"}),e.jsxs(D,{checked:S,onCheckedChange:i=>E(i.checked),children:[e.jsx(P,{}),e.jsx(F,{children:e.jsx(N,{})})]})]})]}),!S&&e.jsxs(r,{flex:"1",children:[e.jsxs(g,{fontSize:"sm",mb:"1",children:["HP „Çπ„É©„Ç§„ÉÄ„Éº: ",t," / ",n]}),e.jsx(J,{value:[t],min:0,max:n,onValueChange:i=>s(i.value[0]),children:e.jsxs(K,{children:[e.jsx(X,{children:e.jsx(Z,{})}),e.jsx(ee,{index:0})]})})]})]}),e.jsxs(r,{fontSize:"sm",children:[e.jsx(b,{mr:"2",children:"hurtId"}),l,e.jsx(b,{mx:"2",children:"slashId"}),d,e.jsx(b,{mx:"2",children:"vanishId"}),c,e.jsx(b,{mx:"2",children:"vanished"}),String(m),e.jsx(b,{mx:"2",children:"enemyHpPct"}),j.toFixed(2)]}),e.jsx(te,{})]}),e.jsx(le,{enemyImg:he,backgroundImg:de,hurtId:l,slashId:d,vanishId:c,vanished:m,onVanishDone:G,questionText:"What is the antonym of 'hot'?",questionImg:xe,state:f,enemyHpPct:j,arenaRef:v,ref:v,outerH:"720px",arenaH:"600px",safeNoAnimatePresence:y,safeNoDamageMotion:w})]})})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{je as Basic,pe as default};
