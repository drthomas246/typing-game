import{j as e,D as y,P as R,u as H,v as M,w as N,x as E,y as T,z as U,E as V,G,H as b,J as v,K as p,L as f,B as z,M as K,c as t,r as n,V as q,t as A,q as o,s as F,T as I}from"./chakra-CqoQXF85.js";import{m as J,n as W,b as _,u as O,f as Q,j as X,k as Y,d as Z}from"./PageContext-ZZjvIYW4.js";import"./react-UMYjPOC7.js";function $({open:r,setOpen:l,onRetry:a,setShouldBgmPlay:c,summary:i}){const x=J(),j=W(),d=_(),u=O();return e.jsx(y,{open:r,onOpenChange:h=>l(h.open),size:"sm",placement:"center",onExitComplete:()=>{i.killedNow&&j(x+1),l(!1)},children:e.jsxs(R,{children:[e.jsx(H,{}),e.jsx(M,{children:e.jsxs(N,{rounded:"xl",children:[e.jsxs(E,{display:"flex",alignItems:"center",gap:"2",children:[e.jsx(T,{flex:"1",children:"けっか発表"}),e.jsx(U,{asChild:!0,children:e.jsx(V,{size:"sm"})})]}),e.jsxs(G,{children:[e.jsxs(b,{gap:"6",wrap:"wrap",children:[e.jsxs(v,{children:[e.jsx(p,{children:"時間"}),e.jsxs(f,{fontSize:"2xl",children:[i.timeSec,"s"]})]}),!u&&e.jsxs(v,{children:[e.jsx(p,{children:"ヒントを使った問題数"}),e.jsx(f,{fontSize:"2xl",children:i.usedHintCount})]}),e.jsxs(v,{children:[e.jsx(p,{children:"まちがえた問題数"}),e.jsx(f,{fontSize:"2xl",children:i.mistakeProblemCount})]})]}),i.killedNow&&e.jsxs(z,{children:["レベルが",x,"から",x+1,"に上がった"]})]}),e.jsxs(K,{gap:"2",children:[e.jsx(t,{colorPalette:"blue",onClick:()=>{d&&c(!1),a()},children:"もう一度やる"}),e.jsx(t,{variant:"outline",onClick:()=>{d&&c(!0),l(!1)},children:"とじる"})]})]})})]})})}const le={title:"Components/typing/ResultsDialog"},ee=({battle:r,level:l,setLevel:a,sound:c,children:i})=>e.jsx(Q.Provider,{value:r,children:e.jsx(X.Provider,{value:l,children:e.jsx(Y.Provider,{value:a,children:e.jsx(Z.Provider,{value:c,children:i})})})}),ne=()=>{const[r,l]=n.useState(!0),[a,c]=n.useState(!0),[i,x]=n.useState(!0),[j,d]=n.useState(3),[u,h]=n.useState(42),[S,g]=n.useState(2),[C,k]=n.useState(1),[m,w]=n.useState(!0),[P,D]=n.useState(!1),L=n.useMemo(()=>({timeSec:u,usedHintCount:S,mistakeProblemCount:C,killedNow:m}),[u,S,C,m]),B=()=>{k(0),g(0),h(0),l(!0),console.log("[ResultsDialog] onRetry called")};return e.jsx(ee,{battle:a,level:j,setLevel:d,sound:i,children:e.jsxs(z,{p:"6",children:[e.jsxs(q,{align:"stretch",gap:"3",mb:"4",children:[e.jsx(A,{size:"md",children:"Playground"}),e.jsxs(b,{gap:"2",flexWrap:"wrap",children:[e.jsx(t,{size:"sm",onClick:()=>l(!0),children:"ダイアログを開く"}),e.jsx(t,{size:"sm",variant:"outline",onClick:()=>l(!1),children:"ダイアログを閉じる"}),e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>c(s=>!s),children:["battle 切替: ",String(a)]}),e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>x(s=>!s),children:["sound 切替: ",String(i)]}),e.jsx(t,{size:"sm",onClick:()=>d(s=>Math.max(1,s-1)),children:"Lv -1"}),e.jsx(t,{size:"sm",onClick:()=>d(s=>s+1),children:"Lv +1"}),e.jsx(t,{size:"sm",onClick:()=>h(s=>Math.max(0,s-5)),children:"timeSec -5"}),e.jsx(t,{size:"sm",onClick:()=>h(s=>s+5),children:"timeSec +5"}),e.jsx(t,{size:"sm",onClick:()=>g(s=>Math.max(0,s-1)),children:"hint -1"}),e.jsx(t,{size:"sm",onClick:()=>g(s=>s+1),children:"hint +1"}),e.jsx(t,{size:"sm",onClick:()=>k(s=>Math.max(0,s-1)),children:"mistake -1"}),e.jsx(t,{size:"sm",onClick:()=>k(s=>s+1),children:"mistake +1"}),e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>w(s=>!s),children:["killedNow 切替: ",String(m)]})]}),e.jsxs(z,{fontSize:"sm",children:[e.jsx(o,{mr:"2",children:"open"}),String(r),e.jsx(o,{mx:"2",children:"battle"}),String(a),e.jsx(o,{mx:"2",children:"sound"}),String(i),e.jsx(o,{mx:"2",children:"level"}),j,e.jsx(o,{mx:"2",children:"timeSec"}),u,e.jsx(o,{mx:"2",children:"usedHintCount"}),S,e.jsx(o,{mx:"2",children:"mistakeProblemCount"}),C,e.jsx(o,{mx:"2",children:"killedNow"}),String(m),e.jsx(o,{mx:"2",children:"bgmShouldPlay"}),String(P)]}),e.jsx(F,{}),e.jsxs(I,{fontSize:"sm",opacity:.8,children:["・battle=false の場合は「ヒントを使った問題数」が表示されます。",e.jsx("br",{}),"・killedNow=true の場合は「レベルアップ (Lv → Lv+1)」が表示され、閉じる時に useSetLevel によりレベルが+1されます。"]})]}),e.jsx($,{open:r,setOpen:l,onRetry:B,setShouldBgmPlay:D,summary:L})]})})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{ne as Basic,le as default};
