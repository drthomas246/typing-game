const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TypingPage-VZyRKIDk.js","./chakra-ev5tm03T.js","./react-BgsZg_Iy.js","./framer-BSWg1Rk5.js","./howler-BcIsYNvD.js"])))=>i.map(i=>d[i]);
import{r as xe,R as mt,j as je,D as Cd,P as Pd,a as kd,b as Ed,c as Rd,d as Td,e as Ad,f as Od,g as Nd,B as Uu,I as Rl,h as Ca,C as Md,i as Fd,S as Id,k as mh,l as Dd,m as Ld}from"./chakra-ev5tm03T.js";import{a as Gd,g as Ea,c as Sl,r as yh,b as vh}from"./react-BgsZg_Iy.js";import{r as Bd}from"./howler-BcIsYNvD.js";import{m as _h,u as Ms}from"./framer-BSWg1Rk5.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))T(O);new MutationObserver(O=>{for(const m of O)if(m.type==="childList")for(const h of m.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&T(h)}).observe(document,{childList:!0,subtree:!0});function E(O){const m={};return O.integrity&&(m.integrity=O.integrity),O.referrerPolicy&&(m.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?m.credentials="include":O.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function T(O){if(O.ep)return;O.ep=!0;const m=E(O);fetch(O.href,m)}})();var lo={},zu;function jd(){if(zu)return lo;zu=1;var a=Gd();return lo.createRoot=a.createRoot,lo.hydrateRoot=a.hydrateRoot,lo}var Ud=jd();const zd=Ea(Ud),qd="modulepreload",Vd=function(a,c){return new URL(a,c).href},qu={},Kd=function(c,E,T){let O=Promise.resolve();if(E&&E.length>0){let S=function(x){return Promise.all(x.map(R=>Promise.resolve(R).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};const h=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),y=d?.nonce||d?.getAttribute("nonce");O=S(E.map(x=>{if(x=Vd(x,T),x in qu)return;qu[x]=!0;const R=x.endsWith(".css"),w=R?'[rel="stylesheet"]':"";if(T)for(let g=h.length-1;g>=0;g--){const k=h[g];if(k.href===x&&(!R||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${w}`))return;const f=document.createElement("link");if(f.rel=R?"stylesheet":qd,R||(f.as="script"),f.crossOrigin="",f.href=x,y&&f.setAttribute("nonce",y),document.head.appendChild(f),R)return new Promise((g,k)=>{f.addEventListener("load",g),f.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${x}`)))})}))}function m(h){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=h,window.dispatchEvent(d),!d.defaultPrevented)throw h}return O.then(h=>{for(const d of h||[])d.status==="rejected"&&m(d.reason);return c().catch(m)})};var Pa=Bd(),ho={exports:{}},Fs={},sl={},al={},Vu;function tt(){return Vu||(Vu=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const c=Math.PI/180;function E(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof Sl<"u"?Sl:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.22",isBrowser:E(),isUnminified:/param/.test((function(O){}).toString()),dblClickWindow:400,getAngle(O){return a.Konva.angleDeg?O*c:O},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var O;return(O=a.Konva.Transformer)===null||O===void 0?void 0:O.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(O){a.glob.Konva=O}};const T=O=>{a.Konva[O.prototype.getClassName()]=O};a._registerNode=T,a.Konva._injectGlobal(a.Konva)})(al)),al}var ol={},Ku;function At(){return Ku||(Ku=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const c=tt();class E{constructor(P=[1,0,0,1,0,0]){this.dirty=!1,this.m=P&&P.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new E(this.m)}copyInto(P){P.m[0]=this.m[0],P.m[1]=this.m[1],P.m[2]=this.m[2],P.m[3]=this.m[3],P.m[4]=this.m[4],P.m[5]=this.m[5]}point(P){const N=this.m;return{x:N[0]*P.x+N[2]*P.y+N[4],y:N[1]*P.x+N[3]*P.y+N[5]}}translate(P,N){return this.m[4]+=this.m[0]*P+this.m[2]*N,this.m[5]+=this.m[1]*P+this.m[3]*N,this}scale(P,N){return this.m[0]*=P,this.m[1]*=P,this.m[2]*=N,this.m[3]*=N,this}rotate(P){const N=Math.cos(P),I=Math.sin(P),W=this.m[0]*N+this.m[2]*I,F=this.m[1]*N+this.m[3]*I,D=this.m[0]*-I+this.m[2]*N,B=this.m[1]*-I+this.m[3]*N;return this.m[0]=W,this.m[1]=F,this.m[2]=D,this.m[3]=B,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(P,N){const I=this.m[0]+this.m[2]*N,W=this.m[1]+this.m[3]*N,F=this.m[2]+this.m[0]*P,D=this.m[3]+this.m[1]*P;return this.m[0]=I,this.m[1]=W,this.m[2]=F,this.m[3]=D,this}multiply(P){const N=this.m[0]*P.m[0]+this.m[2]*P.m[1],I=this.m[1]*P.m[0]+this.m[3]*P.m[1],W=this.m[0]*P.m[2]+this.m[2]*P.m[3],F=this.m[1]*P.m[2]+this.m[3]*P.m[3],D=this.m[0]*P.m[4]+this.m[2]*P.m[5]+this.m[4],B=this.m[1]*P.m[4]+this.m[3]*P.m[5]+this.m[5];return this.m[0]=N,this.m[1]=I,this.m[2]=W,this.m[3]=F,this.m[4]=D,this.m[5]=B,this}invert(){const P=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),N=this.m[3]*P,I=-this.m[1]*P,W=-this.m[2]*P,F=this.m[0]*P,D=P*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),B=P*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=N,this.m[1]=I,this.m[2]=W,this.m[3]=F,this.m[4]=D,this.m[5]=B,this}getMatrix(){return this.m}decompose(){const P=this.m[0],N=this.m[1],I=this.m[2],W=this.m[3],F=this.m[4],D=this.m[5],B=P*W-N*I,H={x:F,y:D,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(P!=0||N!=0){const Z=Math.sqrt(P*P+N*N);H.rotation=N>0?Math.acos(P/Z):-Math.acos(P/Z),H.scaleX=Z,H.scaleY=B/Z,H.skewX=(P*I+N*W)/B,H.skewY=0}else if(I!=0||W!=0){const Z=Math.sqrt(I*I+W*W);H.rotation=Math.PI/2-(W>0?Math.acos(-I/Z):-Math.acos(I/Z)),H.scaleX=B/Z,H.scaleY=Z,H.skewX=0,H.skewY=(P*I+N*W)/B}return H.rotation=a.Util._getRotation(H.rotation),H}}a.Transform=E;const T="[object Array]",O="[object Number]",m="[object String]",h="[object Boolean]",d=Math.PI/180,y=180/Math.PI,S="#",x="",R="0",w="Konva warning: ",f="Konva error: ",g="rgb(",k={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},M=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let G=[];const v=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(u){setTimeout(u,60)};a.Util={_isElement(u){return!!(u&&u.nodeType==1)},_isFunction(u){return!!(u&&u.constructor&&u.call&&u.apply)},_isPlainObject(u){return!!u&&u.constructor===Object},_isArray(u){return Object.prototype.toString.call(u)===T},_isNumber(u){return Object.prototype.toString.call(u)===O&&!isNaN(u)&&isFinite(u)},_isString(u){return Object.prototype.toString.call(u)===m},_isBoolean(u){return Object.prototype.toString.call(u)===h},isObject(u){return u instanceof Object},isValidSelector(u){if(typeof u!="string")return!1;const P=u[0];return P==="#"||P==="."||P===P.toUpperCase()},_sign(u){return u===0||u>0?1:-1},requestAnimFrame(u){G.push(u),G.length===1&&v(function(){const P=G;G=[],P.forEach(function(N){N()})})},createCanvasElement(){const u=document.createElement("canvas");try{u.style=u.style||{}}catch{}return u},createImageElement(){return document.createElement("img")},_isInDocument(u){for(;u=u.parentNode;)if(u==document)return!0;return!1},_urlToImage(u,P){const N=a.Util.createImageElement();N.onload=function(){P(N)},N.src=u},_rgbToHex(u,P,N){return((1<<24)+(u<<16)+(P<<8)+N).toString(16).slice(1)},_hexToRgb(u){u=u.replace(S,x);const P=parseInt(u,16);return{r:P>>16&255,g:P>>8&255,b:P&255}},getRandomColor(){let u=(Math.random()*16777215<<0).toString(16);for(;u.length<6;)u=R+u;return S+u},getRGB(u){let P;return u in k?(P=k[u],{r:P[0],g:P[1],b:P[2]}):u[0]===S?this._hexToRgb(u.substring(1)):u.substr(0,4)===g?(P=M.exec(u.replace(/ /g,"")),{r:parseInt(P[1],10),g:parseInt(P[2],10),b:parseInt(P[3],10)}):{r:0,g:0,b:0}},colorToRGBA(u){return u=u||"black",a.Util._namedColorToRBA(u)||a.Util._hex3ColorToRGBA(u)||a.Util._hex4ColorToRGBA(u)||a.Util._hex6ColorToRGBA(u)||a.Util._hex8ColorToRGBA(u)||a.Util._rgbColorToRGBA(u)||a.Util._rgbaColorToRGBA(u)||a.Util._hslColorToRGBA(u)},_namedColorToRBA(u){const P=k[u.toLowerCase()];return P?{r:P[0],g:P[1],b:P[2],a:1}:null},_rgbColorToRGBA(u){if(u.indexOf("rgb(")===0){u=u.match(/rgb\(([^)]+)\)/)[1];const P=u.split(/ *, */).map(Number);return{r:P[0],g:P[1],b:P[2],a:1}}},_rgbaColorToRGBA(u){if(u.indexOf("rgba(")===0){u=u.match(/rgba\(([^)]+)\)/)[1];const P=u.split(/ *, */).map((N,I)=>N.slice(-1)==="%"?I===3?parseInt(N)/100:parseInt(N)/100*255:Number(N));return{r:P[0],g:P[1],b:P[2],a:P[3]}}},_hex8ColorToRGBA(u){if(u[0]==="#"&&u.length===9)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:parseInt(u.slice(7,9),16)/255}},_hex6ColorToRGBA(u){if(u[0]==="#"&&u.length===7)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:1}},_hex4ColorToRGBA(u){if(u[0]==="#"&&u.length===5)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:parseInt(u[4]+u[4],16)/255}},_hex3ColorToRGBA(u){if(u[0]==="#"&&u.length===4)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:1}},_hslColorToRGBA(u){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(u)){const[P,...N]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(u),I=Number(N[0])/360,W=Number(N[1])/100,F=Number(N[2])/100;let D,B,H;if(W===0)return H=F*255,{r:Math.round(H),g:Math.round(H),b:Math.round(H),a:1};F<.5?D=F*(1+W):D=F+W-F*W;const Z=2*F-D,se=[0,0,0];for(let he=0;he<3;he++)B=I+1/3*-(he-1),B<0&&B++,B>1&&B--,6*B<1?H=Z+(D-Z)*6*B:2*B<1?H=D:3*B<2?H=Z+(D-Z)*(2/3-B)*6:H=Z,se[he]=H*255;return{r:Math.round(se[0]),g:Math.round(se[1]),b:Math.round(se[2]),a:1}}},haveIntersection(u,P){return!(P.x>u.x+u.width||P.x+P.width<u.x||P.y>u.y+u.height||P.y+P.height<u.y)},cloneObject(u){const P={};for(const N in u)this._isPlainObject(u[N])?P[N]=this.cloneObject(u[N]):this._isArray(u[N])?P[N]=this.cloneArray(u[N]):P[N]=u[N];return P},cloneArray(u){return u.slice(0)},degToRad(u){return u*d},radToDeg(u){return u*y},_degToRad(u){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(u)},_radToDeg(u){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(u)},_getRotation(u){return c.Konva.angleDeg?a.Util.radToDeg(u):u},_capitalize(u){return u.charAt(0).toUpperCase()+u.slice(1)},throw(u){throw new Error(f+u)},error(u){console.error(f+u)},warn(u){c.Konva.showWarnings&&console.warn(w+u)},each(u,P){for(const N in u)P(N,u[N])},_inRange(u,P,N){return P<=u&&u<N},_getProjectionToSegment(u,P,N,I,W,F){let D,B,H;const Z=(u-N)*(u-N)+(P-I)*(P-I);if(Z==0)D=u,B=P,H=(W-N)*(W-N)+(F-I)*(F-I);else{const se=((W-u)*(N-u)+(F-P)*(I-P))/Z;se<0?(D=u,B=P,H=(u-W)*(u-W)+(P-F)*(P-F)):se>1?(D=N,B=I,H=(N-W)*(N-W)+(I-F)*(I-F)):(D=u+se*(N-u),B=P+se*(I-P),H=(D-W)*(D-W)+(B-F)*(B-F))}return[D,B,H]},_getProjectionToLine(u,P,N){const I=a.Util.cloneObject(u);let W=Number.MAX_VALUE;return P.forEach(function(F,D){if(!N&&D===P.length-1)return;const B=P[(D+1)%P.length],H=a.Util._getProjectionToSegment(F.x,F.y,B.x,B.y,u.x,u.y),Z=H[0],se=H[1],he=H[2];he<W&&(I.x=Z,I.y=se,W=he)}),I},_prepareArrayForTween(u,P,N){const I=[],W=[];if(u.length>P.length){const D=P;P=u,u=D}for(let D=0;D<u.length;D+=2)I.push({x:u[D],y:u[D+1]});for(let D=0;D<P.length;D+=2)W.push({x:P[D],y:P[D+1]});const F=[];return W.forEach(function(D){const B=a.Util._getProjectionToLine(D,I,N);F.push(B.x),F.push(B.y)}),F},_prepareToStringify(u){let P;u.visitedByCircularReferenceRemoval=!0;for(const N in u)if(u.hasOwnProperty(N)&&u[N]&&typeof u[N]=="object"){if(P=Object.getOwnPropertyDescriptor(u,N),u[N].visitedByCircularReferenceRemoval||a.Util._isElement(u[N]))if(P.configurable)delete u[N];else return null;else if(a.Util._prepareToStringify(u[N])===null)if(P.configurable)delete u[N];else return null}return delete u.visitedByCircularReferenceRemoval,u},_assign(u,P){for(const N in P)u[N]=P[N];return u},_getFirstPointerId(u){return u.touches?u.changedTouches[0].identifier:u.pointerId||999},releaseCanvas(...u){c.Konva.releaseCanvasOnDestroy&&u.forEach(P=>{P.width=0,P.height=0})},drawRoundedRectPath(u,P,N,I){let W=0,F=0,D=0,B=0;typeof I=="number"?W=F=D=B=Math.min(I,P/2,N/2):(W=Math.min(I[0]||0,P/2,N/2),F=Math.min(I[1]||0,P/2,N/2),B=Math.min(I[2]||0,P/2,N/2),D=Math.min(I[3]||0,P/2,N/2)),u.moveTo(W,0),u.lineTo(P-F,0),u.arc(P-F,F,F,Math.PI*3/2,0,!1),u.lineTo(P,N-B),u.arc(P-B,N-B,B,0,Math.PI/2,!1),u.lineTo(D,N),u.arc(D,N-D,D,Math.PI/2,Math.PI,!1),u.lineTo(0,W),u.arc(W,W,W,Math.PI,Math.PI*3/2,!1)}}})(ol)),ol}var Is={},Gr={},Br={},Hu;function wh(){if(Hu)return Br;Hu=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.HitContext=Br.SceneContext=Br.Context=void 0;const a=At(),c=tt();function E(G){const v=[],u=G.length,P=a.Util;for(let N=0;N<u;N++){let I=G[N];P._isNumber(I)?I=Math.round(I*1e3)/1e3:P._isString(I)||(I=I+""),v.push(I)}return v}const T=",",O="(",m=")",h="([",d="])",y=";",S="()",x="=",R=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],w=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],f=100;let g=class{constructor(v){this.canvas=v,c.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(v){v.fillEnabled()&&this._fill(v)}_fill(v){}strokeShape(v){v.hasStroke()&&this._stroke(v)}_stroke(v){}fillStrokeShape(v){v.attrs.fillAfterStrokeEnabled?(this.strokeShape(v),this.fillShape(v)):(this.fillShape(v),this.strokeShape(v))}getTrace(v,u){let P=this.traceArr,N=P.length,I="",W,F,D,B;for(W=0;W<N;W++)F=P[W],D=F.method,D?(B=F.args,I+=D,v?I+=S:a.Util._isArray(B[0])?I+=h+B.join(T)+d:(u&&(B=B.map(H=>typeof H=="number"?Math.floor(H):H)),I+=O+B.join(T)+m)):(I+=F.property,v||(I+=x+F.val)),I+=y;return I}clearTrace(){this.traceArr=[]}_trace(v){let u=this.traceArr,P;u.push(v),P=u.length,P>=f&&u.shift()}reset(){const v=this.getCanvas().getPixelRatio();this.setTransform(1*v,0,0,1*v,0,0)}getCanvas(){return this.canvas}clear(v){const u=this.getCanvas();v?this.clearRect(v.x||0,v.y||0,v.width||0,v.height||0):this.clearRect(0,0,u.getWidth()/u.pixelRatio,u.getHeight()/u.pixelRatio)}_applyLineCap(v){const u=v.attrs.lineCap;u&&this.setAttr("lineCap",u)}_applyOpacity(v){const u=v.getAbsoluteOpacity();u!==1&&this.setAttr("globalAlpha",u)}_applyLineJoin(v){const u=v.attrs.lineJoin;u&&this.setAttr("lineJoin",u)}setAttr(v,u){this._context[v]=u}arc(v,u,P,N,I,W){this._context.arc(v,u,P,N,I,W)}arcTo(v,u,P,N,I){this._context.arcTo(v,u,P,N,I)}beginPath(){this._context.beginPath()}bezierCurveTo(v,u,P,N,I,W){this._context.bezierCurveTo(v,u,P,N,I,W)}clearRect(v,u,P,N){this._context.clearRect(v,u,P,N)}clip(...v){this._context.clip.apply(this._context,v)}closePath(){this._context.closePath()}createImageData(v,u){const P=arguments;if(P.length===2)return this._context.createImageData(v,u);if(P.length===1)return this._context.createImageData(v)}createLinearGradient(v,u,P,N){return this._context.createLinearGradient(v,u,P,N)}createPattern(v,u){return this._context.createPattern(v,u)}createRadialGradient(v,u,P,N,I,W){return this._context.createRadialGradient(v,u,P,N,I,W)}drawImage(v,u,P,N,I,W,F,D,B){const H=arguments,Z=this._context;H.length===3?Z.drawImage(v,u,P):H.length===5?Z.drawImage(v,u,P,N,I):H.length===9&&Z.drawImage(v,u,P,N,I,W,F,D,B)}ellipse(v,u,P,N,I,W,F,D){this._context.ellipse(v,u,P,N,I,W,F,D)}isPointInPath(v,u,P,N){return P?this._context.isPointInPath(P,v,u,N):this._context.isPointInPath(v,u,N)}fill(...v){this._context.fill.apply(this._context,v)}fillRect(v,u,P,N){this._context.fillRect(v,u,P,N)}strokeRect(v,u,P,N){this._context.strokeRect(v,u,P,N)}fillText(v,u,P,N){N?this._context.fillText(v,u,P,N):this._context.fillText(v,u,P)}measureText(v){return this._context.measureText(v)}getImageData(v,u,P,N){return this._context.getImageData(v,u,P,N)}lineTo(v,u){this._context.lineTo(v,u)}moveTo(v,u){this._context.moveTo(v,u)}rect(v,u,P,N){this._context.rect(v,u,P,N)}roundRect(v,u,P,N,I){this._context.roundRect(v,u,P,N,I)}putImageData(v,u,P){this._context.putImageData(v,u,P)}quadraticCurveTo(v,u,P,N){this._context.quadraticCurveTo(v,u,P,N)}restore(){this._context.restore()}rotate(v){this._context.rotate(v)}save(){this._context.save()}scale(v,u){this._context.scale(v,u)}setLineDash(v){this._context.setLineDash?this._context.setLineDash(v):"mozDash"in this._context?this._context.mozDash=v:"webkitLineDash"in this._context&&(this._context.webkitLineDash=v)}getLineDash(){return this._context.getLineDash()}setTransform(v,u,P,N,I,W){this._context.setTransform(v,u,P,N,I,W)}stroke(v){v?this._context.stroke(v):this._context.stroke()}strokeText(v,u,P,N){this._context.strokeText(v,u,P,N)}transform(v,u,P,N,I,W){this._context.transform(v,u,P,N,I,W)}translate(v,u){this._context.translate(v,u)}_enableTrace(){let v=this,u=R.length,P=this.setAttr,N,I;const W=function(F){let D=v[F],B;v[F]=function(){return I=E(Array.prototype.slice.call(arguments,0)),B=D.apply(v,arguments),v._trace({method:F,args:I}),B}};for(N=0;N<u;N++)W(R[N]);v.setAttr=function(){P.apply(v,arguments);const F=arguments[0];let D=arguments[1];(F==="shadowOffsetX"||F==="shadowOffsetY"||F==="shadowBlur")&&(D=D/this.canvas.getPixelRatio()),v._trace({property:F,val:D})}}_applyGlobalCompositeOperation(v){const u=v.attrs.globalCompositeOperation;!u||u==="source-over"||this.setAttr("globalCompositeOperation",u)}};Br.Context=g,w.forEach(function(G){Object.defineProperty(g.prototype,G,{get(){return this._context[G]},set(v){this._context[G]=v}})});class k extends g{constructor(v,{willReadFrequently:u=!1}={}){super(v),this._context=v._canvas.getContext("2d",{willReadFrequently:u})}_fillColor(v){const u=v.fill();this.setAttr("fillStyle",u),v._fillFunc(this)}_fillPattern(v){this.setAttr("fillStyle",v._getFillPattern()),v._fillFunc(this)}_fillLinearGradient(v){const u=v._getLinearGradient();u&&(this.setAttr("fillStyle",u),v._fillFunc(this))}_fillRadialGradient(v){const u=v._getRadialGradient();u&&(this.setAttr("fillStyle",u),v._fillFunc(this))}_fill(v){const u=v.fill(),P=v.getFillPriority();if(u&&P==="color"){this._fillColor(v);return}const N=v.getFillPatternImage();if(N&&P==="pattern"){this._fillPattern(v);return}const I=v.getFillLinearGradientColorStops();if(I&&P==="linear-gradient"){this._fillLinearGradient(v);return}const W=v.getFillRadialGradientColorStops();if(W&&P==="radial-gradient"){this._fillRadialGradient(v);return}u?this._fillColor(v):N?this._fillPattern(v):I?this._fillLinearGradient(v):W&&this._fillRadialGradient(v)}_strokeLinearGradient(v){const u=v.getStrokeLinearGradientStartPoint(),P=v.getStrokeLinearGradientEndPoint(),N=v.getStrokeLinearGradientColorStops(),I=this.createLinearGradient(u.x,u.y,P.x,P.y);if(N){for(let W=0;W<N.length;W+=2)I.addColorStop(N[W],N[W+1]);this.setAttr("strokeStyle",I)}}_stroke(v){const u=v.dash(),P=v.getStrokeScaleEnabled();if(v.hasStroke()){if(!P){this.save();const I=this.getCanvas().getPixelRatio();this.setTransform(I,0,0,I,0,0)}this._applyLineCap(v),u&&v.dashEnabled()&&(this.setLineDash(u),this.setAttr("lineDashOffset",v.dashOffset())),this.setAttr("lineWidth",v.strokeWidth()),v.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),v.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(v):this.setAttr("strokeStyle",v.stroke()),v._strokeFunc(this),P||this.restore()}}_applyShadow(v){var u,P,N;const I=(u=v.getShadowRGBA())!==null&&u!==void 0?u:"black",W=(P=v.getShadowBlur())!==null&&P!==void 0?P:5,F=(N=v.getShadowOffset())!==null&&N!==void 0?N:{x:0,y:0},D=v.getAbsoluteScale(),B=this.canvas.getPixelRatio(),H=D.x*B,Z=D.y*B;this.setAttr("shadowColor",I),this.setAttr("shadowBlur",W*Math.min(Math.abs(H),Math.abs(Z))),this.setAttr("shadowOffsetX",F.x*H),this.setAttr("shadowOffsetY",F.y*Z)}}Br.SceneContext=k;class M extends g{constructor(v){super(v),this._context=v._canvas.getContext("2d",{willReadFrequently:!0})}_fill(v){this.save(),this.setAttr("fillStyle",v.colorKey),v._fillFuncHit(this),this.restore()}strokeShape(v){v.hasHitStroke()&&this._stroke(v)}_stroke(v){if(v.hasHitStroke()){const u=v.getStrokeScaleEnabled();if(!u){this.save();const I=this.getCanvas().getPixelRatio();this.setTransform(I,0,0,I,0,0)}this._applyLineCap(v);const P=v.hitStrokeWidth(),N=P==="auto"?v.strokeWidth():P;this.setAttr("lineWidth",N),this.setAttr("strokeStyle",v.colorKey),v._strokeFuncHit(this),u||this.restore()}}}return Br.HitContext=M,Br}var Wu;function vo(){if(Wu)return Gr;Wu=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.HitCanvas=Gr.SceneCanvas=Gr.Canvas=void 0;const a=At(),c=wh(),E=tt();let T;function O(){if(T)return T;const y=a.Util.createCanvasElement(),S=y.getContext("2d");return T=(function(){const x=E.Konva._global.devicePixelRatio||1,R=S.webkitBackingStorePixelRatio||S.mozBackingStorePixelRatio||S.msBackingStorePixelRatio||S.oBackingStorePixelRatio||S.backingStorePixelRatio||1;return x/R})(),a.Util.releaseCanvas(y),T}let m=class{constructor(S){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const R=(S||{}).pixelRatio||E.Konva.pixelRatio||O();this.pixelRatio=R,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(S){const x=this.pixelRatio;this.pixelRatio=S,this.setSize(this.getWidth()/x,this.getHeight()/x)}setWidth(S){this.width=this._canvas.width=S*this.pixelRatio,this._canvas.style.width=S+"px";const x=this.pixelRatio;this.getContext()._context.scale(x,x)}setHeight(S){this.height=this._canvas.height=S*this.pixelRatio,this._canvas.style.height=S+"px";const x=this.pixelRatio;this.getContext()._context.scale(x,x)}getWidth(){return this.width}getHeight(){return this.height}setSize(S,x){this.setWidth(S||0),this.setHeight(x||0)}toDataURL(S,x){try{return this._canvas.toDataURL(S,x)}catch{try{return this._canvas.toDataURL()}catch(w){return a.Util.error("Unable to get data URL. "+w.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Gr.Canvas=m;class h extends m{constructor(S={width:0,height:0,willReadFrequently:!1}){super(S),this.context=new c.SceneContext(this,{willReadFrequently:S.willReadFrequently}),this.setSize(S.width,S.height)}}Gr.SceneCanvas=h;class d extends m{constructor(S={width:0,height:0}){super(S),this.hitCanvas=!0,this.context=new c.HitContext(this),this.setSize(S.width,S.height)}}return Gr.HitCanvas=d,Gr}var ll={},Yu;function Tl(){return Yu||(Yu=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const c=tt(),E=At();a.DD={get isDragging(){let T=!1;return a.DD._dragElements.forEach(O=>{O.dragStatus==="dragging"&&(T=!0)}),T},justDragged:!1,get node(){let T;return a.DD._dragElements.forEach(O=>{T=O.node}),T},_dragElements:new Map,_drag(T){const O=[];a.DD._dragElements.forEach((m,h)=>{const{node:d}=m,y=d.getStage();y.setPointersPositions(T),m.pointerId===void 0&&(m.pointerId=E.Util._getFirstPointerId(T));const S=y._changedPointerPositions.find(x=>x.id===m.pointerId);if(S){if(m.dragStatus!=="dragging"){const x=d.dragDistance();if(Math.max(Math.abs(S.x-m.startPointerPos.x),Math.abs(S.y-m.startPointerPos.y))<x||(d.startDrag({evt:T}),!d.isDragging()))return}d._setDragPosition(T,m),O.push(d)}}),O.forEach(m=>{m.fire("dragmove",{type:"dragmove",target:m,evt:T},!0)})},_endDragBefore(T){const O=[];a.DD._dragElements.forEach(m=>{const{node:h}=m,d=h.getStage();if(T&&d.setPointersPositions(T),!d._changedPointerPositions.find(x=>x.id===m.pointerId))return;(m.dragStatus==="dragging"||m.dragStatus==="stopped")&&(a.DD.justDragged=!0,c.Konva._mouseListenClick=!1,c.Konva._touchListenClick=!1,c.Konva._pointerListenClick=!1,m.dragStatus="stopped");const S=m.node.getLayer()||m.node instanceof c.Konva.Stage&&m.node;S&&O.indexOf(S)===-1&&O.push(S)}),O.forEach(m=>{m.draw()})},_endDragAfter(T){a.DD._dragElements.forEach((O,m)=>{O.dragStatus==="stopped"&&O.node.fire("dragend",{type:"dragend",target:O.node,evt:T},!0),O.dragStatus!=="dragging"&&a.DD._dragElements.delete(m)})}},c.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("touchcancel",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1),window.addEventListener("touchcancel",a.DD._endDragAfter,!1))})(ll)),ll}var ul={},Fn={},Xu;function at(){if(Xu)return Fn;Xu=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.RGBComponent=T,Fn.alphaComponent=O,Fn.getNumberValidator=m,Fn.getNumberOrArrayOfNumbersValidator=h,Fn.getNumberOrAutoValidator=d,Fn.getStringValidator=y,Fn.getStringOrGradientValidator=S,Fn.getFunctionValidator=x,Fn.getNumberArrayValidator=R,Fn.getBooleanValidator=w,Fn.getComponentValidator=f;const a=tt(),c=At();function E(g){return c.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||c.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function T(g){return g>255?255:g<0?0:Math.round(g)}function O(g){return g>1?1:g<1e-4?1e-4:g}function m(){if(a.Konva.isUnminified)return function(g,k){return c.Util._isNumber(g)||c.Util.warn(E(g)+' is a not valid value for "'+k+'" attribute. The value should be a number.'),g}}function h(g){if(a.Konva.isUnminified)return function(k,M){let G=c.Util._isNumber(k),v=c.Util._isArray(k)&&k.length==g;return!G&&!v&&c.Util.warn(E(k)+' is a not valid value for "'+M+'" attribute. The value should be a number or Array<number>('+g+")"),k}}function d(){if(a.Konva.isUnminified)return function(g,k){return c.Util._isNumber(g)||g==="auto"||c.Util.warn(E(g)+' is a not valid value for "'+k+'" attribute. The value should be a number or "auto".'),g}}function y(){if(a.Konva.isUnminified)return function(g,k){return c.Util._isString(g)||c.Util.warn(E(g)+' is a not valid value for "'+k+'" attribute. The value should be a string.'),g}}function S(){if(a.Konva.isUnminified)return function(g,k){const M=c.Util._isString(g),G=Object.prototype.toString.call(g)==="[object CanvasGradient]"||g&&g.addColorStop;return M||G||c.Util.warn(E(g)+' is a not valid value for "'+k+'" attribute. The value should be a string or a native gradient.'),g}}function x(){if(a.Konva.isUnminified)return function(g,k){return c.Util._isFunction(g)||c.Util.warn(E(g)+' is a not valid value for "'+k+'" attribute. The value should be a function.'),g}}function R(){if(a.Konva.isUnminified)return function(g,k){const M=Int8Array?Object.getPrototypeOf(Int8Array):null;return M&&g instanceof M||(c.Util._isArray(g)?g.forEach(function(G){c.Util._isNumber(G)||c.Util.warn('"'+k+'" attribute has non numeric element '+G+". Make sure that all elements are numbers.")}):c.Util.warn(E(g)+' is a not valid value for "'+k+'" attribute. The value should be a array of numbers.')),g}}function w(){if(a.Konva.isUnminified)return function(g,k){return g===!0||g===!1||c.Util.warn(E(g)+' is a not valid value for "'+k+'" attribute. The value should be a boolean.'),g}}function f(g){if(a.Konva.isUnminified)return function(k,M){return k==null||c.Util.isObject(k)||c.Util.warn(E(k)+' is a not valid value for "'+M+'" attribute. The value should be an object with properties '+g),k}}return Fn}var Qu;function st(){return Qu||(Qu=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const c=At(),E=at(),T="get",O="set";a.Factory={addGetterSetter(m,h,d,y,S){a.Factory.addGetter(m,h,d),a.Factory.addSetter(m,h,y,S),a.Factory.addOverloadedGetterSetter(m,h)},addGetter(m,h,d){const y=T+c.Util._capitalize(h);m.prototype[y]=m.prototype[y]||function(){const S=this.attrs[h];return S===void 0?d:S}},addSetter(m,h,d,y){const S=O+c.Util._capitalize(h);m.prototype[S]||a.Factory.overWriteSetter(m,h,d,y)},overWriteSetter(m,h,d,y){const S=O+c.Util._capitalize(h);m.prototype[S]=function(x){return d&&x!==void 0&&x!==null&&(x=d.call(this,x,h)),this._setAttr(h,x),y&&y.call(this),this}},addComponentsGetterSetter(m,h,d,y,S){const x=d.length,R=c.Util._capitalize,w=T+R(h),f=O+R(h);m.prototype[w]=function(){const k={};for(let M=0;M<x;M++){const G=d[M];k[G]=this.getAttr(h+R(G))}return k};const g=(0,E.getComponentValidator)(d);m.prototype[f]=function(k){const M=this.attrs[h];y&&(k=y.call(this,k,h)),g&&g.call(this,k,h);for(const G in k)k.hasOwnProperty(G)&&this._setAttr(h+R(G),k[G]);return k||d.forEach(G=>{this._setAttr(h+R(G),void 0)}),this._fireChangeEvent(h,M,k),S&&S.call(this),this},a.Factory.addOverloadedGetterSetter(m,h)},addOverloadedGetterSetter(m,h){const d=c.Util._capitalize(h),y=O+d,S=T+d;m.prototype[h]=function(){return arguments.length?(this[y](arguments[0]),this):this[S]()}},addDeprecatedGetterSetter(m,h,d,y){c.Util.error("Adding deprecated "+h);const S=T+c.Util._capitalize(h),x=h+" property is deprecated and will be removed soon. Look at Konva change log for more information.";m.prototype[S]=function(){c.Util.error(x);const R=this.attrs[h];return R===void 0?d:R},a.Factory.addSetter(m,h,y,function(){c.Util.error(x)}),a.Factory.addOverloadedGetterSetter(m,h)},backCompat(m,h){c.Util.each(h,function(d,y){const S=m.prototype[y],x=T+c.Util._capitalize(d),R=O+c.Util._capitalize(d);function w(){S.apply(this,arguments),c.Util.error('"'+d+'" method is deprecated and will be removed soon. Use ""'+y+'" instead.')}m.prototype[d]=w,m.prototype[x]=w,m.prototype[R]=w})},afterSetFilter(){this._filterUpToDate=!1}}})(ul)),ul}var Ju;function Gt(){if(Ju)return Is;Ju=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.Node=void 0;const a=vo(),c=Tl(),E=st(),T=tt(),O=At(),m=at(),h="absoluteOpacity",d="allEventListeners",y="absoluteTransform",S="absoluteScale",x="canvas",R="Change",w="children",f="konva",g="listening",k="mouseenter",M="mouseleave",G="pointerenter",v="pointerleave",u="touchenter",P="touchleave",N="set",I="Shape",W=" ",F="stage",D="transform",B="Stage",H="visible",Z=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(W);let se=1,he=class xl{constructor(C){this._id=se++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(C),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(C){(C===D||C===y)&&this._cache.get(C)?this._cache.get(C).dirty=!0:C?this._cache.delete(C):this._cache.clear()}_getCache(C,L){let q=this._cache.get(C);return(q===void 0||(C===D||C===y)&&q.dirty===!0)&&(q=L.call(this),this._cache.set(C,q)),q}_calculate(C,L,q){if(!this._attachedDepsListeners.get(C)){const z=L.map(X=>X+"Change.konva").join(W);this.on(z,()=>{this._clearCache(C)}),this._attachedDepsListeners.set(C,!0)}return this._getCache(C,q)}_getCanvasCache(){return this._cache.get(x)}_clearSelfAndDescendantCache(C){this._clearCache(C),C===y&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(x)){const{scene:C,filter:L,hit:q,buffer:z}=this._cache.get(x);O.Util.releaseCanvas(C,L,q,z),this._cache.delete(x)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(C){const L=C||{};let q={};(L.x===void 0||L.y===void 0||L.width===void 0||L.height===void 0)&&(q=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let z=Math.ceil(L.width||q.width),X=Math.ceil(L.height||q.height),_e=L.pixelRatio,ie=L.x===void 0?Math.floor(q.x):L.x,be=L.y===void 0?Math.floor(q.y):L.y,Te=L.offset||0,ge=L.drawBorder||!1,V=L.hitCanvasPixelRatio||1;if(!z||!X){O.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const fe=Math.abs(Math.round(q.x)-ie)>.5?1:0,ye=Math.abs(Math.round(q.y)-be)>.5?1:0;z+=Te*2+fe,X+=Te*2+ye,ie-=Te,be-=Te;const Me=new a.SceneCanvas({pixelRatio:_e,width:z,height:X}),Ie=new a.SceneCanvas({pixelRatio:_e,width:0,height:0,willReadFrequently:!0}),Fe=new a.HitCanvas({pixelRatio:V,width:z,height:X}),Ke=Me.getContext(),lt=Fe.getContext(),He=new a.SceneCanvas({width:Me.width/Me.pixelRatio+Math.abs(ie),height:Me.height/Me.pixelRatio+Math.abs(be),pixelRatio:Me.pixelRatio}),Ot=He.getContext();return Fe.isCache=!0,Me.isCache=!0,this._cache.delete(x),this._filterUpToDate=!1,L.imageSmoothingEnabled===!1&&(Me.getContext()._context.imageSmoothingEnabled=!1,Ie.getContext()._context.imageSmoothingEnabled=!1),Ke.save(),lt.save(),Ot.save(),Ke.translate(-ie,-be),lt.translate(-ie,-be),Ot.translate(-ie,-be),He.x=ie,He.y=be,this._isUnderCache=!0,this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(S),this.drawScene(Me,this,He),this.drawHit(Fe,this),this._isUnderCache=!1,Ke.restore(),lt.restore(),ge&&(Ke.save(),Ke.beginPath(),Ke.rect(0,0,z,X),Ke.closePath(),Ke.setAttr("strokeStyle","red"),Ke.setAttr("lineWidth",5),Ke.stroke(),Ke.restore()),this._cache.set(x,{scene:Me,filter:Ie,hit:Fe,buffer:He,x:ie,y:be}),this._requestDraw(),this}isCached(){return this._cache.has(x)}getClientRect(C){throw new Error('abstract "getClientRect" method call')}_transformedRect(C,L){const q=[{x:C.x,y:C.y},{x:C.x+C.width,y:C.y},{x:C.x+C.width,y:C.y+C.height},{x:C.x,y:C.y+C.height}];let z=1/0,X=1/0,_e=-1/0,ie=-1/0;const be=this.getAbsoluteTransform(L);return q.forEach(function(Te){const ge=be.point(Te);z===void 0&&(z=_e=ge.x,X=ie=ge.y),z=Math.min(z,ge.x),X=Math.min(X,ge.y),_e=Math.max(_e,ge.x),ie=Math.max(ie,ge.y)}),{x:z,y:X,width:_e-z,height:ie-X}}_drawCachedSceneCanvas(C){C.save(),C._applyOpacity(this),C._applyGlobalCompositeOperation(this);const L=this._getCanvasCache();C.translate(L.x,L.y);const q=this._getCachedSceneCanvas(),z=q.pixelRatio;C.drawImage(q._canvas,0,0,q.width/z,q.height/z),C.restore()}_drawCachedHitCanvas(C){const L=this._getCanvasCache(),q=L.hit;C.save(),C.translate(L.x,L.y),C.drawImage(q._canvas,0,0,q.width/q.pixelRatio,q.height/q.pixelRatio),C.restore()}_getCachedSceneCanvas(){let C=this.filters(),L=this._getCanvasCache(),q=L.scene,z=L.filter,X=z.getContext(),_e,ie,be,Te;if(C){if(!this._filterUpToDate){const ge=q.pixelRatio;z.setSize(q.width/q.pixelRatio,q.height/q.pixelRatio);try{for(_e=C.length,X.clear(),X.drawImage(q._canvas,0,0,q.getWidth()/ge,q.getHeight()/ge),ie=X.getImageData(0,0,z.getWidth(),z.getHeight()),be=0;be<_e;be++){if(Te=C[be],typeof Te!="function"){O.Util.error("Filter should be type of function, but got "+typeof Te+" instead. Please check correct filters");continue}Te.call(this,ie),X.putImageData(ie,0,0)}}catch(V){O.Util.error("Unable to apply filter. "+V.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return z}return q}on(C,L){if(this._cache&&this._cache.delete(d),arguments.length===3)return this._delegate.apply(this,arguments);const q=C.split(W);for(let z=0;z<q.length;z++){const _e=q[z].split("."),ie=_e[0],be=_e[1]||"";this.eventListeners[ie]||(this.eventListeners[ie]=[]),this.eventListeners[ie].push({name:be,handler:L})}return this}off(C,L){let q=(C||"").split(W),z=q.length,X,_e,ie,be,Te,ge;if(this._cache&&this._cache.delete(d),!C)for(_e in this.eventListeners)this._off(_e);for(X=0;X<z;X++)if(ie=q[X],be=ie.split("."),Te=be[0],ge=be[1],Te)this.eventListeners[Te]&&this._off(Te,ge,L);else for(_e in this.eventListeners)this._off(_e,ge,L);return this}dispatchEvent(C){const L={target:this,type:C.type,evt:C};return this.fire(C.type,L),this}addEventListener(C,L){return this.on(C,function(q){L.call(this,q.evt)}),this}removeEventListener(C){return this.off(C),this}_delegate(C,L,q){const z=this;this.on(C,function(X){const _e=X.target.findAncestors(L,!0,z);for(let ie=0;ie<_e.length;ie++)X=O.Util.cloneObject(X),X.currentTarget=_e[ie],q.call(_e[ie],X)})}remove(){return this.isDragging()&&this.stopDrag(),c.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(S),this._clearSelfAndDescendantCache(F),this._clearSelfAndDescendantCache(H),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();const C=this.getParent();C&&C.children&&(C.children.splice(this.index,1),C._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(C){const L="get"+O.Util._capitalize(C);return O.Util._isFunction(this[L])?this[L]():this.attrs[C]}getAncestors(){let C=this.getParent(),L=[];for(;C;)L.push(C),C=C.getParent();return L}getAttrs(){return this.attrs||{}}setAttrs(C){return this._batchTransformChanges(()=>{let L,q;if(!C)return this;for(L in C)L!==w&&(q=N+O.Util._capitalize(L),O.Util._isFunction(this[q])?this[q](C[L]):this._setAttr(L,C[L]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(C){if(!this.listening())return!1;const q=this.getParent();return q&&q!==C&&this!==C?q._isListening(C):!0}isVisible(){return this._getCache(H,this._isVisible)}_isVisible(C){if(!this.visible())return!1;const q=this.getParent();return q&&q!==C&&this!==C?q._isVisible(C):!0}shouldDrawHit(C,L=!1){if(C)return this._isVisible(C)&&this._isListening(C);const q=this.getLayer();let z=!1;c.DD._dragElements.forEach(_e=>{_e.dragStatus==="dragging"&&(_e.node.nodeType==="Stage"||_e.node.getLayer()===q)&&(z=!0)});const X=!L&&!T.Konva.hitOnDragEnabled&&(z||T.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!X}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let C=this.getDepth(),L=this,q=0,z,X,_e,ie;function be(ge){for(z=[],X=ge.length,_e=0;_e<X;_e++)ie=ge[_e],q++,ie.nodeType!==I&&(z=z.concat(ie.getChildren().slice())),ie._id===L._id&&(_e=X);z.length>0&&z[0].getDepth()<=C&&be(z)}const Te=this.getStage();return L.nodeType!==B&&Te&&be(Te.getChildren()),q}getDepth(){let C=0,L=this.parent;for(;L;)C++,L=L.parent;return C}_batchTransformChanges(C){this._batchingTransformChange=!0,C(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(D),this._clearSelfAndDescendantCache(y)),this._needClearTransformCache=!1}setPosition(C){return this._batchTransformChanges(()=>{this.x(C.x),this.y(C.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const C=this.getStage();if(!C)return null;const L=C.getPointerPosition();if(!L)return null;const q=this.getAbsoluteTransform().copy();return q.invert(),q.point(L)}getAbsolutePosition(C){let L=!1,q=this.parent;for(;q;){if(q.isCached()){L=!0;break}q=q.parent}L&&!C&&(C=!0);const z=this.getAbsoluteTransform(C).getMatrix(),X=new O.Transform,_e=this.offset();return X.m=z.slice(),X.translate(_e.x,_e.y),X.getTranslation()}setAbsolutePosition(C){const{x:L,y:q,...z}=this._clearTransform();this.attrs.x=L,this.attrs.y=q,this._clearCache(D);const X=this._getAbsoluteTransform().copy();return X.invert(),X.translate(C.x,C.y),C={x:this.attrs.x+X.getTranslation().x,y:this.attrs.y+X.getTranslation().y},this._setTransform(z),this.setPosition({x:C.x,y:C.y}),this._clearCache(D),this._clearSelfAndDescendantCache(y),this}_setTransform(C){let L;for(L in C)this.attrs[L]=C[L]}_clearTransform(){const C={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,C}move(C){let L=C.x,q=C.y,z=this.x(),X=this.y();return L!==void 0&&(z+=L),q!==void 0&&(X+=q),this.setPosition({x:z,y:X}),this}_eachAncestorReverse(C,L){let q=[],z=this.getParent(),X,_e;if(!(L&&L._id===this._id)){for(q.unshift(this);z&&(!L||z._id!==L._id);)q.unshift(z),z=z.parent;for(X=q.length,_e=0;_e<X;_e++)C(q[_e])}}rotate(C){return this.rotation(this.rotation()+C),this}moveToTop(){if(!this.parent)return O.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const C=this.index,L=this.parent.getChildren().length;return C<L-1?(this.parent.children.splice(C,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return O.Util.warn("Node has no parent. moveUp function is ignored."),!1;const C=this.index,L=this.parent.getChildren().length;return C<L-1?(this.parent.children.splice(C,1),this.parent.children.splice(C+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return O.Util.warn("Node has no parent. moveDown function is ignored."),!1;const C=this.index;return C>0?(this.parent.children.splice(C,1),this.parent.children.splice(C-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return O.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const C=this.index;return C>0?(this.parent.children.splice(C,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(C){if(!this.parent)return O.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(C<0||C>=this.parent.children.length)&&O.Util.warn("Unexpected value "+C+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const L=this.index;return this.parent.children.splice(L,1),this.parent.children.splice(C,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(h,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let C=this.opacity();const L=this.getParent();return L&&!L._isUnderCache&&(C*=L.getAbsoluteOpacity()),C}moveTo(C){return this.getParent()!==C&&(this._remove(),C.add(this)),this}toObject(){let C=this.getAttrs(),L,q,z,X,_e;const ie={attrs:{},className:this.getClassName()};for(L in C)q=C[L],_e=O.Util.isObject(q)&&!O.Util._isPlainObject(q)&&!O.Util._isArray(q),!_e&&(z=typeof this[L]=="function"&&this[L],delete C[L],X=z?z.call(this):null,C[L]=q,X!==q&&(ie.attrs[L]=q));return O.Util._prepareToStringify(ie)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(C,L,q){const z=[];L&&this._isMatch(C)&&z.push(this);let X=this.parent;for(;X;){if(X===q)return z;X._isMatch(C)&&z.push(X),X=X.parent}return z}isAncestorOf(C){return!1}findAncestor(C,L,q){return this.findAncestors(C,L,q)[0]}_isMatch(C){if(!C)return!1;if(typeof C=="function")return C(this);let L=C.replace(/ /g,"").split(","),q=L.length,z,X;for(z=0;z<q;z++)if(X=L[z],O.Util.isValidSelector(X)||(O.Util.warn('Selector "'+X+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),O.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),O.Util.warn("Konva is awesome, right?")),X.charAt(0)==="#"){if(this.id()===X.slice(1))return!0}else if(X.charAt(0)==="."){if(this.hasName(X.slice(1)))return!0}else if(this.className===X||this.nodeType===X)return!0;return!1}getLayer(){const C=this.getParent();return C?C.getLayer():null}getStage(){return this._getCache(F,this._getStage)}_getStage(){const C=this.getParent();return C?C.getStage():null}fire(C,L={},q){return L.target=L.target||this,q?this._fireAndBubble(C,L):this._fire(C,L),this}getAbsoluteTransform(C){return C?this._getAbsoluteTransform(C):this._getCache(y,this._getAbsoluteTransform)}_getAbsoluteTransform(C){let L;if(C)return L=new O.Transform,this._eachAncestorReverse(function(q){const z=q.transformsEnabled();z==="all"?L.multiply(q.getTransform()):z==="position"&&L.translate(q.x()-q.offsetX(),q.y()-q.offsetY())},C),L;{L=this._cache.get(y)||new O.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(L):L.reset();const q=this.transformsEnabled();if(q==="all")L.multiply(this.getTransform());else if(q==="position"){const z=this.attrs.x||0,X=this.attrs.y||0,_e=this.attrs.offsetX||0,ie=this.attrs.offsetY||0;L.translate(z-_e,X-ie)}return L.dirty=!1,L}}getAbsoluteScale(C){let L=this;for(;L;)L._isUnderCache&&(C=L),L=L.getParent();const z=this.getAbsoluteTransform(C).decompose();return{x:z.scaleX,y:z.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(D,this._getTransform)}_getTransform(){var C,L;const q=this._cache.get(D)||new O.Transform;q.reset();const z=this.x(),X=this.y(),_e=T.Konva.getAngle(this.rotation()),ie=(C=this.attrs.scaleX)!==null&&C!==void 0?C:1,be=(L=this.attrs.scaleY)!==null&&L!==void 0?L:1,Te=this.attrs.skewX||0,ge=this.attrs.skewY||0,V=this.attrs.offsetX||0,fe=this.attrs.offsetY||0;return(z!==0||X!==0)&&q.translate(z,X),_e!==0&&q.rotate(_e),(Te!==0||ge!==0)&&q.skew(Te,ge),(ie!==1||be!==1)&&q.scale(ie,be),(V!==0||fe!==0)&&q.translate(-1*V,-1*fe),q.dirty=!1,q}clone(C){let L=O.Util.cloneObject(this.attrs),q,z,X,_e,ie;for(q in C)L[q]=C[q];const be=new this.constructor(L);for(q in this.eventListeners)for(z=this.eventListeners[q],X=z.length,_e=0;_e<X;_e++)ie=z[_e],ie.name.indexOf(f)<0&&(be.eventListeners[q]||(be.eventListeners[q]=[]),be.eventListeners[q].push(ie));return be}_toKonvaCanvas(C){C=C||{};const L=this.getClientRect(),q=this.getStage(),z=C.x!==void 0?C.x:Math.floor(L.x),X=C.y!==void 0?C.y:Math.floor(L.y),_e=C.pixelRatio||1,ie=new a.SceneCanvas({width:C.width||Math.ceil(L.width)||(q?q.width():0),height:C.height||Math.ceil(L.height)||(q?q.height():0),pixelRatio:_e}),be=ie.getContext(),Te=new a.SceneCanvas({width:ie.width/ie.pixelRatio+Math.abs(z),height:ie.height/ie.pixelRatio+Math.abs(X),pixelRatio:ie.pixelRatio});return C.imageSmoothingEnabled===!1&&(be._context.imageSmoothingEnabled=!1),be.save(),(z||X)&&be.translate(-1*z,-1*X),this.drawScene(ie,void 0,Te),be.restore(),ie}toCanvas(C){return this._toKonvaCanvas(C)._canvas}toDataURL(C){C=C||{};const L=C.mimeType||null,q=C.quality||null,z=this._toKonvaCanvas(C).toDataURL(L,q);return C.callback&&C.callback(z),z}toImage(C){return new Promise((L,q)=>{try{const z=C?.callback;z&&delete C.callback,O.Util._urlToImage(this.toDataURL(C),function(X){L(X),z?.(X)})}catch(z){q(z)}})}toBlob(C){return new Promise((L,q)=>{try{const z=C?.callback;z&&delete C.callback,this.toCanvas(C).toBlob(X=>{L(X),z?.(X)},C?.mimeType,C?.quality)}catch(z){q(z)}})}setSize(C){return this.width(C.width),this.height(C.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():T.Konva.dragDistance}_off(C,L,q){let z=this.eventListeners[C],X,_e,ie;for(X=0;X<z.length;X++)if(_e=z[X].name,ie=z[X].handler,(_e!=="konva"||L==="konva")&&(!L||_e===L)&&(!q||q===ie)){if(z.splice(X,1),z.length===0){delete this.eventListeners[C];break}X--}}_fireChangeEvent(C,L,q){this._fire(C+R,{oldVal:L,newVal:q})}addName(C){if(!this.hasName(C)){const L=this.name(),q=L?L+" "+C:C;this.name(q)}return this}hasName(C){if(!C)return!1;const L=this.name();return L?(L||"").split(/\s/g).indexOf(C)!==-1:!1}removeName(C){const L=(this.name()||"").split(/\s/g),q=L.indexOf(C);return q!==-1&&(L.splice(q,1),this.name(L.join(" "))),this}setAttr(C,L){const q=this[N+O.Util._capitalize(C)];return O.Util._isFunction(q)?q.call(this,L):this._setAttr(C,L),this}_requestDraw(){if(T.Konva.autoDrawEnabled){const C=this.getLayer()||this.getStage();C?.batchDraw()}}_setAttr(C,L){const q=this.attrs[C];q===L&&!O.Util.isObject(L)||(L==null?delete this.attrs[C]:this.attrs[C]=L,this._shouldFireChangeEvents&&this._fireChangeEvent(C,q,L),this._requestDraw())}_setComponentAttr(C,L,q){let z;q!==void 0&&(z=this.attrs[C],z||(this.attrs[C]=this.getAttr(C)),this.attrs[C][L]=q,this._fireChangeEvent(C,z,q))}_fireAndBubble(C,L,q){L&&this.nodeType===I&&(L.target=this);const z=[k,M,G,v,u,P];if(!(z.indexOf(C)!==-1&&(q&&(this===q||this.isAncestorOf&&this.isAncestorOf(q))||this.nodeType==="Stage"&&!q))){this._fire(C,L);const _e=z.indexOf(C)!==-1&&q&&q.isAncestorOf&&q.isAncestorOf(this)&&!q.isAncestorOf(this.parent);(L&&!L.cancelBubble||!L)&&this.parent&&this.parent.isListening()&&!_e&&(q&&q.parent?this._fireAndBubble.call(this.parent,C,L,q):this._fireAndBubble.call(this.parent,C,L))}}_getProtoListeners(C){var L,q,z;const X=(L=this._cache.get(d))!==null&&L!==void 0?L:{};let _e=X?.[C];if(_e===void 0){_e=[];let ie=Object.getPrototypeOf(this);for(;ie;){const be=(z=(q=ie.eventListeners)===null||q===void 0?void 0:q[C])!==null&&z!==void 0?z:[];_e.push(...be),ie=Object.getPrototypeOf(ie)}X[C]=_e,this._cache.set(d,X)}return _e}_fire(C,L){L=L||{},L.currentTarget=this,L.type=C;const q=this._getProtoListeners(C);if(q)for(let X=0;X<q.length;X++)q[X].handler.call(this,L);const z=this.eventListeners[C];if(z)for(let X=0;X<z.length;X++)z[X].handler.call(this,L)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(C){const L=C?C.pointerId:void 0,q=this.getStage(),z=this.getAbsolutePosition();if(!q)return;const X=q._getPointerById(L)||q._changedPointerPositions[0]||z;c.DD._dragElements.set(this._id,{node:this,startPointerPos:X,offset:{x:X.x-z.x,y:X.y-z.y},dragStatus:"ready",pointerId:L})}startDrag(C,L=!0){c.DD._dragElements.has(this._id)||this._createDragElement(C);const q=c.DD._dragElements.get(this._id);q.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:C&&C.evt},L)}_setDragPosition(C,L){const q=this.getStage()._getPointerById(L.pointerId);if(!q)return;let z={x:q.x-L.offset.x,y:q.y-L.offset.y};const X=this.dragBoundFunc();if(X!==void 0){const _e=X.call(this,z,C);_e?z=_e:O.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==z.x||this._lastPos.y!==z.y)&&(this.setAbsolutePosition(z),this._requestDraw()),this._lastPos=z}stopDrag(C){const L=c.DD._dragElements.get(this._id);L&&(L.dragStatus="stopped"),c.DD._endDragBefore(C),c.DD._endDragAfter(C)}setDraggable(C){this._setAttr("draggable",C),this._dragChange()}isDragging(){const C=c.DD._dragElements.get(this._id);return C?C.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(C){if(!(!(C.evt.button!==void 0)||T.Konva.dragButtons.indexOf(C.evt.button)>=0)||this.isDragging())return;let z=!1;c.DD._dragElements.forEach(X=>{this.isAncestorOf(X.node)&&(z=!0)}),z||this._createDragElement(C)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const L=c.DD._dragElements.get(this._id),q=L&&L.dragStatus==="dragging",z=L&&L.dragStatus==="ready";q?this.stopDrag():z&&c.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(C={x:0,y:0}){const L=this.getStage();if(!L)return!1;const q={x:-C.x,y:-C.y,width:L.width()+2*C.x,height:L.height()+2*C.y};return O.Util.haveIntersection(q,this.getClientRect())}static create(C,L){return O.Util._isString(C)&&(C=JSON.parse(C)),this._createNode(C,L)}static _createNode(C,L){let q=xl.prototype.getClassName.call(C),z=C.children,X,_e,ie;L&&(C.attrs.container=L),T.Konva[q]||(O.Util.warn('Can not find a node with class name "'+q+'". Fallback to "Shape".'),q="Shape");const be=T.Konva[q];if(X=new be(C.attrs),z)for(_e=z.length,ie=0;ie<_e;ie++)X.add(xl._createNode(z[ie]));return X}};Is.Node=he,he.prototype.nodeType="Node",he.prototype._attrsAffectingSize=[],he.prototype.eventListeners={},he.prototype.on.call(he.prototype,Z,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(D),this._clearSelfAndDescendantCache(y)}),he.prototype.on.call(he.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(H)}),he.prototype.on.call(he.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),he.prototype.on.call(he.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(h)});const ne=E.Factory.addGetterSetter;return ne(he,"zIndex"),ne(he,"absolutePosition"),ne(he,"position"),ne(he,"x",0,(0,m.getNumberValidator)()),ne(he,"y",0,(0,m.getNumberValidator)()),ne(he,"globalCompositeOperation","source-over",(0,m.getStringValidator)()),ne(he,"opacity",1,(0,m.getNumberValidator)()),ne(he,"name","",(0,m.getStringValidator)()),ne(he,"id","",(0,m.getStringValidator)()),ne(he,"rotation",0,(0,m.getNumberValidator)()),E.Factory.addComponentsGetterSetter(he,"scale",["x","y"]),ne(he,"scaleX",1,(0,m.getNumberValidator)()),ne(he,"scaleY",1,(0,m.getNumberValidator)()),E.Factory.addComponentsGetterSetter(he,"skew",["x","y"]),ne(he,"skewX",0,(0,m.getNumberValidator)()),ne(he,"skewY",0,(0,m.getNumberValidator)()),E.Factory.addComponentsGetterSetter(he,"offset",["x","y"]),ne(he,"offsetX",0,(0,m.getNumberValidator)()),ne(he,"offsetY",0,(0,m.getNumberValidator)()),ne(he,"dragDistance",void 0,(0,m.getNumberValidator)()),ne(he,"width",0,(0,m.getNumberValidator)()),ne(he,"height",0,(0,m.getNumberValidator)()),ne(he,"listening",!0,(0,m.getBooleanValidator)()),ne(he,"preventDefault",!0,(0,m.getBooleanValidator)()),ne(he,"filters",void 0,function(Ce){return this._filterUpToDate=!1,Ce}),ne(he,"visible",!0,(0,m.getBooleanValidator)()),ne(he,"transformsEnabled","all",(0,m.getStringValidator)()),ne(he,"size"),ne(he,"dragBoundFunc"),ne(he,"draggable",!1,(0,m.getBooleanValidator)()),E.Factory.backCompat(he,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Is}var Ds={},Zu;function _o(){if(Zu)return Ds;Zu=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.Container=void 0;const a=st(),c=Gt(),E=at();let T=class extends c.Node{constructor(){super(...arguments),this.children=[]}getChildren(m){const h=this.children||[];return m?h.filter(m):h}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(m=>{m.parent=null,m.index=0,m.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(m=>{m.parent=null,m.index=0,m.destroy()}),this.children=[],this._requestDraw(),this}add(...m){if(m.length===0)return this;if(m.length>1){for(let d=0;d<m.length;d++)this.add(m[d]);return this}const h=m[0];return h.getParent()?(h.moveTo(this),this):(this._validateAdd(h),h.index=this.getChildren().length,h.parent=this,h._clearCaches(),this.getChildren().push(h),this._fire("add",{child:h}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(m){return this._generalFind(m,!1)}findOne(m){const h=this._generalFind(m,!0);return h.length>0?h[0]:void 0}_generalFind(m,h){const d=[];return this._descendants(y=>{const S=y._isMatch(m);return S&&d.push(y),!!(S&&h)}),d}_descendants(m){let h=!1;const d=this.getChildren();for(const y of d){if(h=m(y),h)return!0;if(y.hasChildren()&&(h=y._descendants(m),h))return!0}return!1}toObject(){const m=c.Node.prototype.toObject.call(this);return m.children=[],this.getChildren().forEach(h=>{m.children.push(h.toObject())}),m}isAncestorOf(m){let h=m.getParent();for(;h;){if(h._id===this._id)return!0;h=h.getParent()}return!1}clone(m){const h=c.Node.prototype.clone.call(this,m);return this.getChildren().forEach(function(d){h.add(d.clone())}),h}getAllIntersections(m){const h=[];return this.find("Shape").forEach(d=>{d.isVisible()&&d.intersects(m)&&h.push(d)}),h}_clearSelfAndDescendantCache(m){var h;super._clearSelfAndDescendantCache(m),!this.isCached()&&((h=this.children)===null||h===void 0||h.forEach(function(d){d._clearSelfAndDescendantCache(m)}))}_setChildrenIndices(){var m;(m=this.children)===null||m===void 0||m.forEach(function(h,d){h.index=d}),this._requestDraw()}drawScene(m,h,d){const y=this.getLayer(),S=m||y&&y.getCanvas(),x=S&&S.getContext(),R=this._getCanvasCache(),w=R&&R.scene,f=S&&S.isCache;if(!this.isVisible()&&!f)return this;if(w){x.save();const g=this.getAbsoluteTransform(h).getMatrix();x.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(x),x.restore()}else this._drawChildren("drawScene",S,h,d);return this}drawHit(m,h){if(!this.shouldDrawHit(h))return this;const d=this.getLayer(),y=m||d&&d.hitCanvas,S=y&&y.getContext(),x=this._getCanvasCache();if(x&&x.hit){S.save();const w=this.getAbsoluteTransform(h).getMatrix();S.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedHitCanvas(S),S.restore()}else this._drawChildren("drawHit",y,h);return this}_drawChildren(m,h,d,y){var S;const x=h&&h.getContext(),R=this.clipWidth(),w=this.clipHeight(),f=this.clipFunc(),g=typeof R=="number"&&typeof w=="number"||f,k=d===this;if(g){x.save();const G=this.getAbsoluteTransform(d);let v=G.getMatrix();x.transform(v[0],v[1],v[2],v[3],v[4],v[5]),x.beginPath();let u;if(f)u=f.call(this,x,this);else{const P=this.clipX(),N=this.clipY();x.rect(P||0,N||0,R,w)}x.clip.apply(x,u),v=G.copy().invert().getMatrix(),x.transform(v[0],v[1],v[2],v[3],v[4],v[5])}const M=!k&&this.globalCompositeOperation()!=="source-over"&&m==="drawScene";M&&(x.save(),x._applyGlobalCompositeOperation(this)),(S=this.children)===null||S===void 0||S.forEach(function(G){G[m](h,d,y)}),M&&x.restore(),g&&x.restore()}getClientRect(m={}){var h;const d=m.skipTransform,y=m.relativeTo;let S,x,R,w,f={x:1/0,y:1/0,width:0,height:0};const g=this;(h=this.children)===null||h===void 0||h.forEach(function(G){if(!G.visible())return;const v=G.getClientRect({relativeTo:g,skipShadow:m.skipShadow,skipStroke:m.skipStroke});v.width===0&&v.height===0||(S===void 0?(S=v.x,x=v.y,R=v.x+v.width,w=v.y+v.height):(S=Math.min(S,v.x),x=Math.min(x,v.y),R=Math.max(R,v.x+v.width),w=Math.max(w,v.y+v.height)))});const k=this.find("Shape");let M=!1;for(let G=0;G<k.length;G++)if(k[G]._isVisible(this)){M=!0;break}return M&&S!==void 0?f={x:S,y:x,width:R-S,height:w-x}:f={x:0,y:0,width:0,height:0},d?f:this._transformedRect(f,y)}};return Ds.Container=T,a.Factory.addComponentsGetterSetter(T,"clip",["x","y","width","height"]),a.Factory.addGetterSetter(T,"clipX",void 0,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(T,"clipY",void 0,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(T,"clipWidth",void 0,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(T,"clipHeight",void 0,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(T,"clipFunc"),Ds}var cl={},oi={},$u;function Sh(){if($u)return oi;$u=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.getCapturedShape=T,oi.createEvent=O,oi.hasPointerCapture=m,oi.setPointerCapture=h,oi.releaseCapture=d;const a=tt(),c=new Map,E=a.Konva._global.PointerEvent!==void 0;function T(y){return c.get(y)}function O(y){return{evt:y,pointerId:y.pointerId}}function m(y,S){return c.get(y)===S}function h(y,S){d(y),S.getStage()&&(c.set(y,S),E&&S._fire("gotpointercapture",O(new PointerEvent("gotpointercapture"))))}function d(y,S){const x=c.get(y);if(!x)return;const R=x.getStage();R&&R.content,c.delete(y),E&&x._fire("lostpointercapture",O(new PointerEvent("lostpointercapture")))}return oi}var ec;function Hd(){return ec||(ec=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const c=At(),E=st(),T=_o(),O=tt(),m=vo(),h=Tl(),d=tt(),y=Sh(),S="Stage",x="string",R="px",w="mouseout",f="mouseleave",g="mouseover",k="mouseenter",M="mousemove",G="mousedown",v="mouseup",u="pointermove",P="pointerdown",N="pointerup",I="pointercancel",W="lostpointercapture",F="pointerout",D="pointerleave",B="pointerover",H="pointerenter",Z="contextmenu",se="touchstart",he="touchend",ne="touchmove",Ce="touchcancel",C="wheel",L=5,q=[[k,"_pointerenter"],[G,"_pointerdown"],[M,"_pointermove"],[v,"_pointerup"],[f,"_pointerleave"],[se,"_pointerdown"],[ne,"_pointermove"],[he,"_pointerup"],[Ce,"_pointercancel"],[g,"_pointerover"],[C,"_wheel"],[Z,"_contextmenu"],[P,"_pointerdown"],[u,"_pointermove"],[N,"_pointerup"],[I,"_pointercancel"],[D,"_pointerleave"],[W,"_lostpointercapture"]],z={mouse:{[F]:w,[D]:f,[B]:g,[H]:k,[u]:M,[P]:G,[N]:v,[I]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[F]:"touchout",[D]:"touchleave",[B]:"touchover",[H]:"touchenter",[u]:ne,[P]:se,[N]:he,[I]:Ce,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[F]:F,[D]:D,[B]:B,[H]:H,[u]:u,[P]:P,[N]:N,[I]:I,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},X=ge=>ge.indexOf("pointer")>=0?"pointer":ge.indexOf("touch")>=0?"touch":"mouse",_e=ge=>{const V=X(ge);if(V==="pointer")return O.Konva.pointerEventsEnabled&&z.pointer;if(V==="touch")return z.touch;if(V==="mouse")return z.mouse};function ie(ge={}){return(ge.clipFunc||ge.clipWidth||ge.clipHeight)&&c.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ge}const be="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class Te extends T.Container{constructor(V){super(ie(V)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ie(this.attrs)}),this._checkVisibility()}_validateAdd(V){const fe=V.getType()==="Layer",ye=V.getType()==="FastLayer";fe||ye||c.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const V=this.visible()?"":"none";this.content.style.display=V}setContainer(V){if(typeof V===x){let fe;if(V.charAt(0)==="."){const ye=V.slice(1);V=document.getElementsByClassName(ye)[0]}else V.charAt(0)!=="#"?fe=V:fe=V.slice(1),V=document.getElementById(fe);if(!V)throw"Can not find container in document with id "+fe}return this._setAttr("container",V),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),V.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const V=this.children,fe=V.length;for(let ye=0;ye<fe;ye++)V[ye].clear();return this}clone(V){return V||(V={}),V.container=typeof document<"u"&&document.createElement("div"),T.Container.prototype.clone.call(this,V)}destroy(){super.destroy();const V=this.content;V&&c.Util._isInDocument(V)&&this.container().removeChild(V);const fe=a.stages.indexOf(this);return fe>-1&&a.stages.splice(fe,1),c.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const V=this._pointerPositions[0]||this._changedPointerPositions[0];return V?{x:V.x,y:V.y}:(c.Util.warn(be),null)}_getPointerById(V){return this._pointerPositions.find(fe=>fe.id===V)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(V){V=V||{},V.x=V.x||0,V.y=V.y||0,V.width=V.width||this.width(),V.height=V.height||this.height();const fe=new m.SceneCanvas({width:V.width,height:V.height,pixelRatio:V.pixelRatio||1}),ye=fe.getContext()._context,Me=this.children;return(V.x||V.y)&&ye.translate(-1*V.x,-1*V.y),Me.forEach(function(Ie){if(!Ie.isVisible())return;const Fe=Ie._toKonvaCanvas(V);ye.drawImage(Fe._canvas,V.x,V.y,Fe.getWidth()/Fe.getPixelRatio(),Fe.getHeight()/Fe.getPixelRatio())}),fe}getIntersection(V){if(!V)return null;const fe=this.children,ye=fe.length,Me=ye-1;for(let Ie=Me;Ie>=0;Ie--){const Fe=fe[Ie].getIntersection(V);if(Fe)return Fe}return null}_resizeDOM(){const V=this.width(),fe=this.height();this.content&&(this.content.style.width=V+R,this.content.style.height=fe+R),this.bufferCanvas.setSize(V,fe),this.bufferHitCanvas.setSize(V,fe),this.children.forEach(ye=>{ye.setSize({width:V,height:fe}),ye.draw()})}add(V,...fe){if(arguments.length>1){for(let Me=0;Me<arguments.length;Me++)this.add(arguments[Me]);return this}super.add(V);const ye=this.children.length;return ye>L&&c.Util.warn("The stage has "+ye+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),V.setSize({width:this.width(),height:this.height()}),V.draw(),O.Konva.isBrowser&&this.content.appendChild(V.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(V){return y.hasPointerCapture(V,this)}setPointerCapture(V){y.setPointerCapture(V,this)}releaseCapture(V){y.releaseCapture(V,this)}getLayers(){return this.children}_bindContentEvents(){O.Konva.isBrowser&&q.forEach(([V,fe])=>{this.content.addEventListener(V,ye=>{this[fe](ye)},{passive:!1})})}_pointerenter(V){this.setPointersPositions(V);const fe=_e(V.type);fe&&this._fire(fe.pointerenter,{evt:V,target:this,currentTarget:this})}_pointerover(V){this.setPointersPositions(V);const fe=_e(V.type);fe&&this._fire(fe.pointerover,{evt:V,target:this,currentTarget:this})}_getTargetShape(V){let fe=this[V+"targetShape"];return fe&&!fe.getStage()&&(fe=null),fe}_pointerleave(V){const fe=_e(V.type),ye=X(V.type);if(!fe)return;this.setPointersPositions(V);const Me=this._getTargetShape(ye),Ie=!(O.Konva.isDragging()||O.Konva.isTransforming())||O.Konva.hitOnDragEnabled;Me&&Ie?(Me._fireAndBubble(fe.pointerout,{evt:V}),Me._fireAndBubble(fe.pointerleave,{evt:V}),this._fire(fe.pointerleave,{evt:V,target:this,currentTarget:this}),this[ye+"targetShape"]=null):Ie&&(this._fire(fe.pointerleave,{evt:V,target:this,currentTarget:this}),this._fire(fe.pointerout,{evt:V,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(V){const fe=_e(V.type),ye=X(V.type);if(!fe)return;this.setPointersPositions(V);let Me=!1;this._changedPointerPositions.forEach(Ie=>{const Fe=this.getIntersection(Ie);if(h.DD.justDragged=!1,O.Konva["_"+ye+"ListenClick"]=!0,!Fe||!Fe.isListening()){this[ye+"ClickStartShape"]=void 0;return}O.Konva.capturePointerEventsEnabled&&Fe.setPointerCapture(Ie.id),this[ye+"ClickStartShape"]=Fe,Fe._fireAndBubble(fe.pointerdown,{evt:V,pointerId:Ie.id}),Me=!0;const Ke=V.type.indexOf("touch")>=0;Fe.preventDefault()&&V.cancelable&&Ke&&V.preventDefault()}),Me||this._fire(fe.pointerdown,{evt:V,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(V){const fe=_e(V.type),ye=X(V.type);if(!fe||(O.Konva.isDragging()&&h.DD.node.preventDefault()&&V.cancelable&&V.preventDefault(),this.setPointersPositions(V),!(!(O.Konva.isDragging()||O.Konva.isTransforming())||O.Konva.hitOnDragEnabled)))return;const Ie={};let Fe=!1;const Ke=this._getTargetShape(ye);this._changedPointerPositions.forEach(lt=>{const He=y.getCapturedShape(lt.id)||this.getIntersection(lt),Ot=lt.id,ft={evt:V,pointerId:Ot},xt=Ke!==He;if(xt&&Ke&&(Ke._fireAndBubble(fe.pointerout,{...ft},He),Ke._fireAndBubble(fe.pointerleave,{...ft},He)),He){if(Ie[He._id])return;Ie[He._id]=!0}He&&He.isListening()?(Fe=!0,xt&&(He._fireAndBubble(fe.pointerover,{...ft},Ke),He._fireAndBubble(fe.pointerenter,{...ft},Ke),this[ye+"targetShape"]=He),He._fireAndBubble(fe.pointermove,{...ft})):Ke&&(this._fire(fe.pointerover,{evt:V,target:this,currentTarget:this,pointerId:Ot}),this[ye+"targetShape"]=null)}),Fe||this._fire(fe.pointermove,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(V){const fe=_e(V.type),ye=X(V.type);if(!fe)return;this.setPointersPositions(V);const Me=this[ye+"ClickStartShape"],Ie=this[ye+"ClickEndShape"],Fe={};let Ke=!1;this._changedPointerPositions.forEach(lt=>{const He=y.getCapturedShape(lt.id)||this.getIntersection(lt);if(He){if(He.releaseCapture(lt.id),Fe[He._id])return;Fe[He._id]=!0}const Ot=lt.id,ft={evt:V,pointerId:Ot};let xt=!1;O.Konva["_"+ye+"InDblClickWindow"]?(xt=!0,clearTimeout(this[ye+"DblTimeout"])):h.DD.justDragged||(O.Konva["_"+ye+"InDblClickWindow"]=!0,clearTimeout(this[ye+"DblTimeout"])),this[ye+"DblTimeout"]=setTimeout(function(){O.Konva["_"+ye+"InDblClickWindow"]=!1},O.Konva.dblClickWindow),He&&He.isListening()?(Ke=!0,this[ye+"ClickEndShape"]=He,He._fireAndBubble(fe.pointerup,{...ft}),O.Konva["_"+ye+"ListenClick"]&&Me&&Me===He&&(He._fireAndBubble(fe.pointerclick,{...ft}),xt&&Ie&&Ie===He&&He._fireAndBubble(fe.pointerdblclick,{...ft}))):(this[ye+"ClickEndShape"]=null,O.Konva["_"+ye+"ListenClick"]&&this._fire(fe.pointerclick,{evt:V,target:this,currentTarget:this,pointerId:Ot}),xt&&this._fire(fe.pointerdblclick,{evt:V,target:this,currentTarget:this,pointerId:Ot}))}),Ke||this._fire(fe.pointerup,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),O.Konva["_"+ye+"ListenClick"]=!1,V.cancelable&&ye!=="touch"&&ye!=="pointer"&&V.preventDefault()}_contextmenu(V){this.setPointersPositions(V);const fe=this.getIntersection(this.getPointerPosition());fe&&fe.isListening()?fe._fireAndBubble(Z,{evt:V}):this._fire(Z,{evt:V,target:this,currentTarget:this})}_wheel(V){this.setPointersPositions(V);const fe=this.getIntersection(this.getPointerPosition());fe&&fe.isListening()?fe._fireAndBubble(C,{evt:V}):this._fire(C,{evt:V,target:this,currentTarget:this})}_pointercancel(V){this.setPointersPositions(V);const fe=y.getCapturedShape(V.pointerId)||this.getIntersection(this.getPointerPosition());fe&&fe._fireAndBubble(N,y.createEvent(V)),y.releaseCapture(V.pointerId)}_lostpointercapture(V){y.releaseCapture(V.pointerId)}setPointersPositions(V){const fe=this._getContentPosition();let ye=null,Me=null;V=V||window.event,V.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(V.touches,Ie=>{this._pointerPositions.push({id:Ie.identifier,x:(Ie.clientX-fe.left)/fe.scaleX,y:(Ie.clientY-fe.top)/fe.scaleY})}),Array.prototype.forEach.call(V.changedTouches||V.touches,Ie=>{this._changedPointerPositions.push({id:Ie.identifier,x:(Ie.clientX-fe.left)/fe.scaleX,y:(Ie.clientY-fe.top)/fe.scaleY})})):(ye=(V.clientX-fe.left)/fe.scaleX,Me=(V.clientY-fe.top)/fe.scaleY,this.pointerPos={x:ye,y:Me},this._pointerPositions=[{x:ye,y:Me,id:c.Util._getFirstPointerId(V)}],this._changedPointerPositions=[{x:ye,y:Me,id:c.Util._getFirstPointerId(V)}])}_setPointerPosition(V){c.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(V)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const V=this.content.getBoundingClientRect();return{top:V.top,left:V.left,scaleX:V.width/this.content.clientWidth||1,scaleY:V.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new m.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new m.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!O.Konva.isBrowser)return;const V=this.container();if(!V)throw"Stage has no container. A container is required.";V.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),V.appendChild(this.content),this._resizeDOM()}cache(){return c.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(V){V.batchDraw()}),this}}a.Stage=Te,Te.prototype.nodeType=S,(0,d._registerNode)(Te),E.Factory.addGetterSetter(Te,"container"),O.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{a.stages.forEach(ge=>{ge.batchDraw()})})})(cl)),cl}var Ls={},hl={},tc;function en(){return tc||(tc=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const c=tt(),E=At(),T=st(),O=Gt(),m=at(),h=tt(),d=Sh(),y="hasShadow",S="shadowRGBA",x="patternImage",R="linearGradient",w="radialGradient";let f;function g(){return f||(f=E.Util.createCanvasElement().getContext("2d"),f)}a.shapes={};function k(D){const B=this.attrs.fillRule;B?D.fill(B):D.fill()}function M(D){D.stroke()}function G(D){const B=this.attrs.fillRule;B?D.fill(B):D.fill()}function v(D){D.stroke()}function u(){this._clearCache(y)}function P(){this._clearCache(S)}function N(){this._clearCache(x)}function I(){this._clearCache(R)}function W(){this._clearCache(w)}class F extends O.Node{constructor(B){super(B);let H;for(;H=E.Util.getRandomColor(),!(H&&!(H in a.shapes)););this.colorKey=H,a.shapes[H]=this}getContext(){return E.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return E.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(y,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(x,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const H=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(H&&H.setTransform){const Z=new E.Transform;Z.translate(this.fillPatternX(),this.fillPatternY()),Z.rotate(c.Konva.getAngle(this.fillPatternRotation())),Z.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Z.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const se=Z.getMatrix(),he=typeof DOMMatrix>"u"?{a:se[0],b:se[1],c:se[2],d:se[3],e:se[4],f:se[5]}:new DOMMatrix(se);H.setTransform(he)}return H}}_getLinearGradient(){return this._getCache(R,this.__getLinearGradient)}__getLinearGradient(){const B=this.fillLinearGradientColorStops();if(B){const H=g(),Z=this.fillLinearGradientStartPoint(),se=this.fillLinearGradientEndPoint(),he=H.createLinearGradient(Z.x,Z.y,se.x,se.y);for(let ne=0;ne<B.length;ne+=2)he.addColorStop(B[ne],B[ne+1]);return he}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){const B=this.fillRadialGradientColorStops();if(B){const H=g(),Z=this.fillRadialGradientStartPoint(),se=this.fillRadialGradientEndPoint(),he=H.createRadialGradient(Z.x,Z.y,this.fillRadialGradientStartRadius(),se.x,se.y,this.fillRadialGradientEndRadius());for(let ne=0;ne<B.length;ne+=2)he.addColorStop(B[ne],B[ne+1]);return he}}getShadowRGBA(){return this._getCache(S,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const B=E.Util.colorToRGBA(this.shadowColor());if(B)return"rgba("+B.r+","+B.g+","+B.b+","+B.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const B=this.hitStrokeWidth();return B==="auto"?this.hasStroke():this.strokeEnabled()&&!!B}intersects(B){const H=this.getStage();if(!H)return!1;const Z=H.bufferHitCanvas;return Z.getContext().clear(),this.drawHit(Z,void 0,!0),Z.context.getImageData(Math.round(B.x),Math.round(B.y),1,1).data[3]>0}destroy(){return O.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(B){var H;if(!((H=this.attrs.perfectDrawEnabled)!==null&&H!==void 0?H:!0))return!1;const se=B||this.hasFill(),he=this.hasStroke(),ne=this.getAbsoluteOpacity()!==1;if(se&&he&&ne)return!0;const Ce=this.hasShadow(),C=this.shadowForStrokeEnabled();return!!(se&&he&&Ce&&C)}setStrokeHitEnabled(B){E.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),B?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const B=this.size();return{x:this._centroid?-B.width/2:0,y:this._centroid?-B.height/2:0,width:B.width,height:B.height}}getClientRect(B={}){let H=!1,Z=this.getParent();for(;Z;){if(Z.isCached()){H=!0;break}Z=Z.getParent()}const se=B.skipTransform,he=B.relativeTo||H&&this.getStage()||void 0,ne=this.getSelfRect(),C=!B.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,L=ne.width+C,q=ne.height+C,z=!B.skipShadow&&this.hasShadow(),X=z?this.shadowOffsetX():0,_e=z?this.shadowOffsetY():0,ie=L+Math.abs(X),be=q+Math.abs(_e),Te=z&&this.shadowBlur()||0,ge=ie+Te*2,V=be+Te*2,fe={width:ge,height:V,x:-(C/2+Te)+Math.min(X,0)+ne.x,y:-(C/2+Te)+Math.min(_e,0)+ne.y};return se?fe:this._transformedRect(fe,he)}drawScene(B,H,Z){const se=this.getLayer(),he=B||se.getCanvas(),ne=he.getContext(),Ce=this._getCanvasCache(),C=this.getSceneFunc(),L=this.hasShadow();let q;const z=H===this;if(!this.isVisible()&&!z)return this;if(Ce){ne.save();const X=this.getAbsoluteTransform(H).getMatrix();return ne.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedSceneCanvas(ne),ne.restore(),this}if(!C)return this;if(ne.save(),this._useBufferCanvas()){q=this.getStage();const X=Z||q.bufferCanvas,_e=X.getContext();_e.clear(),_e.save(),_e._applyLineJoin(this);const ie=this.getAbsoluteTransform(H).getMatrix();_e.transform(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5]),C.call(this,_e,this),_e.restore();const be=X.pixelRatio;L&&ne._applyShadow(this),ne._applyOpacity(this),ne._applyGlobalCompositeOperation(this),ne.drawImage(X._canvas,X.x||0,X.y||0,X.width/be,X.height/be)}else{if(ne._applyLineJoin(this),!z){const X=this.getAbsoluteTransform(H).getMatrix();ne.transform(X[0],X[1],X[2],X[3],X[4],X[5]),ne._applyOpacity(this),ne._applyGlobalCompositeOperation(this)}L&&ne._applyShadow(this),C.call(this,ne,this)}return ne.restore(),this}drawHit(B,H,Z=!1){if(!this.shouldDrawHit(H,Z))return this;const se=this.getLayer(),he=B||se.hitCanvas,ne=he&&he.getContext(),Ce=this.hitFunc()||this.sceneFunc(),C=this._getCanvasCache(),L=C&&C.hit;if(this.colorKey||E.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),L){ne.save();const z=this.getAbsoluteTransform(H).getMatrix();return ne.transform(z[0],z[1],z[2],z[3],z[4],z[5]),this._drawCachedHitCanvas(ne),ne.restore(),this}if(!Ce)return this;if(ne.save(),ne._applyLineJoin(this),!(this===H)){const z=this.getAbsoluteTransform(H).getMatrix();ne.transform(z[0],z[1],z[2],z[3],z[4],z[5])}return Ce.call(this,ne,this),ne.restore(),this}drawHitFromCache(B=0){const H=this._getCanvasCache(),Z=this._getCachedSceneCanvas(),se=H.hit,he=se.getContext(),ne=se.getWidth(),Ce=se.getHeight();he.clear(),he.drawImage(Z._canvas,0,0,ne,Ce);try{const C=he.getImageData(0,0,ne,Ce),L=C.data,q=L.length,z=E.Util._hexToRgb(this.colorKey);for(let X=0;X<q;X+=4)L[X+3]>B?(L[X]=z.r,L[X+1]=z.g,L[X+2]=z.b,L[X+3]=255):L[X+3]=0;he.putImageData(C,0,0)}catch(C){E.Util.error("Unable to draw hit graph from cached scene canvas. "+C.message)}return this}hasPointerCapture(B){return d.hasPointerCapture(B,this)}setPointerCapture(B){d.setPointerCapture(B,this)}releaseCapture(B){d.releaseCapture(B,this)}}a.Shape=F,F.prototype._fillFunc=k,F.prototype._strokeFunc=M,F.prototype._fillFuncHit=G,F.prototype._strokeFuncHit=v,F.prototype._centroid=!1,F.prototype.nodeType="Shape",(0,h._registerNode)(F),F.prototype.eventListeners={},F.prototype.on.call(F.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",u),F.prototype.on.call(F.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",P),F.prototype.on.call(F.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",N),F.prototype.on.call(F.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",I),F.prototype.on.call(F.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",W),T.Factory.addGetterSetter(F,"stroke",void 0,(0,m.getStringOrGradientValidator)()),T.Factory.addGetterSetter(F,"strokeWidth",2,(0,m.getNumberValidator)()),T.Factory.addGetterSetter(F,"fillAfterStrokeEnabled",!1),T.Factory.addGetterSetter(F,"hitStrokeWidth","auto",(0,m.getNumberOrAutoValidator)()),T.Factory.addGetterSetter(F,"strokeHitEnabled",!0,(0,m.getBooleanValidator)()),T.Factory.addGetterSetter(F,"perfectDrawEnabled",!0,(0,m.getBooleanValidator)()),T.Factory.addGetterSetter(F,"shadowForStrokeEnabled",!0,(0,m.getBooleanValidator)()),T.Factory.addGetterSetter(F,"lineJoin"),T.Factory.addGetterSetter(F,"lineCap"),T.Factory.addGetterSetter(F,"sceneFunc"),T.Factory.addGetterSetter(F,"hitFunc"),T.Factory.addGetterSetter(F,"dash"),T.Factory.addGetterSetter(F,"dashOffset",0,(0,m.getNumberValidator)()),T.Factory.addGetterSetter(F,"shadowColor",void 0,(0,m.getStringValidator)()),T.Factory.addGetterSetter(F,"shadowBlur",0,(0,m.getNumberValidator)()),T.Factory.addGetterSetter(F,"shadowOpacity",1,(0,m.getNumberValidator)()),T.Factory.addComponentsGetterSetter(F,"shadowOffset",["x","y"]),T.Factory.addGetterSetter(F,"shadowOffsetX",0,(0,m.getNumberValidator)()),T.Factory.addGetterSetter(F,"shadowOffsetY",0,(0,m.getNumberValidator)()),T.Factory.addGetterSetter(F,"fillPatternImage"),T.Factory.addGetterSetter(F,"fill",void 0,(0,m.getStringOrGradientValidator)()),T.Factory.addGetterSetter(F,"fillPatternX",0,(0,m.getNumberValidator)()),T.Factory.addGetterSetter(F,"fillPatternY",0,(0,m.getNumberValidator)()),T.Factory.addGetterSetter(F,"fillLinearGradientColorStops"),T.Factory.addGetterSetter(F,"strokeLinearGradientColorStops"),T.Factory.addGetterSetter(F,"fillRadialGradientStartRadius",0),T.Factory.addGetterSetter(F,"fillRadialGradientEndRadius",0),T.Factory.addGetterSetter(F,"fillRadialGradientColorStops"),T.Factory.addGetterSetter(F,"fillPatternRepeat","repeat"),T.Factory.addGetterSetter(F,"fillEnabled",!0),T.Factory.addGetterSetter(F,"strokeEnabled",!0),T.Factory.addGetterSetter(F,"shadowEnabled",!0),T.Factory.addGetterSetter(F,"dashEnabled",!0),T.Factory.addGetterSetter(F,"strokeScaleEnabled",!0),T.Factory.addGetterSetter(F,"fillPriority","color"),T.Factory.addComponentsGetterSetter(F,"fillPatternOffset",["x","y"]),T.Factory.addGetterSetter(F,"fillPatternOffsetX",0,(0,m.getNumberValidator)()),T.Factory.addGetterSetter(F,"fillPatternOffsetY",0,(0,m.getNumberValidator)()),T.Factory.addComponentsGetterSetter(F,"fillPatternScale",["x","y"]),T.Factory.addGetterSetter(F,"fillPatternScaleX",1,(0,m.getNumberValidator)()),T.Factory.addGetterSetter(F,"fillPatternScaleY",1,(0,m.getNumberValidator)()),T.Factory.addComponentsGetterSetter(F,"fillLinearGradientStartPoint",["x","y"]),T.Factory.addComponentsGetterSetter(F,"strokeLinearGradientStartPoint",["x","y"]),T.Factory.addGetterSetter(F,"fillLinearGradientStartPointX",0),T.Factory.addGetterSetter(F,"strokeLinearGradientStartPointX",0),T.Factory.addGetterSetter(F,"fillLinearGradientStartPointY",0),T.Factory.addGetterSetter(F,"strokeLinearGradientStartPointY",0),T.Factory.addComponentsGetterSetter(F,"fillLinearGradientEndPoint",["x","y"]),T.Factory.addComponentsGetterSetter(F,"strokeLinearGradientEndPoint",["x","y"]),T.Factory.addGetterSetter(F,"fillLinearGradientEndPointX",0),T.Factory.addGetterSetter(F,"strokeLinearGradientEndPointX",0),T.Factory.addGetterSetter(F,"fillLinearGradientEndPointY",0),T.Factory.addGetterSetter(F,"strokeLinearGradientEndPointY",0),T.Factory.addComponentsGetterSetter(F,"fillRadialGradientStartPoint",["x","y"]),T.Factory.addGetterSetter(F,"fillRadialGradientStartPointX",0),T.Factory.addGetterSetter(F,"fillRadialGradientStartPointY",0),T.Factory.addComponentsGetterSetter(F,"fillRadialGradientEndPoint",["x","y"]),T.Factory.addGetterSetter(F,"fillRadialGradientEndPointX",0),T.Factory.addGetterSetter(F,"fillRadialGradientEndPointY",0),T.Factory.addGetterSetter(F,"fillPatternRotation",0),T.Factory.addGetterSetter(F,"fillRule",void 0,(0,m.getStringValidator)()),T.Factory.backCompat(F,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(hl)),hl}var nc;function xh(){if(nc)return Ls;nc=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.Layer=void 0;const a=At(),c=_o(),E=Gt(),T=st(),O=vo(),m=at(),h=en(),d=tt(),y="#",S="beforeDraw",x="draw",R=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],w=R.length;class f extends c.Container{constructor(k){super(k),this.canvas=new O.SceneCanvas,this.hitCanvas=new O.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(k){return this.getContext().clear(k),this.getHitCanvas().getContext().clear(k),this}setZIndex(k){super.setZIndex(k);const M=this.getStage();return M&&M.content&&(M.content.removeChild(this.getNativeCanvasElement()),k<M.children.length-1?M.content.insertBefore(this.getNativeCanvasElement(),M.children[k+1].getCanvas()._canvas):M.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){E.Node.prototype.moveToTop.call(this);const k=this.getStage();return k&&k.content&&(k.content.removeChild(this.getNativeCanvasElement()),k.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!E.Node.prototype.moveUp.call(this))return!1;const M=this.getStage();return!M||!M.content?!1:(M.content.removeChild(this.getNativeCanvasElement()),this.index<M.children.length-1?M.content.insertBefore(this.getNativeCanvasElement(),M.children[this.index+1].getCanvas()._canvas):M.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(E.Node.prototype.moveDown.call(this)){const k=this.getStage();if(k){const M=k.children;k.content&&(k.content.removeChild(this.getNativeCanvasElement()),k.content.insertBefore(this.getNativeCanvasElement(),M[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(E.Node.prototype.moveToBottom.call(this)){const k=this.getStage();if(k){const M=k.children;k.content&&(k.content.removeChild(this.getNativeCanvasElement()),k.content.insertBefore(this.getNativeCanvasElement(),M[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const k=this.getNativeCanvasElement();return E.Node.prototype.remove.call(this),k&&k.parentNode&&a.Util._isInDocument(k)&&k.parentNode.removeChild(k),this}getStage(){return this.parent}setSize({width:k,height:M}){return this.canvas.setSize(k,M),this.hitCanvas.setSize(k,M),this._setSmoothEnabled(),this}_validateAdd(k){const M=k.getType();M!=="Group"&&M!=="Shape"&&a.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(k){return k=k||{},k.width=k.width||this.getWidth(),k.height=k.height||this.getHeight(),k.x=k.x!==void 0?k.x:this.x(),k.y=k.y!==void 0?k.y:this.y(),E.Node.prototype._toKonvaCanvas.call(this,k)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){a.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){a.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,a.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(k){if(!this.isListening()||!this.isVisible())return null;let M=1,G=!1;for(;;){for(let v=0;v<w;v++){const u=R[v],P=this._getIntersection({x:k.x+u.x*M,y:k.y+u.y*M}),N=P.shape;if(N)return N;if(G=!!P.antialiased,!P.antialiased)break}if(G)M+=1;else return null}}_getIntersection(k){const M=this.hitCanvas.pixelRatio,G=this.hitCanvas.context.getImageData(Math.round(k.x*M),Math.round(k.y*M),1,1).data,v=G[3];if(v===255){const u=a.Util._rgbToHex(G[0],G[1],G[2]),P=h.shapes[y+u];return P?{shape:P}:{antialiased:!0}}else if(v>0)return{antialiased:!0};return{}}drawScene(k,M,G){const v=this.getLayer(),u=k||v&&v.getCanvas();return this._fire(S,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),c.Container.prototype.drawScene.call(this,u,M,G),this._fire(x,{node:this}),this}drawHit(k,M){const G=this.getLayer(),v=k||G&&G.hitCanvas;return G&&G.clearBeforeDraw()&&G.getHitCanvas().getContext().clear(),c.Container.prototype.drawHit.call(this,v,M),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(k){a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(k)}getHitGraphEnabled(k){return a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const k=this.parent;!!this.hitCanvas._canvas.parentNode?k.content.removeChild(this.hitCanvas._canvas):k.content.appendChild(this.hitCanvas._canvas)}destroy(){return a.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return Ls.Layer=f,f.prototype.nodeType="Layer",(0,d._registerNode)(f),T.Factory.addGetterSetter(f,"imageSmoothingEnabled",!0),T.Factory.addGetterSetter(f,"clearBeforeDraw",!0),T.Factory.addGetterSetter(f,"hitGraphEnabled",!0,(0,m.getBooleanValidator)()),Ls}var Gs={},rc;function Wd(){if(rc)return Gs;rc=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.FastLayer=void 0;const a=At(),c=xh(),E=tt();let T=class extends c.Layer{constructor(m){super(m),this.listening(!1),a.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Gs.FastLayer=T,T.prototype.nodeType="FastLayer",(0,E._registerNode)(T),Gs}var Bs={},ic;function Al(){if(ic)return Bs;ic=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.Group=void 0;const a=At(),c=_o(),E=tt();class T extends c.Container{_validateAdd(m){const h=m.getType();h!=="Group"&&h!=="Shape"&&a.Util.throw("You may only add groups and shapes to groups.")}}return Bs.Group=T,T.prototype.nodeType="Group",(0,E._registerNode)(T),Bs}var js={},sc;function Ol(){if(sc)return js;sc=1,Object.defineProperty(js,"__esModule",{value:!0}),js.Animation=void 0;const a=tt(),c=At(),E=(function(){return a.glob.performance&&a.glob.performance.now?function(){return a.glob.performance.now()}:function(){return new Date().getTime()}})();let T=class ts{constructor(m,h){this.id=ts.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:E(),frameRate:0},this.func=m,this.setLayers(h)}setLayers(m){let h=[];return m&&(h=Array.isArray(m)?m:[m]),this.layers=h,this}getLayers(){return this.layers}addLayer(m){const h=this.layers,d=h.length;for(let y=0;y<d;y++)if(h[y]._id===m._id)return!1;return this.layers.push(m),!0}isRunning(){const h=ts.animations,d=h.length;for(let y=0;y<d;y++)if(h[y].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=E(),ts._addAnimation(this),this}stop(){return ts._removeAnimation(this),this}_updateFrameObject(m){this.frame.timeDiff=m-this.frame.lastTime,this.frame.lastTime=m,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(m){this.animations.push(m),this._handleAnimation()}static _removeAnimation(m){const h=m.id,d=this.animations,y=d.length;for(let S=0;S<y;S++)if(d[S].id===h){this.animations.splice(S,1);break}}static _runFrames(){const m={},h=this.animations;for(let d=0;d<h.length;d++){const y=h[d],S=y.layers,x=y.func;y._updateFrameObject(E());const R=S.length;let w;if(x?w=x.call(y,y.frame)!==!1:w=!0,!!w)for(let f=0;f<R;f++){const g=S[f];g._id!==void 0&&(m[g._id]=g)}}for(const d in m)m.hasOwnProperty(d)&&m[d].batchDraw()}static _animationLoop(){const m=ts;m.animations.length?(m._runFrames(),c.Util.requestAnimFrame(m._animationLoop)):m.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,c.Util.requestAnimFrame(this._animationLoop))}};return js.Animation=T,T.animations=[],T.animIdCounter=0,T.animRunning=!1,js}var dl={},ac;function Yd(){return ac||(ac=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const c=At(),E=Ol(),T=Gt(),O=tt(),m={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=1,d=2,y=3,S=["fill","stroke","shadowColor"];let x=0;class R{constructor(g,k,M,G,v,u,P){this.prop=g,this.propFunc=k,this.begin=G,this._pos=G,this.duration=u,this._change=0,this.prevPos=0,this.yoyo=P,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=M,this._change=v-this.begin,this.pause()}fire(g){const k=this[g];k&&k()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=d,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=y,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===d?this.setTime(g):this.state===y&&this.setTime(this.duration-g)}pause(){this.state=h,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(g){const k=this,M=g.node,G=M._id,v=g.easing||a.Easings.Linear,u=!!g.yoyo;let P,N;typeof g.duration>"u"?P=.3:g.duration===0?P=.001:P=g.duration,this.node=M,this._id=x++;const I=M.getLayer()||(M instanceof O.Konva.Stage?M.getLayers():null);I||c.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new E.Animation(function(){k.tween.onEnterFrame()},I),this.tween=new R(N,function(W){k._tweenFunc(W)},v,0,1,P*1e3,u),this._addListeners(),w.attrs[G]||(w.attrs[G]={}),w.attrs[G][this._id]||(w.attrs[G][this._id]={}),w.tweens[G]||(w.tweens[G]={});for(N in g)m[N]===void 0&&this._addAttr(N,g[N]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,k){const M=this.node,G=M._id;let v,u,P,N,I;const W=w.tweens[G][g];W&&delete w.attrs[G][W][g];let F=M.getAttr(g);if(c.Util._isArray(k))if(v=[],u=Math.max(k.length,F.length),g==="points"&&k.length!==F.length&&(k.length>F.length?(N=F,F=c.Util._prepareArrayForTween(F,k,M.closed())):(P=k,k=c.Util._prepareArrayForTween(k,F,M.closed()))),g.indexOf("fill")===0)for(let D=0;D<u;D++)if(D%2===0)v.push(k[D]-F[D]);else{const B=c.Util.colorToRGBA(F[D]);I=c.Util.colorToRGBA(k[D]),F[D]=B,v.push({r:I.r-B.r,g:I.g-B.g,b:I.b-B.b,a:I.a-B.a})}else for(let D=0;D<u;D++)v.push(k[D]-F[D]);else S.indexOf(g)!==-1?(F=c.Util.colorToRGBA(F),I=c.Util.colorToRGBA(k),v={r:I.r-F.r,g:I.g-F.g,b:I.b-F.b,a:I.a-F.a}):v=k-F;w.attrs[G][this._id][g]={start:F,diff:v,end:k,trueEnd:P,trueStart:N},w.tweens[G][g]=this._id}_tweenFunc(g){const k=this.node,M=w.attrs[k._id][this._id];let G,v,u,P,N,I,W,F;for(G in M){if(v=M[G],u=v.start,P=v.diff,F=v.end,c.Util._isArray(u))if(N=[],W=Math.max(u.length,F.length),G.indexOf("fill")===0)for(I=0;I<W;I++)I%2===0?N.push((u[I]||0)+P[I]*g):N.push("rgba("+Math.round(u[I].r+P[I].r*g)+","+Math.round(u[I].g+P[I].g*g)+","+Math.round(u[I].b+P[I].b*g)+","+(u[I].a+P[I].a*g)+")");else for(I=0;I<W;I++)N.push((u[I]||0)+P[I]*g);else S.indexOf(G)!==-1?N="rgba("+Math.round(u.r+P.r*g)+","+Math.round(u.g+P.g*g)+","+Math.round(u.b+P.b*g)+","+(u.a+P.a*g)+")":N=u+P*g;k.setAttr(G,N)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,k=w.attrs[g._id][this._id];k.points&&k.points.trueEnd&&g.setAttr("points",k.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,k=w.attrs[g._id][this._id];k.points&&k.points.trueStart&&g.points(k.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,k=this._id,M=w.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const G in M)delete w.tweens[g][G];delete w.attrs[g][k],w.tweens[g]&&(Object.keys(w.tweens[g]).length===0&&delete w.tweens[g],Object.keys(w.attrs[g]).length===0&&delete w.attrs[g])}}a.Tween=w,w.attrs={},w.tweens={},T.Node.prototype.to=function(f){const g=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),g&&g()},new w(f).play()},a.Easings={BackEaseIn(f,g,k,M){return k*(f/=M)*f*((1.70158+1)*f-1.70158)+g},BackEaseOut(f,g,k,M){return k*((f=f/M-1)*f*((1.70158+1)*f+1.70158)+1)+g},BackEaseInOut(f,g,k,M){let G=1.70158;return(f/=M/2)<1?k/2*(f*f*(((G*=1.525)+1)*f-G))+g:k/2*((f-=2)*f*(((G*=1.525)+1)*f+G)+2)+g},ElasticEaseIn(f,g,k,M,G,v){let u=0;return f===0?g:(f/=M)===1?g+k:(v||(v=M*.3),!G||G<Math.abs(k)?(G=k,u=v/4):u=v/(2*Math.PI)*Math.asin(k/G),-(G*Math.pow(2,10*(f-=1))*Math.sin((f*M-u)*(2*Math.PI)/v))+g)},ElasticEaseOut(f,g,k,M,G,v){let u=0;return f===0?g:(f/=M)===1?g+k:(v||(v=M*.3),!G||G<Math.abs(k)?(G=k,u=v/4):u=v/(2*Math.PI)*Math.asin(k/G),G*Math.pow(2,-10*f)*Math.sin((f*M-u)*(2*Math.PI)/v)+k+g)},ElasticEaseInOut(f,g,k,M,G,v){let u=0;return f===0?g:(f/=M/2)===2?g+k:(v||(v=M*(.3*1.5)),!G||G<Math.abs(k)?(G=k,u=v/4):u=v/(2*Math.PI)*Math.asin(k/G),f<1?-.5*(G*Math.pow(2,10*(f-=1))*Math.sin((f*M-u)*(2*Math.PI)/v))+g:G*Math.pow(2,-10*(f-=1))*Math.sin((f*M-u)*(2*Math.PI)/v)*.5+k+g)},BounceEaseOut(f,g,k,M){return(f/=M)<1/2.75?k*(7.5625*f*f)+g:f<2/2.75?k*(7.5625*(f-=1.5/2.75)*f+.75)+g:f<2.5/2.75?k*(7.5625*(f-=2.25/2.75)*f+.9375)+g:k*(7.5625*(f-=2.625/2.75)*f+.984375)+g},BounceEaseIn(f,g,k,M){return k-a.Easings.BounceEaseOut(M-f,0,k,M)+g},BounceEaseInOut(f,g,k,M){return f<M/2?a.Easings.BounceEaseIn(f*2,0,k,M)*.5+g:a.Easings.BounceEaseOut(f*2-M,0,k,M)*.5+k*.5+g},EaseIn(f,g,k,M){return k*(f/=M)*f+g},EaseOut(f,g,k,M){return-k*(f/=M)*(f-2)+g},EaseInOut(f,g,k,M){return(f/=M/2)<1?k/2*f*f+g:-k/2*(--f*(f-2)-1)+g},StrongEaseIn(f,g,k,M){return k*(f/=M)*f*f*f*f+g},StrongEaseOut(f,g,k,M){return k*((f=f/M-1)*f*f*f*f+1)+g},StrongEaseInOut(f,g,k,M){return(f/=M/2)<1?k/2*f*f*f*f*f+g:k/2*((f-=2)*f*f*f*f+2)+g},Linear(f,g,k,M){return k*f/M+g}}})(dl)),dl}var oc;function bl(){return oc||(oc=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const c=tt(),E=At(),T=Gt(),O=_o(),m=Hd(),h=xh(),d=Wd(),y=Al(),S=Tl(),x=en(),R=Ol(),w=Yd(),f=wh(),g=vo();a.Konva=E.Util._assign(c.Konva,{Util:E.Util,Transform:E.Transform,Node:T.Node,Container:O.Container,Stage:m.Stage,stages:m.stages,Layer:h.Layer,FastLayer:d.FastLayer,Group:y.Group,DD:S.DD,Shape:x.Shape,shapes:x.shapes,Animation:R.Animation,Tween:w.Tween,Easings:w.Easings,Context:f.Context,Canvas:g.Canvas}),a.default=a.Konva})(sl)),sl}var Us={},lc;function Xd(){if(lc)return Us;lc=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.Arc=void 0;const a=st(),c=en(),E=tt(),T=at(),O=tt();let m=class extends c.Shape{_sceneFunc(d){const y=E.Konva.getAngle(this.angle()),S=this.clockwise();d.beginPath(),d.arc(0,0,this.outerRadius(),0,y,S),d.arc(0,0,this.innerRadius(),y,0,!S),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}getSelfRect(){const d=this.innerRadius(),y=this.outerRadius(),S=this.clockwise(),x=E.Konva.getAngle(S?360-this.angle():this.angle()),R=Math.cos(Math.min(x,Math.PI)),w=1,f=Math.sin(Math.min(Math.max(Math.PI,x),3*Math.PI/2)),g=Math.sin(Math.min(x,Math.PI/2)),k=R*(R>0?d:y),M=w*y,G=f*(f>0?d:y),v=g*(g>0?y:d);return{x:k,y:S?-1*v:G,width:M-k,height:v-G}}};return Us.Arc=m,m.prototype._centroid=!0,m.prototype.className="Arc",m.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,O._registerNode)(m),a.Factory.addGetterSetter(m,"innerRadius",0,(0,T.getNumberValidator)()),a.Factory.addGetterSetter(m,"outerRadius",0,(0,T.getNumberValidator)()),a.Factory.addGetterSetter(m,"angle",0,(0,T.getNumberValidator)()),a.Factory.addGetterSetter(m,"clockwise",!1,(0,T.getBooleanValidator)()),Us}var zs={},qs={},uc;function bh(){if(uc)return qs;uc=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.Line=void 0;const a=st(),c=tt(),E=en(),T=at();function O(d,y,S,x,R,w,f){const g=Math.sqrt(Math.pow(S-d,2)+Math.pow(x-y,2)),k=Math.sqrt(Math.pow(R-S,2)+Math.pow(w-x,2)),M=f*g/(g+k),G=f*k/(g+k),v=S-M*(R-d),u=x-M*(w-y),P=S+G*(R-d),N=x+G*(w-y);return[v,u,P,N]}function m(d,y){const S=d.length,x=[];for(let R=2;R<S-2;R+=2){const w=O(d[R-2],d[R-1],d[R],d[R+1],d[R+2],d[R+3],y);isNaN(w[0])||(x.push(w[0]),x.push(w[1]),x.push(d[R]),x.push(d[R+1]),x.push(w[2]),x.push(w[3]))}return x}let h=class extends E.Shape{constructor(y){super(y),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(y){const S=this.points(),x=S.length,R=this.tension(),w=this.closed(),f=this.bezier();if(!x)return;let g=0;if(y.beginPath(),y.moveTo(S[0],S[1]),R!==0&&x>4){const k=this.getTensionPoints(),M=k.length;for(g=w?0:4,w||y.quadraticCurveTo(k[0],k[1],k[2],k[3]);g<M-2;)y.bezierCurveTo(k[g++],k[g++],k[g++],k[g++],k[g++],k[g++]);w||y.quadraticCurveTo(k[M-2],k[M-1],S[x-2],S[x-1])}else if(f)for(g=2;g<x;)y.bezierCurveTo(S[g++],S[g++],S[g++],S[g++],S[g++],S[g++]);else for(g=2;g<x;g+=2)y.lineTo(S[g],S[g+1]);w?(y.closePath(),y.fillStrokeShape(this)):y.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():m(this.points(),this.tension())}_getTensionPointsClosed(){const y=this.points(),S=y.length,x=this.tension(),R=O(y[S-2],y[S-1],y[0],y[1],y[2],y[3],x),w=O(y[S-4],y[S-3],y[S-2],y[S-1],y[0],y[1],x),f=m(y,x);return[R[2],R[3]].concat(f).concat([w[0],w[1],y[S-2],y[S-1],w[2],w[3],R[0],R[1],y[0],y[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let y=this.points();if(y.length<4)return{x:y[0]||0,y:y[1]||0,width:0,height:0};this.tension()!==0?y=[y[0],y[1],...this._getTensionPoints(),y[y.length-2],y[y.length-1]]:y=this.points();let S=y[0],x=y[0],R=y[1],w=y[1],f,g;for(let k=0;k<y.length/2;k++)f=y[k*2],g=y[k*2+1],S=Math.min(S,f),x=Math.max(x,f),R=Math.min(R,g),w=Math.max(w,g);return{x:S,y:R,width:x-S,height:w-R}}};return qs.Line=h,h.prototype.className="Line",h.prototype._attrsAffectingSize=["points","bezier","tension"],(0,c._registerNode)(h),a.Factory.addGetterSetter(h,"closed",!1),a.Factory.addGetterSetter(h,"bezier",!1),a.Factory.addGetterSetter(h,"tension",0,(0,T.getNumberValidator)()),a.Factory.addGetterSetter(h,"points",[],(0,T.getNumberArrayValidator)()),qs}var Vs={},fl={},cc;function Qd(){return cc||(cc=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const c=(h,d,y)=>{let S,x;const w=y/2;S=0;for(let f=0;f<20;f++)x=w*a.tValues[20][f]+w,S+=a.cValues[20][f]*T(h,d,x);return w*S};a.getCubicArcLength=c;const E=(h,d,y)=>{y===void 0&&(y=1);const S=h[0]-2*h[1]+h[2],x=d[0]-2*d[1]+d[2],R=2*h[1]-2*h[0],w=2*d[1]-2*d[0],f=4*(S*S+x*x),g=4*(S*R+x*w),k=R*R+w*w;if(f===0)return y*Math.sqrt(Math.pow(h[2]-h[0],2)+Math.pow(d[2]-d[0],2));const M=g/(2*f),G=k/f,v=y+M,u=G-M*M,P=v*v+u>0?Math.sqrt(v*v+u):0,N=M*M+u>0?Math.sqrt(M*M+u):0,I=M+Math.sqrt(M*M+u)!==0?u*Math.log(Math.abs((v+P)/(M+N))):0;return Math.sqrt(f)/2*(v*P-M*N+I)};a.getQuadraticArcLength=E;function T(h,d,y){const S=O(1,y,h),x=O(1,y,d),R=S*S+x*x;return Math.sqrt(R)}const O=(h,d,y)=>{const S=y.length-1;let x,R;if(S===0)return 0;if(h===0){R=0;for(let w=0;w<=S;w++)R+=a.binomialCoefficients[S][w]*Math.pow(1-d,S-w)*Math.pow(d,w)*y[w];return R}else{x=new Array(S);for(let w=0;w<S;w++)x[w]=S*(y[w+1]-y[w]);return O(h-1,d,x)}},m=(h,d,y)=>{let S=1,x=h/d,R=(h-y(x))/d,w=0;for(;S>.001;){const f=y(x+R),g=Math.abs(h-f)/d;if(g<S)S=g,x+=R;else{const k=y(x-R),M=Math.abs(h-k)/d;M<S?(S=M,x-=R):R/=2}if(w++,w>500)break}return x};a.t2length=m})(fl)),fl}var hc;function Nl(){if(hc)return Vs;hc=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.Path=void 0;const a=st(),c=tt(),E=en(),T=Qd();let O=class In extends E.Shape{constructor(h){super(h),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=In.parsePathData(this.data()),this.pathLength=In.getPathLength(this.dataArray)}_sceneFunc(h){const d=this.dataArray;h.beginPath();let y=!1;for(let S=0;S<d.length;S++){const x=d[S].command,R=d[S].points;switch(x){case"L":h.lineTo(R[0],R[1]);break;case"M":h.moveTo(R[0],R[1]);break;case"C":h.bezierCurveTo(R[0],R[1],R[2],R[3],R[4],R[5]);break;case"Q":h.quadraticCurveTo(R[0],R[1],R[2],R[3]);break;case"A":const w=R[0],f=R[1],g=R[2],k=R[3],M=R[4],G=R[5],v=R[6],u=R[7],P=g>k?g:k,N=g>k?1:g/k,I=g>k?k/g:1;h.translate(w,f),h.rotate(v),h.scale(N,I),h.arc(0,0,P,M,M+G,1-u),h.scale(1/N,1/I),h.rotate(-v),h.translate(-w,-f);break;case"z":y=!0,h.closePath();break}}!y&&!this.hasFill()?h.strokeShape(this):h.fillStrokeShape(this)}getSelfRect(){let h=[];this.dataArray.forEach(function(f){if(f.command==="A"){const g=f.points[4],k=f.points[5],M=f.points[4]+k;let G=Math.PI/180;if(Math.abs(g-M)<G&&(G=Math.abs(g-M)),k<0)for(let v=g-G;v>M;v-=G){const u=In.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],v,0);h.push(u.x,u.y)}else for(let v=g+G;v<M;v+=G){const u=In.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],v,0);h.push(u.x,u.y)}}else if(f.command==="C")for(let g=0;g<=1;g+=.01){const k=In.getPointOnCubicBezier(g,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);h.push(k.x,k.y)}else h=h.concat(f.points)});let d=h[0],y=h[0],S=h[1],x=h[1],R,w;for(let f=0;f<h.length/2;f++)R=h[f*2],w=h[f*2+1],isNaN(R)||(d=Math.min(d,R),y=Math.max(y,R)),isNaN(w)||(S=Math.min(S,w),x=Math.max(x,w));return{x:d,y:S,width:y-d,height:x-S}}getLength(){return this.pathLength}getPointAtLength(h){return In.getPointAtLengthOfDataArray(h,this.dataArray)}static getLineLength(h,d,y,S){return Math.sqrt((y-h)*(y-h)+(S-d)*(S-d))}static getPathLength(h){let d=0;for(let y=0;y<h.length;++y)d+=h[y].pathLength;return d}static getPointAtLengthOfDataArray(h,d){let y,S=0,x=d.length;if(!x)return null;for(;S<x&&h>d[S].pathLength;)h-=d[S].pathLength,++S;if(S===x)return y=d[S-1].points.slice(-2),{x:y[0],y:y[1]};if(h<.01)return d[S].command==="M"?(y=d[S].points.slice(0,2),{x:y[0],y:y[1]}):{x:d[S].start.x,y:d[S].start.y};const R=d[S],w=R.points;switch(R.command){case"L":return In.getPointOnLine(h,R.start.x,R.start.y,w[0],w[1]);case"C":return In.getPointOnCubicBezier((0,T.t2length)(h,In.getPathLength(d),P=>(0,T.getCubicArcLength)([R.start.x,w[0],w[2],w[4]],[R.start.y,w[1],w[3],w[5]],P)),R.start.x,R.start.y,w[0],w[1],w[2],w[3],w[4],w[5]);case"Q":return In.getPointOnQuadraticBezier((0,T.t2length)(h,In.getPathLength(d),P=>(0,T.getQuadraticArcLength)([R.start.x,w[0],w[2]],[R.start.y,w[1],w[3]],P)),R.start.x,R.start.y,w[0],w[1],w[2],w[3]);case"A":const f=w[0],g=w[1],k=w[2],M=w[3],G=w[5],v=w[6];let u=w[4];return u+=G*h/R.pathLength,In.getPointOnEllipticalArc(f,g,k,M,u,v)}return null}static getPointOnLine(h,d,y,S,x,R,w){R=R??d,w=w??y;const f=this.getLineLength(d,y,S,x);if(f<1e-10)return{x:d,y};if(S===d)return{x:R,y:w+(x>y?h:-h)};const g=(x-y)/(S-d),k=Math.sqrt(h*h/(1+g*g))*(S<d?-1:1),M=g*k;if(Math.abs(w-y-g*(R-d))<1e-10)return{x:R+k,y:w+M};const G=((R-d)*(S-d)+(w-y)*(x-y))/(f*f),v=d+G*(S-d),u=y+G*(x-y),P=this.getLineLength(R,w,v,u),N=Math.sqrt(h*h-P*P),I=Math.sqrt(N*N/(1+g*g))*(S<d?-1:1),W=g*I;return{x:v+I,y:u+W}}static getPointOnCubicBezier(h,d,y,S,x,R,w,f,g){function k(N){return N*N*N}function M(N){return 3*N*N*(1-N)}function G(N){return 3*N*(1-N)*(1-N)}function v(N){return(1-N)*(1-N)*(1-N)}const u=f*k(h)+R*M(h)+S*G(h)+d*v(h),P=g*k(h)+w*M(h)+x*G(h)+y*v(h);return{x:u,y:P}}static getPointOnQuadraticBezier(h,d,y,S,x,R,w){function f(v){return v*v}function g(v){return 2*v*(1-v)}function k(v){return(1-v)*(1-v)}const M=R*f(h)+S*g(h)+d*k(h),G=w*f(h)+x*g(h)+y*k(h);return{x:M,y:G}}static getPointOnEllipticalArc(h,d,y,S,x,R){const w=Math.cos(R),f=Math.sin(R),g={x:y*Math.cos(x),y:S*Math.sin(x)};return{x:h+(g.x*w-g.y*f),y:d+(g.x*f+g.y*w)}}static parsePathData(h){if(!h)return[];let d=h;const y=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];d=d.replace(new RegExp(" ","g"),",");for(let M=0;M<y.length;M++)d=d.replace(new RegExp(y[M],"g"),"|"+y[M]);const S=d.split("|"),x=[],R=[];let w=0,f=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let k;for(let M=1;M<S.length;M++){let G=S[M],v=G.charAt(0);for(G=G.slice(1),R.length=0;k=g.exec(G);)R.push(k[0]);const u=[];for(let P=0,N=R.length;P<N;P++){if(R[P]==="00"){u.push(0,0);continue}const I=parseFloat(R[P]);isNaN(I)?u.push(0):u.push(I)}for(;u.length>0&&!isNaN(u[0]);){let P="",N=[];const I=w,W=f;let F,D,B,H,Z,se,he,ne,Ce,C;switch(v){case"l":w+=u.shift(),f+=u.shift(),P="L",N.push(w,f);break;case"L":w=u.shift(),f=u.shift(),N.push(w,f);break;case"m":const L=u.shift(),q=u.shift();if(w+=L,f+=q,P="M",x.length>2&&x[x.length-1].command==="z"){for(let z=x.length-2;z>=0;z--)if(x[z].command==="M"){w=x[z].points[0]+L,f=x[z].points[1]+q;break}}N.push(w,f),v="l";break;case"M":w=u.shift(),f=u.shift(),P="M",N.push(w,f),v="L";break;case"h":w+=u.shift(),P="L",N.push(w,f);break;case"H":w=u.shift(),P="L",N.push(w,f);break;case"v":f+=u.shift(),P="L",N.push(w,f);break;case"V":f=u.shift(),P="L",N.push(w,f);break;case"C":N.push(u.shift(),u.shift(),u.shift(),u.shift()),w=u.shift(),f=u.shift(),N.push(w,f);break;case"c":N.push(w+u.shift(),f+u.shift(),w+u.shift(),f+u.shift()),w+=u.shift(),f+=u.shift(),P="C",N.push(w,f);break;case"S":D=w,B=f,F=x[x.length-1],F.command==="C"&&(D=w+(w-F.points[2]),B=f+(f-F.points[3])),N.push(D,B,u.shift(),u.shift()),w=u.shift(),f=u.shift(),P="C",N.push(w,f);break;case"s":D=w,B=f,F=x[x.length-1],F.command==="C"&&(D=w+(w-F.points[2]),B=f+(f-F.points[3])),N.push(D,B,w+u.shift(),f+u.shift()),w+=u.shift(),f+=u.shift(),P="C",N.push(w,f);break;case"Q":N.push(u.shift(),u.shift()),w=u.shift(),f=u.shift(),N.push(w,f);break;case"q":N.push(w+u.shift(),f+u.shift()),w+=u.shift(),f+=u.shift(),P="Q",N.push(w,f);break;case"T":D=w,B=f,F=x[x.length-1],F.command==="Q"&&(D=w+(w-F.points[0]),B=f+(f-F.points[1])),w=u.shift(),f=u.shift(),P="Q",N.push(D,B,w,f);break;case"t":D=w,B=f,F=x[x.length-1],F.command==="Q"&&(D=w+(w-F.points[0]),B=f+(f-F.points[1])),w+=u.shift(),f+=u.shift(),P="Q",N.push(D,B,w,f);break;case"A":H=u.shift(),Z=u.shift(),se=u.shift(),he=u.shift(),ne=u.shift(),Ce=w,C=f,w=u.shift(),f=u.shift(),P="A",N=this.convertEndpointToCenterParameterization(Ce,C,w,f,he,ne,H,Z,se);break;case"a":H=u.shift(),Z=u.shift(),se=u.shift(),he=u.shift(),ne=u.shift(),Ce=w,C=f,w+=u.shift(),f+=u.shift(),P="A",N=this.convertEndpointToCenterParameterization(Ce,C,w,f,he,ne,H,Z,se);break}x.push({command:P||v,points:N,start:{x:I,y:W},pathLength:this.calcLength(I,W,P||v,N)})}(v==="z"||v==="Z")&&x.push({command:"z",points:[],start:void 0,pathLength:0})}return x}static calcLength(h,d,y,S){let x,R,w,f;const g=In;switch(y){case"L":return g.getLineLength(h,d,S[0],S[1]);case"C":return(0,T.getCubicArcLength)([h,S[0],S[2],S[4]],[d,S[1],S[3],S[5]],1);case"Q":return(0,T.getQuadraticArcLength)([h,S[0],S[2]],[d,S[1],S[3]],1);case"A":x=0;const k=S[4],M=S[5],G=S[4]+M;let v=Math.PI/180;if(Math.abs(k-G)<v&&(v=Math.abs(k-G)),R=g.getPointOnEllipticalArc(S[0],S[1],S[2],S[3],k,0),M<0)for(f=k-v;f>G;f-=v)w=g.getPointOnEllipticalArc(S[0],S[1],S[2],S[3],f,0),x+=g.getLineLength(R.x,R.y,w.x,w.y),R=w;else for(f=k+v;f<G;f+=v)w=g.getPointOnEllipticalArc(S[0],S[1],S[2],S[3],f,0),x+=g.getLineLength(R.x,R.y,w.x,w.y),R=w;return w=g.getPointOnEllipticalArc(S[0],S[1],S[2],S[3],G,0),x+=g.getLineLength(R.x,R.y,w.x,w.y),x}return 0}static convertEndpointToCenterParameterization(h,d,y,S,x,R,w,f,g){const k=g*(Math.PI/180),M=Math.cos(k)*(h-y)/2+Math.sin(k)*(d-S)/2,G=-1*Math.sin(k)*(h-y)/2+Math.cos(k)*(d-S)/2,v=M*M/(w*w)+G*G/(f*f);v>1&&(w*=Math.sqrt(v),f*=Math.sqrt(v));let u=Math.sqrt((w*w*(f*f)-w*w*(G*G)-f*f*(M*M))/(w*w*(G*G)+f*f*(M*M)));x===R&&(u*=-1),isNaN(u)&&(u=0);const P=u*w*G/f,N=u*-f*M/w,I=(h+y)/2+Math.cos(k)*P-Math.sin(k)*N,W=(d+S)/2+Math.sin(k)*P+Math.cos(k)*N,F=function(ne){return Math.sqrt(ne[0]*ne[0]+ne[1]*ne[1])},D=function(ne,Ce){return(ne[0]*Ce[0]+ne[1]*Ce[1])/(F(ne)*F(Ce))},B=function(ne,Ce){return(ne[0]*Ce[1]<ne[1]*Ce[0]?-1:1)*Math.acos(D(ne,Ce))},H=B([1,0],[(M-P)/w,(G-N)/f]),Z=[(M-P)/w,(G-N)/f],se=[(-1*M-P)/w,(-1*G-N)/f];let he=B(Z,se);return D(Z,se)<=-1&&(he=Math.PI),D(Z,se)>=1&&(he=0),R===0&&he>0&&(he=he-2*Math.PI),R===1&&he<0&&(he=he+2*Math.PI),[I,W,w,f,H,he,k,R]}};return Vs.Path=O,O.prototype.className="Path",O.prototype._attrsAffectingSize=["data"],(0,c._registerNode)(O),a.Factory.addGetterSetter(O,"data"),Vs}var dc;function Jd(){if(dc)return zs;dc=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.Arrow=void 0;const a=st(),c=bh(),E=at(),T=tt(),O=Nl();let m=class extends c.Line{_sceneFunc(d){super._sceneFunc(d);const y=Math.PI*2,S=this.points();let x=S;const R=this.tension()!==0&&S.length>4;R&&(x=this.getTensionPoints());const w=this.pointerLength(),f=S.length;let g,k;if(R){const v=[x[x.length-4],x[x.length-3],x[x.length-2],x[x.length-1],S[f-2],S[f-1]],u=O.Path.calcLength(x[x.length-4],x[x.length-3],"C",v),P=O.Path.getPointOnQuadraticBezier(Math.min(1,1-w/u),v[0],v[1],v[2],v[3],v[4],v[5]);g=S[f-2]-P.x,k=S[f-1]-P.y}else g=S[f-2]-S[f-4],k=S[f-1]-S[f-3];const M=(Math.atan2(k,g)+y)%y,G=this.pointerWidth();this.pointerAtEnding()&&(d.save(),d.beginPath(),d.translate(S[f-2],S[f-1]),d.rotate(M),d.moveTo(0,0),d.lineTo(-w,G/2),d.lineTo(-w,-G/2),d.closePath(),d.restore(),this.__fillStroke(d)),this.pointerAtBeginning()&&(d.save(),d.beginPath(),d.translate(S[0],S[1]),R?(g=(x[0]+x[2])/2-S[0],k=(x[1]+x[3])/2-S[1]):(g=S[2]-S[0],k=S[3]-S[1]),d.rotate((Math.atan2(-k,-g)+y)%y),d.moveTo(0,0),d.lineTo(-w,G/2),d.lineTo(-w,-G/2),d.closePath(),d.restore(),this.__fillStroke(d))}__fillStroke(d){const y=this.dashEnabled();y&&(this.attrs.dashEnabled=!1,d.setLineDash([])),d.fillStrokeShape(this),y&&(this.attrs.dashEnabled=!0)}getSelfRect(){const d=super.getSelfRect(),y=this.pointerWidth()/2;return{x:d.x,y:d.y-y,width:d.width,height:d.height+y*2}}};return zs.Arrow=m,m.prototype.className="Arrow",(0,T._registerNode)(m),a.Factory.addGetterSetter(m,"pointerLength",10,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(m,"pointerWidth",10,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(m,"pointerAtBeginning",!1),a.Factory.addGetterSetter(m,"pointerAtEnding",!0),zs}var Ks={},fc;function Zd(){if(fc)return Ks;fc=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.Circle=void 0;const a=st(),c=en(),E=at(),T=tt();class O extends c.Shape{_sceneFunc(h){h.beginPath(),h.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(h){this.radius()!==h/2&&this.radius(h/2)}setHeight(h){this.radius()!==h/2&&this.radius(h/2)}}return Ks.Circle=O,O.prototype._centroid=!0,O.prototype.className="Circle",O.prototype._attrsAffectingSize=["radius"],(0,T._registerNode)(O),a.Factory.addGetterSetter(O,"radius",0,(0,E.getNumberValidator)()),Ks}var Hs={},gc;function $d(){if(gc)return Hs;gc=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.Ellipse=void 0;const a=st(),c=en(),E=at(),T=tt();let O=class extends c.Shape{_sceneFunc(h){const d=this.radiusX(),y=this.radiusY();h.beginPath(),h.save(),d!==y&&h.scale(1,y/d),h.arc(0,0,d,0,Math.PI*2,!1),h.restore(),h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(h){this.radiusX(h/2)}setHeight(h){this.radiusY(h/2)}};return Hs.Ellipse=O,O.prototype.className="Ellipse",O.prototype._centroid=!0,O.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,T._registerNode)(O),a.Factory.addComponentsGetterSetter(O,"radius",["x","y"]),a.Factory.addGetterSetter(O,"radiusX",0,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(O,"radiusY",0,(0,E.getNumberValidator)()),Hs}var Ws={},pc;function ef(){if(pc)return Ws;pc=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.Image=void 0;const a=At(),c=st(),E=en(),T=tt(),O=at();class m extends E.Shape{constructor(d){super(d),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",y=>{this._removeImageLoad(y.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const d=this.image();d&&d.complete||d&&d.readyState===4||d&&d.addEventListener&&d.addEventListener("load",this._loadListener)}_removeImageLoad(d){d&&d.removeEventListener&&d.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const d=!!this.cornerRadius(),y=this.hasShadow();return d&&y?!0:super._useBufferCanvas(!0)}_sceneFunc(d){const y=this.getWidth(),S=this.getHeight(),x=this.cornerRadius(),R=this.attrs.image;let w;if(R){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?w=[R,this.cropX(),this.cropY(),f,g,0,0,y,S]:w=[R,0,0,y,S]}(this.hasFill()||this.hasStroke()||x)&&(d.beginPath(),x?a.Util.drawRoundedRectPath(d,y,S,x):d.rect(0,0,y,S),d.closePath(),d.fillStrokeShape(this)),R&&(x&&d.clip(),d.drawImage.apply(d,w))}_hitFunc(d){const y=this.width(),S=this.height(),x=this.cornerRadius();d.beginPath(),x?a.Util.drawRoundedRectPath(d,y,S,x):d.rect(0,0,y,S),d.closePath(),d.fillStrokeShape(this)}getWidth(){var d,y;return(d=this.attrs.width)!==null&&d!==void 0?d:(y=this.image())===null||y===void 0?void 0:y.width}getHeight(){var d,y;return(d=this.attrs.height)!==null&&d!==void 0?d:(y=this.image())===null||y===void 0?void 0:y.height}static fromURL(d,y,S=null){const x=a.Util.createImageElement();x.onload=function(){const R=new m({image:x});y(R)},x.onerror=S,x.crossOrigin="Anonymous",x.src=d}}return Ws.Image=m,m.prototype.className="Image",(0,T._registerNode)(m),c.Factory.addGetterSetter(m,"cornerRadius",0,(0,O.getNumberOrArrayOfNumbersValidator)(4)),c.Factory.addGetterSetter(m,"image"),c.Factory.addComponentsGetterSetter(m,"crop",["x","y","width","height"]),c.Factory.addGetterSetter(m,"cropX",0,(0,O.getNumberValidator)()),c.Factory.addGetterSetter(m,"cropY",0,(0,O.getNumberValidator)()),c.Factory.addGetterSetter(m,"cropWidth",0,(0,O.getNumberValidator)()),c.Factory.addGetterSetter(m,"cropHeight",0,(0,O.getNumberValidator)()),Ws}var Ei={},mc;function tf(){if(mc)return Ei;mc=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.Tag=Ei.Label=void 0;const a=st(),c=en(),E=Al(),T=at(),O=tt(),m=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],h="Change.konva",d="none",y="up",S="right",x="down",R="left",w=m.length;let f=class extends E.Group{constructor(M){super(M),this.on("add.konva",function(G){this._addListeners(G.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(M){let G=this,v;const u=function(){G._sync()};for(v=0;v<w;v++)M.on(m[v]+h,u)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let M=this.getText(),G=this.getTag(),v,u,P,N,I,W,F;if(M&&G){switch(v=M.width(),u=M.height(),P=G.pointerDirection(),N=G.pointerWidth(),F=G.pointerHeight(),I=0,W=0,P){case y:I=v/2,W=-1*F;break;case S:I=v+N,W=u/2;break;case x:I=v/2,W=u+F;break;case R:I=-1*N,W=u/2;break}G.setAttrs({x:-1*I,y:-1*W,width:v,height:u}),M.setAttrs({x:-1*I,y:-1*W})}}};Ei.Label=f,f.prototype.className="Label",(0,O._registerNode)(f);class g extends c.Shape{_sceneFunc(M){const G=this.width(),v=this.height(),u=this.pointerDirection(),P=this.pointerWidth(),N=this.pointerHeight(),I=this.cornerRadius();let W=0,F=0,D=0,B=0;typeof I=="number"?W=F=D=B=Math.min(I,G/2,v/2):(W=Math.min(I[0]||0,G/2,v/2),F=Math.min(I[1]||0,G/2,v/2),B=Math.min(I[2]||0,G/2,v/2),D=Math.min(I[3]||0,G/2,v/2)),M.beginPath(),M.moveTo(W,0),u===y&&(M.lineTo((G-P)/2,0),M.lineTo(G/2,-1*N),M.lineTo((G+P)/2,0)),M.lineTo(G-F,0),M.arc(G-F,F,F,Math.PI*3/2,0,!1),u===S&&(M.lineTo(G,(v-N)/2),M.lineTo(G+P,v/2),M.lineTo(G,(v+N)/2)),M.lineTo(G,v-B),M.arc(G-B,v-B,B,0,Math.PI/2,!1),u===x&&(M.lineTo((G+P)/2,v),M.lineTo(G/2,v+N),M.lineTo((G-P)/2,v)),M.lineTo(D,v),M.arc(D,v-D,D,Math.PI/2,Math.PI,!1),u===R&&(M.lineTo(0,(v+N)/2),M.lineTo(-1*P,v/2),M.lineTo(0,(v-N)/2)),M.lineTo(0,W),M.arc(W,W,W,Math.PI,Math.PI*3/2,!1),M.closePath(),M.fillStrokeShape(this)}getSelfRect(){let M=0,G=0,v=this.pointerWidth(),u=this.pointerHeight(),P=this.pointerDirection(),N=this.width(),I=this.height();return P===y?(G-=u,I+=u):P===x?I+=u:P===R?(M-=v*1.5,N+=v):P===S&&(N+=v*1.5),{x:M,y:G,width:N,height:I}}}return Ei.Tag=g,g.prototype.className="Tag",(0,O._registerNode)(g),a.Factory.addGetterSetter(g,"pointerDirection",d),a.Factory.addGetterSetter(g,"pointerWidth",0,(0,T.getNumberValidator)()),a.Factory.addGetterSetter(g,"pointerHeight",0,(0,T.getNumberValidator)()),a.Factory.addGetterSetter(g,"cornerRadius",0,(0,T.getNumberOrArrayOfNumbersValidator)(4)),Ei}var Ys={},yc;function Ch(){if(yc)return Ys;yc=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.Rect=void 0;const a=st(),c=en(),E=tt(),T=At(),O=at();let m=class extends c.Shape{_sceneFunc(d){const y=this.cornerRadius(),S=this.width(),x=this.height();d.beginPath(),y?T.Util.drawRoundedRectPath(d,S,x,y):d.rect(0,0,S,x),d.closePath(),d.fillStrokeShape(this)}};return Ys.Rect=m,m.prototype.className="Rect",(0,E._registerNode)(m),a.Factory.addGetterSetter(m,"cornerRadius",0,(0,O.getNumberOrArrayOfNumbersValidator)(4)),Ys}var Xs={},vc;function nf(){if(vc)return Xs;vc=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.RegularPolygon=void 0;const a=st(),c=en(),E=at(),T=tt();let O=class extends c.Shape{_sceneFunc(h){const d=this._getPoints();h.beginPath(),h.moveTo(d[0].x,d[0].y);for(let y=1;y<d.length;y++)h.lineTo(d[y].x,d[y].y);h.closePath(),h.fillStrokeShape(this)}_getPoints(){const h=this.attrs.sides,d=this.attrs.radius||0,y=[];for(let S=0;S<h;S++)y.push({x:d*Math.sin(S*2*Math.PI/h),y:-1*d*Math.cos(S*2*Math.PI/h)});return y}getSelfRect(){const h=this._getPoints();let d=h[0].x,y=h[0].y,S=h[0].x,x=h[0].y;return h.forEach(R=>{d=Math.min(d,R.x),y=Math.max(y,R.x),S=Math.min(S,R.y),x=Math.max(x,R.y)}),{x:d,y:S,width:y-d,height:x-S}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(h){this.radius(h/2)}setHeight(h){this.radius(h/2)}};return Xs.RegularPolygon=O,O.prototype.className="RegularPolygon",O.prototype._centroid=!0,O.prototype._attrsAffectingSize=["radius"],(0,T._registerNode)(O),a.Factory.addGetterSetter(O,"radius",0,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(O,"sides",0,(0,E.getNumberValidator)()),Xs}var Qs={},_c;function rf(){if(_c)return Qs;_c=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.Ring=void 0;const a=st(),c=en(),E=at(),T=tt(),O=Math.PI*2;let m=class extends c.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.innerRadius(),0,O,!1),d.moveTo(this.outerRadius(),0),d.arc(0,0,this.outerRadius(),O,0,!0),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}};return Qs.Ring=m,m.prototype.className="Ring",m.prototype._centroid=!0,m.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,T._registerNode)(m),a.Factory.addGetterSetter(m,"innerRadius",0,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(m,"outerRadius",0,(0,E.getNumberValidator)()),Qs}var Js={},wc;function sf(){if(wc)return Js;wc=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.Sprite=void 0;const a=st(),c=en(),E=Ol(),T=at(),O=tt();let m=class extends c.Shape{constructor(d){super(d),this._updated=!0,this.anim=new E.Animation(()=>{const y=this._updated;return this._updated=!1,y}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(d){const y=this.animation(),S=this.frameIndex(),x=S*4,R=this.animations()[y],w=this.frameOffsets(),f=R[x+0],g=R[x+1],k=R[x+2],M=R[x+3],G=this.image();if((this.hasFill()||this.hasStroke())&&(d.beginPath(),d.rect(0,0,k,M),d.closePath(),d.fillStrokeShape(this)),G)if(w){const v=w[y],u=S*2;d.drawImage(G,f,g,k,M,v[u+0],v[u+1],k,M)}else d.drawImage(G,f,g,k,M,0,0,k,M)}_hitFunc(d){const y=this.animation(),S=this.frameIndex(),x=S*4,R=this.animations()[y],w=this.frameOffsets(),f=R[x+2],g=R[x+3];if(d.beginPath(),w){const k=w[y],M=S*2;d.rect(k[M+0],k[M+1],f,g)}else d.rect(0,0,f,g);d.closePath(),d.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const d=this;this.interval=setInterval(function(){d._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const d=this.getLayer();this.anim.setLayers(d),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const d=this.frameIndex(),y=this.animation(),S=this.animations(),x=S[y],R=x.length/4;d<R-1?this.frameIndex(d+1):this.frameIndex(0)}};return Js.Sprite=m,m.prototype.className="Sprite",(0,O._registerNode)(m),a.Factory.addGetterSetter(m,"animation"),a.Factory.addGetterSetter(m,"animations"),a.Factory.addGetterSetter(m,"frameOffsets"),a.Factory.addGetterSetter(m,"image"),a.Factory.addGetterSetter(m,"frameIndex",0,(0,T.getNumberValidator)()),a.Factory.addGetterSetter(m,"frameRate",17,(0,T.getNumberValidator)()),a.Factory.backCompat(m,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Js}var Zs={},Sc;function af(){if(Sc)return Zs;Sc=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.Star=void 0;const a=st(),c=en(),E=at(),T=tt();let O=class extends c.Shape{_sceneFunc(h){const d=this.innerRadius(),y=this.outerRadius(),S=this.numPoints();h.beginPath(),h.moveTo(0,0-y);for(let x=1;x<S*2;x++){const R=x%2===0?y:d,w=R*Math.sin(x*Math.PI/S),f=-1*R*Math.cos(x*Math.PI/S);h.lineTo(w,f)}h.closePath(),h.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(h){this.outerRadius(h/2)}setHeight(h){this.outerRadius(h/2)}};return Zs.Star=O,O.prototype.className="Star",O.prototype._centroid=!0,O.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,T._registerNode)(O),a.Factory.addGetterSetter(O,"numPoints",5,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(O,"innerRadius",0,(0,E.getNumberValidator)()),a.Factory.addGetterSetter(O,"outerRadius",0,(0,E.getNumberValidator)()),Zs}var es={},xc;function Ph(){if(xc)return es;xc=1,Object.defineProperty(es,"__esModule",{value:!0}),es.Text=void 0,es.stringToArray=h;const a=At(),c=st(),E=en(),T=tt(),O=at(),m=tt();function h(_e){return[..._e].reduce((ie,be,Te,ge)=>{if(new RegExp("\\p{Emoji}","u").test(be)){const V=ge[Te+1];V&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(V)?(ie.push(be+V),ge[Te+1]=""):ie.push(be)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(be+(ge[Te+1]||""))?ie.push(be+ge[Te+1]):Te>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(be)?ie[ie.length-1]+=be:be&&ie.push(be);return ie},[])}const d="auto",y="center",S="inherit",x="justify",R="Change.konva",w="2d",f="-",g="left",k="text",M="Text",G="top",v="bottom",u="middle",P="normal",N="px ",I=" ",W="right",F="rtl",D="word",B="char",H="none",Z="",se=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],he=se.length;function ne(_e){return _e.split(",").map(ie=>{ie=ie.trim();const be=ie.indexOf(" ")>=0,Te=ie.indexOf('"')>=0||ie.indexOf("'")>=0;return be&&!Te&&(ie=`"${ie}"`),ie}).join(", ")}let Ce;function C(){return Ce||(Ce=a.Util.createCanvasElement().getContext(w),Ce)}function L(_e){_e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function q(_e){_e.setAttr("miterLimit",2),_e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function z(_e){return _e=_e||{},!_e.fillLinearGradientColorStops&&!_e.fillRadialGradientColorStops&&!_e.fillPatternImage&&(_e.fill=_e.fill||"black"),_e}let X=class extends E.Shape{constructor(ie){super(z(ie)),this._partialTextX=0,this._partialTextY=0;for(let be=0;be<he;be++)this.on(se[be]+R,this._setTextData);this._setTextData()}_sceneFunc(ie){const be=this.textArr,Te=be.length;if(!this.text())return;let ge=this.padding(),V=this.fontSize(),fe=this.lineHeight()*V,ye=this.verticalAlign(),Me=this.direction(),Ie=0,Fe=this.align(),Ke=this.getWidth(),lt=this.letterSpacing(),He=this.fill(),Ot=this.textDecoration(),ft=Ot.indexOf("underline")!==-1,xt=Ot.indexOf("line-through")!==-1,tr;Me=Me===S?ie.direction:Me;let Rt=fe/2,Xt=u;if(T.Konva._fixTextRendering){const gt=this.measureSize("M");Xt="alphabetic",Rt=(gt.fontBoundingBoxAscent-gt.fontBoundingBoxDescent)/2+fe/2}for(Me===F&&ie.setAttr("direction",Me),ie.setAttr("font",this._getContextFont()),ie.setAttr("textBaseline",Xt),ie.setAttr("textAlign",g),ye===u?Ie=(this.getHeight()-Te*fe-ge*2)/2:ye===v&&(Ie=this.getHeight()-Te*fe-ge*2),ie.translate(ge,Ie+ge),tr=0;tr<Te;tr++){let gt=0,Ut=0;const zt=be[tr],mn=zt.text,Ct=zt.width,Qt=zt.lastInParagraph;if(ie.save(),Fe===W?gt+=Ke-Ct-ge*2:Fe===y&&(gt+=(Ke-Ct-ge*2)/2),ft){ie.save(),ie.beginPath();const tn=T.Konva._fixTextRendering?Math.round(V/4):Math.round(V/2),Jt=gt,Bt=Rt+Ut+tn;ie.moveTo(Jt,Bt);const Nt=Fe===x&&!Qt?Ke-ge*2:Ct;ie.lineTo(Jt+Math.round(Nt),Bt),ie.lineWidth=V/15;const yn=this._getLinearGradient();ie.strokeStyle=yn||He,ie.stroke(),ie.restore()}if(xt){ie.save(),ie.beginPath();const tn=T.Konva._fixTextRendering?-Math.round(V/4):0;ie.moveTo(gt,Rt+Ut+tn);const Jt=Fe===x&&!Qt?Ke-ge*2:Ct;ie.lineTo(gt+Math.round(Jt),Rt+Ut+tn),ie.lineWidth=V/15;const Bt=this._getLinearGradient();ie.strokeStyle=Bt||He,ie.stroke(),ie.restore()}if(Me!==F&&(lt!==0||Fe===x)){const tn=mn.split(" ").length-1,Jt=h(mn);for(let Bt=0;Bt<Jt.length;Bt++){const Nt=Jt[Bt];Nt===" "&&!Qt&&Fe===x&&(gt+=(Ke-ge*2-Ct)/tn),this._partialTextX=gt,this._partialTextY=Rt+Ut,this._partialText=Nt,ie.fillStrokeShape(this),gt+=this.measureSize(Nt).width+lt}}else lt!==0&&ie.setAttr("letterSpacing",`${lt}px`),this._partialTextX=gt,this._partialTextY=Rt+Ut,this._partialText=mn,ie.fillStrokeShape(this);ie.restore(),Te>1&&(Rt+=fe)}}_hitFunc(ie){const be=this.getWidth(),Te=this.getHeight();ie.beginPath(),ie.rect(0,0,be,Te),ie.closePath(),ie.fillStrokeShape(this)}setText(ie){const be=a.Util._isString(ie)?ie:ie==null?"":ie+"";return this._setAttr(k,be),this}getWidth(){return this.attrs.width===d||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===d||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(ie){var be,Te,ge,V,fe,ye,Me,Ie,Fe,Ke,lt;let He=C(),Ot=this.fontSize(),ft;He.save(),He.font=this._getContextFont(),ft=He.measureText(ie),He.restore();const xt=Ot/100;return{actualBoundingBoxAscent:(be=ft.actualBoundingBoxAscent)!==null&&be!==void 0?be:71.58203125*xt,actualBoundingBoxDescent:(Te=ft.actualBoundingBoxDescent)!==null&&Te!==void 0?Te:0,actualBoundingBoxLeft:(ge=ft.actualBoundingBoxLeft)!==null&&ge!==void 0?ge:-7.421875*xt,actualBoundingBoxRight:(V=ft.actualBoundingBoxRight)!==null&&V!==void 0?V:75.732421875*xt,alphabeticBaseline:(fe=ft.alphabeticBaseline)!==null&&fe!==void 0?fe:0,emHeightAscent:(ye=ft.emHeightAscent)!==null&&ye!==void 0?ye:100*xt,emHeightDescent:(Me=ft.emHeightDescent)!==null&&Me!==void 0?Me:-20*xt,fontBoundingBoxAscent:(Ie=ft.fontBoundingBoxAscent)!==null&&Ie!==void 0?Ie:91*xt,fontBoundingBoxDescent:(Fe=ft.fontBoundingBoxDescent)!==null&&Fe!==void 0?Fe:21*xt,hangingBaseline:(Ke=ft.hangingBaseline)!==null&&Ke!==void 0?Ke:72.80000305175781*xt,ideographicBaseline:(lt=ft.ideographicBaseline)!==null&&lt!==void 0?lt:-21*xt,width:ft.width,height:Ot}}_getContextFont(){return this.fontStyle()+I+this.fontVariant()+I+(this.fontSize()+N)+ne(this.fontFamily())}_addTextLine(ie){this.align()===x&&(ie=ie.trim());const Te=this._getTextWidth(ie);return this.textArr.push({text:ie,width:Te,lastInParagraph:!1})}_getTextWidth(ie){const be=this.letterSpacing(),Te=ie.length;return C().measureText(ie).width+be*Te}_setTextData(){let ie=this.text().split(`
`),be=+this.fontSize(),Te=0,ge=this.lineHeight()*be,V=this.attrs.width,fe=this.attrs.height,ye=V!==d&&V!==void 0,Me=fe!==d&&fe!==void 0,Ie=this.padding(),Fe=V-Ie*2,Ke=fe-Ie*2,lt=0,He=this.wrap(),Ot=He!==H,ft=He!==B&&Ot,xt=this.ellipsis();this.textArr=[],C().font=this._getContextFont();const tr=xt?this._getTextWidth(Z):0;for(let Rt=0,Xt=ie.length;Rt<Xt;++Rt){let gt=ie[Rt],Ut=this._getTextWidth(gt);if(ye&&Ut>Fe)for(;gt.length>0;){let zt=0,mn=h(gt).length,Ct="",Qt=0;for(;zt<mn;){const tn=zt+mn>>>1,Jt=h(gt),Bt=Jt.slice(0,tn+1).join(""),Nt=this._getTextWidth(Bt);(xt&&Me&&lt+ge>Ke?Nt+tr:Nt)<=Fe?(zt=tn+1,Ct=Bt,Qt=Nt):mn=tn}if(Ct){if(ft){const Bt=h(gt),Nt=h(Ct),yn=Bt[Nt.length],_r=yn===I||yn===f;let nr;if(_r&&Qt<=Fe)nr=Nt.length;else{const zn=Nt.lastIndexOf(I),qe=Nt.lastIndexOf(f);nr=Math.max(zn,qe)+1}nr>0&&(zt=nr,Ct=Bt.slice(0,zt).join(""),Qt=this._getTextWidth(Ct))}if(Ct=Ct.trimRight(),this._addTextLine(Ct),Te=Math.max(Te,Qt),lt+=ge,this._shouldHandleEllipsis(lt)){this._tryToAddEllipsisToLastLine();break}if(gt=h(gt).slice(zt).join("").trimLeft(),gt.length>0&&(Ut=this._getTextWidth(gt),Ut<=Fe)){this._addTextLine(gt),lt+=ge,Te=Math.max(Te,Ut);break}}else break}else this._addTextLine(gt),lt+=ge,Te=Math.max(Te,Ut),this._shouldHandleEllipsis(lt)&&Rt<Xt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Me&&lt+ge>Ke)break}this.textHeight=be,this.textWidth=Te}_shouldHandleEllipsis(ie){const be=+this.fontSize(),Te=this.lineHeight()*be,ge=this.attrs.height,V=ge!==d&&ge!==void 0,fe=this.padding(),ye=ge-fe*2;return!(this.wrap()!==H)||V&&ie+Te>ye}_tryToAddEllipsisToLastLine(){const ie=this.attrs.width,be=ie!==d&&ie!==void 0,Te=this.padding(),ge=ie-Te*2,V=this.ellipsis(),fe=this.textArr[this.textArr.length-1];!fe||!V||(be&&(this._getTextWidth(fe.text+Z)<ge||(fe.text=fe.text.slice(0,fe.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(fe.text+Z))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const ie=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,be=this.hasShadow();return ie&&be?!0:super._useBufferCanvas()}};return es.Text=X,X.prototype._fillFunc=L,X.prototype._strokeFunc=q,X.prototype.className=M,X.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,m._registerNode)(X),c.Factory.overWriteSetter(X,"width",(0,O.getNumberOrAutoValidator)()),c.Factory.overWriteSetter(X,"height",(0,O.getNumberOrAutoValidator)()),c.Factory.addGetterSetter(X,"direction",S),c.Factory.addGetterSetter(X,"fontFamily","Arial"),c.Factory.addGetterSetter(X,"fontSize",12,(0,O.getNumberValidator)()),c.Factory.addGetterSetter(X,"fontStyle",P),c.Factory.addGetterSetter(X,"fontVariant",P),c.Factory.addGetterSetter(X,"padding",0,(0,O.getNumberValidator)()),c.Factory.addGetterSetter(X,"align",g),c.Factory.addGetterSetter(X,"verticalAlign",G),c.Factory.addGetterSetter(X,"lineHeight",1,(0,O.getNumberValidator)()),c.Factory.addGetterSetter(X,"wrap",D),c.Factory.addGetterSetter(X,"ellipsis",!1,(0,O.getBooleanValidator)()),c.Factory.addGetterSetter(X,"letterSpacing",0,(0,O.getNumberValidator)()),c.Factory.addGetterSetter(X,"text","",(0,O.getStringValidator)()),c.Factory.addGetterSetter(X,"textDecoration",""),es}var $s={},bc;function of(){if(bc)return $s;bc=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.TextPath=void 0;const a=At(),c=st(),E=en(),T=Nl(),O=Ph(),m=at(),h=tt(),d="",y="normal";function S(w){w.fillText(this.partialText,0,0)}function x(w){w.strokeText(this.partialText,0,0)}let R=class extends E.Shape{constructor(f){super(f),this.dummyCanvas=a.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return T.Path.getPathLength(this.dataArray)}_getPointAtLength(f){if(!this.attrs.data)return null;const g=this.pathLength;return f-1>g?null:T.Path.getPointAtLengthOfDataArray(f,this.dataArray)}_readDataAttribute(){this.dataArray=T.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(f){f.setAttr("font",this._getContextFont()),f.setAttr("textBaseline",this.textBaseline()),f.setAttr("textAlign","left"),f.save();const g=this.textDecoration(),k=this.fill(),M=this.fontSize(),G=this.glyphInfo;g==="underline"&&f.beginPath();for(let v=0;v<G.length;v++){f.save();const u=G[v].p0;f.translate(u.x,u.y),f.rotate(G[v].rotation),this.partialText=G[v].text,f.fillStrokeShape(this),g==="underline"&&(v===0&&f.moveTo(0,M/2+1),f.lineTo(M,M/2+1)),f.restore()}g==="underline"&&(f.strokeStyle=k,f.lineWidth=M/20,f.stroke()),f.restore()}_hitFunc(f){f.beginPath();const g=this.glyphInfo;if(g.length>=1){const k=g[0].p0;f.moveTo(k.x,k.y)}for(let k=0;k<g.length;k++){const M=g[k].p1;f.lineTo(M.x,M.y)}f.setAttr("lineWidth",this.fontSize()),f.setAttr("strokeStyle",this.colorKey),f.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(f){return O.Text.prototype.setText.call(this,f)}_getContextFont(){return O.Text.prototype._getContextFont.call(this)}_getTextSize(f){const k=this.dummyCanvas.getContext("2d");k.save(),k.font=this._getContextFont();const M=k.measureText(f);return k.restore(),{width:M.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:f,height:g}=this._getTextSize(this.attrs.text);if(this.textWidth=f,this.textHeight=g,this.glyphInfo=[],!this.attrs.data)return null;const k=this.letterSpacing(),M=this.align(),G=this.kerningFunc(),v=Math.max(this.textWidth+((this.attrs.text||"").length-1)*k,0);let u=0;M==="center"&&(u=Math.max(0,this.pathLength/2-v/2)),M==="right"&&(u=Math.max(0,this.pathLength-v));const P=(0,O.stringToArray)(this.text());let N=u;for(let I=0;I<P.length;I++){const W=this._getPointAtLength(N);if(!W)return;let F=this._getTextSize(P[I]).width+k;if(P[I]===" "&&M==="justify"){const he=this.text().split(" ").length-1;F+=(this.pathLength-v)/he}const D=this._getPointAtLength(N+F);if(!D)return;const B=T.Path.getLineLength(W.x,W.y,D.x,D.y);let H=0;if(G)try{H=G(P[I-1],P[I])*this.fontSize()}catch{H=0}W.x+=H,D.x+=H,this.textWidth+=H;const Z=T.Path.getPointOnLine(H+B/2,W.x,W.y,D.x,D.y),se=Math.atan2(D.y-W.y,D.x-W.x);this.glyphInfo.push({transposeX:Z.x,transposeY:Z.y,text:P[I],rotation:se,p0:W,p1:D}),N+=F}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const f=[];this.glyphInfo.forEach(function(N){f.push(N.p0.x),f.push(N.p0.y),f.push(N.p1.x),f.push(N.p1.y)});let g=f[0]||0,k=f[0]||0,M=f[1]||0,G=f[1]||0,v,u;for(let N=0;N<f.length/2;N++)v=f[N*2],u=f[N*2+1],g=Math.min(g,v),k=Math.max(k,v),M=Math.min(M,u),G=Math.max(G,u);const P=this.fontSize();return{x:g-P/2,y:M-P/2,width:k-g+P,height:G-M+P}}destroy(){return a.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return $s.TextPath=R,R.prototype._fillFunc=S,R.prototype._strokeFunc=x,R.prototype._fillFuncHit=S,R.prototype._strokeFuncHit=x,R.prototype.className="TextPath",R.prototype._attrsAffectingSize=["text","fontSize","data"],(0,h._registerNode)(R),c.Factory.addGetterSetter(R,"data"),c.Factory.addGetterSetter(R,"fontFamily","Arial"),c.Factory.addGetterSetter(R,"fontSize",12,(0,m.getNumberValidator)()),c.Factory.addGetterSetter(R,"fontStyle",y),c.Factory.addGetterSetter(R,"align","left"),c.Factory.addGetterSetter(R,"letterSpacing",0,(0,m.getNumberValidator)()),c.Factory.addGetterSetter(R,"textBaseline","middle"),c.Factory.addGetterSetter(R,"fontVariant",y),c.Factory.addGetterSetter(R,"text",d),c.Factory.addGetterSetter(R,"textDecoration",""),c.Factory.addGetterSetter(R,"kerningFunc",void 0),$s}var ea={},Cc;function lf(){if(Cc)return ea;Cc=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.Transformer=void 0;const a=At(),c=st(),E=Gt(),T=en(),O=Ch(),m=Al(),h=tt(),d=at(),y=tt(),S="tr-konva",x=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(F=>F+`.${S}`).join(" "),R="nodesRect",w=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],f={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in h.Konva._global;function k(F,D,B){if(F==="rotater")return B;D+=a.Util.degToRad(f[F]||0);const H=(a.Util.radToDeg(D)%360+360)%360;return a.Util._inRange(H,315+22.5,360)||a.Util._inRange(H,0,22.5)?"ns-resize":a.Util._inRange(H,45-22.5,45+22.5)?"nesw-resize":a.Util._inRange(H,90-22.5,90+22.5)?"ew-resize":a.Util._inRange(H,135-22.5,135+22.5)?"nwse-resize":a.Util._inRange(H,180-22.5,180+22.5)?"ns-resize":a.Util._inRange(H,225-22.5,225+22.5)?"nesw-resize":a.Util._inRange(H,270-22.5,270+22.5)?"ew-resize":a.Util._inRange(H,315-22.5,315+22.5)?"nwse-resize":(a.Util.error("Transformer has unknown angle for cursor detection: "+H),"pointer")}const M=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function G(F){return{x:F.x+F.width/2*Math.cos(F.rotation)+F.height/2*Math.sin(-F.rotation),y:F.y+F.height/2*Math.cos(F.rotation)+F.width/2*Math.sin(F.rotation)}}function v(F,D,B){const H=B.x+(F.x-B.x)*Math.cos(D)-(F.y-B.y)*Math.sin(D),Z=B.y+(F.x-B.x)*Math.sin(D)+(F.y-B.y)*Math.cos(D);return{...F,rotation:F.rotation+D,x:H,y:Z}}function u(F,D){const B=G(F);return v(F,D,B)}function P(F,D,B){let H=D;for(let Z=0;Z<F.length;Z++){const se=h.Konva.getAngle(F[Z]),he=Math.abs(se-D)%(Math.PI*2);Math.min(he,Math.PI*2-he)<B&&(H=se)}return H}let N=0,I=class extends m.Group{constructor(D){super(D),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(x,this.update),this.getNode()&&this.update()}attachTo(D){return this.setNode(D),this}setNode(D){return a.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([D])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return S+this._id}setNodes(D=[]){this._nodes&&this._nodes.length&&this.detach();const B=D.filter(Z=>Z.isAncestorOf(this)?(a.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=D=B,D.length===1&&this.useSingleNodeRotation()?this.rotation(D[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(Z=>{const se=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(Z._attrsAffectingSize.length){const he=Z._attrsAffectingSize.map(ne=>ne+"Change."+this._getEventNamespace()).join(" ");Z.on(he,se)}Z.on(w.map(he=>he+`.${this._getEventNamespace()}`).join(" "),se),Z.on(`absoluteTransformChange.${this._getEventNamespace()}`,se),this._proxyDrag(Z)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(D){let B;D.on(`dragstart.${this._getEventNamespace()}`,H=>{B=D.getAbsolutePosition(),!this.isDragging()&&D!==this.findOne(".back")&&this.startDrag(H,!1)}),D.on(`dragmove.${this._getEventNamespace()}`,H=>{if(!B)return;const Z=D.getAbsolutePosition(),se=Z.x-B.x,he=Z.y-B.y;this.nodes().forEach(ne=>{if(ne===D||ne.isDragging())return;const Ce=ne.getAbsolutePosition();ne.setAbsolutePosition({x:Ce.x+se,y:Ce.y+he}),ne.startDrag(H)}),B=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(D=>{D.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(R),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(R,this.__getNodeRect)}__getNodeShape(D,B=this.rotation(),H){const Z=D.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),se=D.getAbsoluteScale(H),he=D.getAbsolutePosition(H),ne=Z.x*se.x-D.offsetX()*se.x,Ce=Z.y*se.y-D.offsetY()*se.y,C=(h.Konva.getAngle(D.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),L={x:he.x+ne*Math.cos(C)+Ce*Math.sin(-C),y:he.y+Ce*Math.cos(C)+ne*Math.sin(C),width:Z.width*se.x,height:Z.height*se.y,rotation:C};return v(L,-h.Konva.getAngle(B),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const B=[];this.nodes().map(C=>{const L=C.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),q=[{x:L.x,y:L.y},{x:L.x+L.width,y:L.y},{x:L.x+L.width,y:L.y+L.height},{x:L.x,y:L.y+L.height}],z=C.getAbsoluteTransform();q.forEach(function(X){const _e=z.point(X);B.push(_e)})});const H=new a.Transform;H.rotate(-h.Konva.getAngle(this.rotation()));let Z=1/0,se=1/0,he=-1/0,ne=-1/0;B.forEach(function(C){const L=H.point(C);Z===void 0&&(Z=he=L.x,se=ne=L.y),Z=Math.min(Z,L.x),se=Math.min(se,L.y),he=Math.max(he,L.x),ne=Math.max(ne,L.y)}),H.invert();const Ce=H.point({x:Z,y:se});return{x:Ce.x,y:Ce.y,width:he-Z,height:ne-se,rotation:h.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),M.forEach(D=>{this._createAnchor(D)}),this._createAnchor("rotater")}_createAnchor(D){const B=new O.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:D+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),H=this;B.on("mousedown touchstart",function(Z){H._handleMouseDown(Z)}),B.on("dragstart",Z=>{B.stopDrag(),Z.cancelBubble=!0}),B.on("dragend",Z=>{Z.cancelBubble=!0}),B.on("mouseenter",()=>{const Z=h.Konva.getAngle(this.rotation()),se=this.rotateAnchorCursor(),he=k(D,Z,se);B.getStage().content&&(B.getStage().content.style.cursor=he),this._cursorChange=!0}),B.on("mouseout",()=>{B.getStage().content&&(B.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(B)}_createBack(){const D=new T.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(B,H){const Z=H.getParent(),se=Z.padding();B.beginPath(),B.rect(-se,-se,H.width()+se*2,H.height()+se*2),B.moveTo(H.width()/2,-se),Z.rotateEnabled()&&Z.rotateLineVisible()&&B.lineTo(H.width()/2,-Z.rotateAnchorOffset()*a.Util._sign(H.height())-se),B.fillStrokeShape(H)},hitFunc:(B,H)=>{if(!this.shouldOverdrawWholeArea())return;const Z=this.padding();B.beginPath(),B.rect(-Z,-Z,H.width()+Z*2,H.height()+Z*2),B.fillStrokeShape(H)}});this.add(D),this._proxyDrag(D),D.on("dragstart",B=>{B.cancelBubble=!0}),D.on("dragmove",B=>{B.cancelBubble=!0}),D.on("dragend",B=>{B.cancelBubble=!0}),this.on("dragmove",B=>{this.update()})}_handleMouseDown(D){if(this._transforming)return;this._movingAnchorName=D.target.name().split(" ")[0];const B=this._getNodeRect(),H=B.width,Z=B.height,se=Math.sqrt(Math.pow(H,2)+Math.pow(Z,2));this.sin=Math.abs(Z/se),this.cos=Math.abs(H/se),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const he=D.target.getAbsolutePosition(),ne=D.target.getStage().getPointerPosition();this._anchorDragOffset={x:ne.x-he.x,y:ne.y-he.y},N++,this._fire("transformstart",{evt:D.evt,target:this.getNode()}),this._nodes.forEach(Ce=>{Ce._fire("transformstart",{evt:D.evt,target:Ce})})}_handleMouseMove(D){let B,H,Z;const se=this.findOne("."+this._movingAnchorName),he=se.getStage();he.setPointersPositions(D);const ne=he.getPointerPosition();let Ce={x:ne.x-this._anchorDragOffset.x,y:ne.y-this._anchorDragOffset.y};const C=se.getAbsolutePosition();this.anchorDragBoundFunc()&&(Ce=this.anchorDragBoundFunc()(C,Ce,D)),se.setAbsolutePosition(Ce);const L=se.getAbsolutePosition();if(C.x===L.x&&C.y===L.y)return;if(this._movingAnchorName==="rotater"){const ge=this._getNodeRect();B=se.x()-ge.width/2,H=-se.y()+ge.height/2;let V=Math.atan2(-H,B)+Math.PI/2;ge.height<0&&(V-=Math.PI);const ye=h.Konva.getAngle(this.rotation())+V,Me=h.Konva.getAngle(this.rotationSnapTolerance()),Fe=P(this.rotationSnaps(),ye,Me)-ge.rotation,Ke=u(ge,Fe);this._fitNodesInto(Ke,D);return}const q=this.shiftBehavior();let z;q==="inverted"?z=this.keepRatio()&&!D.shiftKey:q==="none"?z=this.keepRatio():z=this.keepRatio()||D.shiftKey;let X=this.centeredScaling()||D.altKey;if(this._movingAnchorName==="top-left"){if(z){const ge=X?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};Z=Math.sqrt(Math.pow(ge.x-se.x(),2)+Math.pow(ge.y-se.y(),2));const V=this.findOne(".top-left").x()>ge.x?-1:1,fe=this.findOne(".top-left").y()>ge.y?-1:1;B=Z*this.cos*V,H=Z*this.sin*fe,this.findOne(".top-left").x(ge.x-B),this.findOne(".top-left").y(ge.y-H)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(se.y());else if(this._movingAnchorName==="top-right"){if(z){const ge=X?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};Z=Math.sqrt(Math.pow(se.x()-ge.x,2)+Math.pow(ge.y-se.y(),2));const V=this.findOne(".top-right").x()<ge.x?-1:1,fe=this.findOne(".top-right").y()>ge.y?-1:1;B=Z*this.cos*V,H=Z*this.sin*fe,this.findOne(".top-right").x(ge.x+B),this.findOne(".top-right").y(ge.y-H)}var _e=se.position();this.findOne(".top-left").y(_e.y),this.findOne(".bottom-right").x(_e.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(se.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(se.x());else if(this._movingAnchorName==="bottom-left"){if(z){const ge=X?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};Z=Math.sqrt(Math.pow(ge.x-se.x(),2)+Math.pow(se.y()-ge.y,2));const V=ge.x<se.x()?-1:1,fe=se.y()<ge.y?-1:1;B=Z*this.cos*V,H=Z*this.sin*fe,se.x(ge.x-B),se.y(ge.y+H)}_e=se.position(),this.findOne(".top-left").x(_e.x),this.findOne(".bottom-right").y(_e.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(se.y());else if(this._movingAnchorName==="bottom-right"){if(z){const ge=X?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};Z=Math.sqrt(Math.pow(se.x()-ge.x,2)+Math.pow(se.y()-ge.y,2));const V=this.findOne(".bottom-right").x()<ge.x?-1:1,fe=this.findOne(".bottom-right").y()<ge.y?-1:1;B=Z*this.cos*V,H=Z*this.sin*fe,this.findOne(".bottom-right").x(ge.x+B),this.findOne(".bottom-right").y(ge.y+H)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(X=this.centeredScaling()||D.altKey,X){const ge=this.findOne(".top-left"),V=this.findOne(".bottom-right"),fe=ge.x(),ye=ge.y(),Me=this.getWidth()-V.x(),Ie=this.getHeight()-V.y();V.move({x:-fe,y:-ye}),ge.move({x:Me,y:Ie})}const ie=this.findOne(".top-left").getAbsolutePosition();B=ie.x,H=ie.y;const be=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Te=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:B,y:H,width:be,height:Te,rotation:h.Konva.getAngle(this.rotation())},D)}_handleMouseUp(D){this._removeEvents(D)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(D){var B;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const H=this.getNode();N--,this._fire("transformend",{evt:D,target:H}),(B=this.getLayer())===null||B===void 0||B.batchDraw(),H&&this._nodes.forEach(Z=>{var se;Z._fire("transformend",{evt:D,target:Z}),(se=Z.getLayer())===null||se===void 0||se.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(D,B){const H=this._getNodeRect(),Z=1;if(a.Util._inRange(D.width,-this.padding()*2-Z,Z)){this.update();return}if(a.Util._inRange(D.height,-this.padding()*2-Z,Z)){this.update();return}const se=new a.Transform;if(se.rotate(h.Konva.getAngle(this.rotation())),this._movingAnchorName&&D.width<0&&this._movingAnchorName.indexOf("left")>=0){const z=se.point({x:-this.padding()*2,y:0});D.x+=z.x,D.y+=z.y,D.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=z.x,this._anchorDragOffset.y-=z.y}else if(this._movingAnchorName&&D.width<0&&this._movingAnchorName.indexOf("right")>=0){const z=se.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=z.x,this._anchorDragOffset.y-=z.y,D.width+=this.padding()*2}if(this._movingAnchorName&&D.height<0&&this._movingAnchorName.indexOf("top")>=0){const z=se.point({x:0,y:-this.padding()*2});D.x+=z.x,D.y+=z.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=z.x,this._anchorDragOffset.y-=z.y,D.height+=this.padding()*2}else if(this._movingAnchorName&&D.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const z=se.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=z.x,this._anchorDragOffset.y-=z.y,D.height+=this.padding()*2}if(this.boundBoxFunc()){const z=this.boundBoxFunc()(H,D);z?D=z:a.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const he=1e7,ne=new a.Transform;ne.translate(H.x,H.y),ne.rotate(H.rotation),ne.scale(H.width/he,H.height/he);const Ce=new a.Transform,C=D.width/he,L=D.height/he;this.flipEnabled()===!1?(Ce.translate(D.x,D.y),Ce.rotate(D.rotation),Ce.translate(D.width<0?D.width:0,D.height<0?D.height:0),Ce.scale(Math.abs(C),Math.abs(L))):(Ce.translate(D.x,D.y),Ce.rotate(D.rotation),Ce.scale(C,L));const q=Ce.multiply(ne.invert());this._nodes.forEach(z=>{var X;const _e=z.getParent().getAbsoluteTransform(),ie=z.getTransform().copy();ie.translate(z.offsetX(),z.offsetY());const be=new a.Transform;be.multiply(_e.copy().invert()).multiply(q).multiply(_e).multiply(ie);const Te=be.decompose();z.setAttrs(Te),(X=z.getLayer())===null||X===void 0||X.batchDraw()}),this.rotation(a.Util._getRotation(D.rotation)),this._nodes.forEach(z=>{this._fire("transform",{evt:B,target:z}),z._fire("transform",{evt:B,target:z})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(D,B){this.findOne(D).setAttrs(B)}update(){var D;const B=this._getNodeRect();this.rotation(a.Util._getRotation(B.rotation));const H=B.width,Z=B.height,se=this.enabledAnchors(),he=this.resizeEnabled(),ne=this.padding(),Ce=this.anchorSize(),C=this.find("._anchor");C.forEach(q=>{q.setAttrs({width:Ce,height:Ce,offsetX:Ce/2,offsetY:Ce/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:Ce/2+ne,offsetY:Ce/2+ne,visible:he&&se.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:H/2,y:0,offsetY:Ce/2+ne,visible:he&&se.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:H,y:0,offsetX:Ce/2-ne,offsetY:Ce/2+ne,visible:he&&se.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:Z/2,offsetX:Ce/2+ne,visible:he&&se.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:H,y:Z/2,offsetX:Ce/2-ne,visible:he&&se.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:Z,offsetX:Ce/2+ne,offsetY:Ce/2-ne,visible:he&&se.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:H/2,y:Z,offsetY:Ce/2-ne,visible:he&&se.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:H,y:Z,offsetX:Ce/2-ne,offsetY:Ce/2-ne,visible:he&&se.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:H/2,y:-this.rotateAnchorOffset()*a.Util._sign(Z)-ne,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:H,height:Z,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const L=this.anchorStyleFunc();L&&C.forEach(q=>{L(q)}),(D=this.getLayer())===null||D===void 0||D.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const D=this.findOne("."+this._movingAnchorName);D&&D.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),m.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return E.Node.prototype.toObject.call(this)}clone(D){return E.Node.prototype.clone.call(this,D)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};ea.Transformer=I,I.isTransforming=()=>N>0;function W(F){return F instanceof Array||a.Util.warn("enabledAnchors value should be an array"),F instanceof Array&&F.forEach(function(D){M.indexOf(D)===-1&&a.Util.warn("Unknown anchor name: "+D+". Available names are: "+M.join(", "))}),F||[]}return I.prototype.className="Transformer",(0,y._registerNode)(I),c.Factory.addGetterSetter(I,"enabledAnchors",M,W),c.Factory.addGetterSetter(I,"flipEnabled",!0,(0,d.getBooleanValidator)()),c.Factory.addGetterSetter(I,"resizeEnabled",!0),c.Factory.addGetterSetter(I,"anchorSize",10,(0,d.getNumberValidator)()),c.Factory.addGetterSetter(I,"rotateEnabled",!0),c.Factory.addGetterSetter(I,"rotateLineVisible",!0),c.Factory.addGetterSetter(I,"rotationSnaps",[]),c.Factory.addGetterSetter(I,"rotateAnchorOffset",50,(0,d.getNumberValidator)()),c.Factory.addGetterSetter(I,"rotateAnchorCursor","crosshair"),c.Factory.addGetterSetter(I,"rotationSnapTolerance",5,(0,d.getNumberValidator)()),c.Factory.addGetterSetter(I,"borderEnabled",!0),c.Factory.addGetterSetter(I,"anchorStroke","rgb(0, 161, 255)"),c.Factory.addGetterSetter(I,"anchorStrokeWidth",1,(0,d.getNumberValidator)()),c.Factory.addGetterSetter(I,"anchorFill","white"),c.Factory.addGetterSetter(I,"anchorCornerRadius",0,(0,d.getNumberValidator)()),c.Factory.addGetterSetter(I,"borderStroke","rgb(0, 161, 255)"),c.Factory.addGetterSetter(I,"borderStrokeWidth",1,(0,d.getNumberValidator)()),c.Factory.addGetterSetter(I,"borderDash"),c.Factory.addGetterSetter(I,"keepRatio",!0),c.Factory.addGetterSetter(I,"shiftBehavior","default"),c.Factory.addGetterSetter(I,"centeredScaling",!1),c.Factory.addGetterSetter(I,"ignoreStroke",!1),c.Factory.addGetterSetter(I,"padding",0,(0,d.getNumberValidator)()),c.Factory.addGetterSetter(I,"nodes"),c.Factory.addGetterSetter(I,"node"),c.Factory.addGetterSetter(I,"boundBoxFunc"),c.Factory.addGetterSetter(I,"anchorDragBoundFunc"),c.Factory.addGetterSetter(I,"anchorStyleFunc"),c.Factory.addGetterSetter(I,"shouldOverdrawWholeArea",!1),c.Factory.addGetterSetter(I,"useSingleNodeRotation",!0),c.Factory.backCompat(I,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),ea}var ta={},Pc;function uf(){if(Pc)return ta;Pc=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.Wedge=void 0;const a=st(),c=en(),E=tt(),T=at(),O=tt();let m=class extends c.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.radius(),0,E.Konva.getAngle(this.angle()),this.clockwise()),d.lineTo(0,0),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius(d/2)}setHeight(d){this.radius(d/2)}};return ta.Wedge=m,m.prototype.className="Wedge",m.prototype._centroid=!0,m.prototype._attrsAffectingSize=["radius"],(0,O._registerNode)(m),a.Factory.addGetterSetter(m,"radius",0,(0,T.getNumberValidator)()),a.Factory.addGetterSetter(m,"angle",0,(0,T.getNumberValidator)()),a.Factory.addGetterSetter(m,"clockwise",!1),a.Factory.backCompat(m,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),ta}var na={},kc;function cf(){if(kc)return na;kc=1,Object.defineProperty(na,"__esModule",{value:!0}),na.Blur=void 0;const a=st(),c=Gt(),E=at();function T(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const O=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],m=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function h(y,S){const x=y.data,R=y.width,w=y.height;let f,g,k,M,G,v,u,P,N,I,W,F,D,B,H,Z,se,he,ne,Ce;const C=S+S+1,L=R-1,q=w-1,z=S+1,X=z*(z+1)/2,_e=new T,ie=O[S],be=m[S];let Te=null,ge=_e,V=null,fe=null;for(let ye=1;ye<C;ye++)ge=ge.next=new T,ye===z&&(Te=ge);ge.next=_e,k=g=0;for(let ye=0;ye<w;ye++){F=D=B=H=M=G=v=u=0,P=z*(Z=x[g]),N=z*(se=x[g+1]),I=z*(he=x[g+2]),W=z*(ne=x[g+3]),M+=X*Z,G+=X*se,v+=X*he,u+=X*ne,ge=_e;for(let Me=0;Me<z;Me++)ge.r=Z,ge.g=se,ge.b=he,ge.a=ne,ge=ge.next;for(let Me=1;Me<z;Me++)f=g+((L<Me?L:Me)<<2),M+=(ge.r=Z=x[f])*(Ce=z-Me),G+=(ge.g=se=x[f+1])*Ce,v+=(ge.b=he=x[f+2])*Ce,u+=(ge.a=ne=x[f+3])*Ce,F+=Z,D+=se,B+=he,H+=ne,ge=ge.next;V=_e,fe=Te;for(let Me=0;Me<R;Me++)x[g+3]=ne=u*ie>>be,ne!==0?(ne=255/ne,x[g]=(M*ie>>be)*ne,x[g+1]=(G*ie>>be)*ne,x[g+2]=(v*ie>>be)*ne):x[g]=x[g+1]=x[g+2]=0,M-=P,G-=N,v-=I,u-=W,P-=V.r,N-=V.g,I-=V.b,W-=V.a,f=k+((f=Me+S+1)<L?f:L)<<2,F+=V.r=x[f],D+=V.g=x[f+1],B+=V.b=x[f+2],H+=V.a=x[f+3],M+=F,G+=D,v+=B,u+=H,V=V.next,P+=Z=fe.r,N+=se=fe.g,I+=he=fe.b,W+=ne=fe.a,F-=Z,D-=se,B-=he,H-=ne,fe=fe.next,g+=4;k+=R}for(let ye=0;ye<R;ye++){D=B=H=F=G=v=u=M=0,g=ye<<2,P=z*(Z=x[g]),N=z*(se=x[g+1]),I=z*(he=x[g+2]),W=z*(ne=x[g+3]),M+=X*Z,G+=X*se,v+=X*he,u+=X*ne,ge=_e;for(let Ie=0;Ie<z;Ie++)ge.r=Z,ge.g=se,ge.b=he,ge.a=ne,ge=ge.next;let Me=R;for(let Ie=1;Ie<=S;Ie++)g=Me+ye<<2,M+=(ge.r=Z=x[g])*(Ce=z-Ie),G+=(ge.g=se=x[g+1])*Ce,v+=(ge.b=he=x[g+2])*Ce,u+=(ge.a=ne=x[g+3])*Ce,F+=Z,D+=se,B+=he,H+=ne,ge=ge.next,Ie<q&&(Me+=R);g=ye,V=_e,fe=Te;for(let Ie=0;Ie<w;Ie++)f=g<<2,x[f+3]=ne=u*ie>>be,ne>0?(ne=255/ne,x[f]=(M*ie>>be)*ne,x[f+1]=(G*ie>>be)*ne,x[f+2]=(v*ie>>be)*ne):x[f]=x[f+1]=x[f+2]=0,M-=P,G-=N,v-=I,u-=W,P-=V.r,N-=V.g,I-=V.b,W-=V.a,f=ye+((f=Ie+z)<q?f:q)*R<<2,M+=F+=V.r=x[f],G+=D+=V.g=x[f+1],v+=B+=V.b=x[f+2],u+=H+=V.a=x[f+3],V=V.next,P+=Z=fe.r,N+=se=fe.g,I+=he=fe.b,W+=ne=fe.a,F-=Z,D-=se,B-=he,H-=ne,fe=fe.next,g+=R}}const d=function(S){const x=Math.round(this.blurRadius());x>0&&h(S,x)};return na.Blur=d,a.Factory.addGetterSetter(c.Node,"blurRadius",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),na}var ra={},Ec;function hf(){if(Ec)return ra;Ec=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.Brighten=void 0;const a=st(),c=Gt(),E=at(),T=function(O){const m=this.brightness()*255,h=O.data,d=h.length;for(let y=0;y<d;y+=4)h[y]+=m,h[y+1]+=m,h[y+2]+=m};return ra.Brighten=T,a.Factory.addGetterSetter(c.Node,"brightness",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),ra}var ia={},Rc;function df(){if(Rc)return ia;Rc=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.Contrast=void 0;const a=st(),c=Gt(),E=at(),T=function(O){const m=Math.pow((this.contrast()+100)/100,2),h=O.data,d=h.length;let y=150,S=150,x=150;for(let R=0;R<d;R+=4)y=h[R],S=h[R+1],x=h[R+2],y/=255,y-=.5,y*=m,y+=.5,y*=255,S/=255,S-=.5,S*=m,S+=.5,S*=255,x/=255,x-=.5,x*=m,x+=.5,x*=255,y=y<0?0:y>255?255:y,S=S<0?0:S>255?255:S,x=x<0?0:x>255?255:x,h[R]=y,h[R+1]=S,h[R+2]=x};return ia.Contrast=T,a.Factory.addGetterSetter(c.Node,"contrast",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),ia}var sa={},Tc;function ff(){if(Tc)return sa;Tc=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.Emboss=void 0;const a=st(),c=Gt(),E=At(),T=at(),O=function(m){const h=this.embossStrength()*10,d=this.embossWhiteLevel()*255,y=this.embossDirection(),S=this.embossBlend(),x=m.data,R=m.width,w=m.height,f=R*4;let g=0,k=0,M=w;switch(y){case"top-left":g=-1,k=-1;break;case"top":g=-1,k=0;break;case"top-right":g=-1,k=1;break;case"right":g=0,k=1;break;case"bottom-right":g=1,k=1;break;case"bottom":g=1,k=0;break;case"bottom-left":g=1,k=-1;break;case"left":g=0,k=-1;break;default:E.Util.error("Unknown emboss direction: "+y)}do{const G=(M-1)*f;let v=g;M+v<1&&(v=0),M+v>w&&(v=0);const u=(M-1+v)*R*4;let P=R;do{const N=G+(P-1)*4;let I=k;P+I<1&&(I=0),P+I>R&&(I=0);const W=u+(P-1+I)*4,F=x[N]-x[W],D=x[N+1]-x[W+1],B=x[N+2]-x[W+2];let H=F;const Z=H>0?H:-H,se=D>0?D:-D,he=B>0?B:-B;if(se>Z&&(H=D),he>Z&&(H=B),H*=h,S){const ne=x[N]+H,Ce=x[N+1]+H,C=x[N+2]+H;x[N]=ne>255?255:ne<0?0:ne,x[N+1]=Ce>255?255:Ce<0?0:Ce,x[N+2]=C>255?255:C<0?0:C}else{let ne=d-H;ne<0?ne=0:ne>255&&(ne=255),x[N]=x[N+1]=x[N+2]=ne}}while(--P)}while(--M)};return sa.Emboss=O,a.Factory.addGetterSetter(c.Node,"embossStrength",.5,(0,T.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(c.Node,"embossWhiteLevel",.5,(0,T.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(c.Node,"embossDirection","top-left",void 0,a.Factory.afterSetFilter),a.Factory.addGetterSetter(c.Node,"embossBlend",!1,void 0,a.Factory.afterSetFilter),sa}var aa={},Ac;function gf(){if(Ac)return aa;Ac=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.Enhance=void 0;const a=st(),c=Gt(),E=at();function T(m,h,d,y,S){const x=d-h,R=S-y;if(x===0)return y+R/2;if(R===0)return y;let w=(m-h)/x;return w=R*w+y,w}const O=function(m){const h=m.data,d=h.length;let y=h[0],S=y,x,R=h[1],w=R,f,g=h[2],k=g,M;const G=this.enhance();if(G===0)return;for(let F=0;F<d;F+=4)x=h[F+0],x<y?y=x:x>S&&(S=x),f=h[F+1],f<R?R=f:f>w&&(w=f),M=h[F+2],M<g?g=M:M>k&&(k=M);S===y&&(S=255,y=0),w===R&&(w=255,R=0),k===g&&(k=255,g=0);let v,u,P,N,I,W;if(G>0)v=S+G*(255-S),u=y-G*(y-0),P=w+G*(255-w),N=R-G*(R-0),I=k+G*(255-k),W=g-G*(g-0);else{const F=(S+y)*.5;v=S+G*(S-F),u=y+G*(y-F);const D=(w+R)*.5;P=w+G*(w-D),N=R+G*(R-D);const B=(k+g)*.5;I=k+G*(k-B),W=g+G*(g-B)}for(let F=0;F<d;F+=4)h[F+0]=T(h[F+0],y,S,u,v),h[F+1]=T(h[F+1],R,w,N,P),h[F+2]=T(h[F+2],g,k,W,I)};return aa.Enhance=O,a.Factory.addGetterSetter(c.Node,"enhance",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),aa}var oa={},Oc;function pf(){if(Oc)return oa;Oc=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.Grayscale=void 0;const a=function(c){const E=c.data,T=E.length;for(let O=0;O<T;O+=4){const m=.34*E[O]+.5*E[O+1]+.16*E[O+2];E[O]=m,E[O+1]=m,E[O+2]=m}};return oa.Grayscale=a,oa}var la={},Nc;function mf(){if(Nc)return la;Nc=1,Object.defineProperty(la,"__esModule",{value:!0}),la.HSL=void 0;const a=st(),c=Gt(),E=at();a.Factory.addGetterSetter(c.Node,"hue",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(c.Node,"saturation",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(c.Node,"luminance",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter);const T=function(O){const m=O.data,h=m.length,d=1,y=Math.pow(2,this.saturation()),S=Math.abs(this.hue()+360)%360,x=this.luminance()*127,R=d*y*Math.cos(S*Math.PI/180),w=d*y*Math.sin(S*Math.PI/180),f=.299*d+.701*R+.167*w,g=.587*d-.587*R+.33*w,k=.114*d-.114*R-.497*w,M=.299*d-.299*R-.328*w,G=.587*d+.413*R+.035*w,v=.114*d-.114*R+.293*w,u=.299*d-.3*R+1.25*w,P=.587*d-.586*R-1.05*w,N=.114*d+.886*R-.2*w;let I,W,F,D;for(let B=0;B<h;B+=4)I=m[B+0],W=m[B+1],F=m[B+2],D=m[B+3],m[B+0]=f*I+g*W+k*F+x,m[B+1]=M*I+G*W+v*F+x,m[B+2]=u*I+P*W+N*F+x,m[B+3]=D};return la.HSL=T,la}var ua={},Mc;function yf(){if(Mc)return ua;Mc=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.HSV=void 0;const a=st(),c=Gt(),E=at(),T=function(O){const m=O.data,h=m.length,d=Math.pow(2,this.value()),y=Math.pow(2,this.saturation()),S=Math.abs(this.hue()+360)%360,x=d*y*Math.cos(S*Math.PI/180),R=d*y*Math.sin(S*Math.PI/180),w=.299*d+.701*x+.167*R,f=.587*d-.587*x+.33*R,g=.114*d-.114*x-.497*R,k=.299*d-.299*x-.328*R,M=.587*d+.413*x+.035*R,G=.114*d-.114*x+.293*R,v=.299*d-.3*x+1.25*R,u=.587*d-.586*x-1.05*R,P=.114*d+.886*x-.2*R;for(let N=0;N<h;N+=4){const I=m[N+0],W=m[N+1],F=m[N+2],D=m[N+3];m[N+0]=w*I+f*W+g*F,m[N+1]=k*I+M*W+G*F,m[N+2]=v*I+u*W+P*F,m[N+3]=D}};return ua.HSV=T,a.Factory.addGetterSetter(c.Node,"hue",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(c.Node,"saturation",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(c.Node,"value",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),ua}var ca={},Fc;function vf(){if(Fc)return ca;Fc=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.Invert=void 0;const a=function(c){const E=c.data,T=E.length;for(let O=0;O<T;O+=4)E[O]=255-E[O],E[O+1]=255-E[O+1],E[O+2]=255-E[O+2]};return ca.Invert=a,ca}var ha={},Ic;function _f(){if(Ic)return ha;Ic=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.Kaleidoscope=void 0;const a=st(),c=Gt(),E=At(),T=at(),O=function(d,y,S){const x=d.data,R=y.data,w=d.width,f=d.height,g=S.polarCenterX||w/2,k=S.polarCenterY||f/2;let M=Math.sqrt(g*g+k*k),G=w-g,v=f-k;const u=Math.sqrt(G*G+v*v);M=u>M?u:M;const P=f,N=w,I=360/N*Math.PI/180;for(let W=0;W<N;W+=1){const F=Math.sin(W*I),D=Math.cos(W*I);for(let B=0;B<P;B+=1){G=Math.floor(g+M*B/P*D),v=Math.floor(k+M*B/P*F);let H=(v*w+G)*4;const Z=x[H+0],se=x[H+1],he=x[H+2],ne=x[H+3];H=(W+B*w)*4,R[H+0]=Z,R[H+1]=se,R[H+2]=he,R[H+3]=ne}}},m=function(d,y,S){const x=d.data,R=y.data,w=d.width,f=d.height,g=S.polarCenterX||w/2,k=S.polarCenterY||f/2;let M=Math.sqrt(g*g+k*k),G=w-g,v=f-k;const u=Math.sqrt(G*G+v*v);M=u>M?u:M;const P=f,N=w,I=0;let W,F;for(G=0;G<w;G+=1)for(v=0;v<f;v+=1){const D=G-g,B=v-k,H=Math.sqrt(D*D+B*B)*P/M;let Z=(Math.atan2(B,D)*180/Math.PI+360+I)%360;Z=Z*N/360,W=Math.floor(Z),F=Math.floor(H);let se=(F*w+W)*4;const he=x[se+0],ne=x[se+1],Ce=x[se+2],C=x[se+3];se=(v*w+G)*4,R[se+0]=he,R[se+1]=ne,R[se+2]=Ce,R[se+3]=C}},h=function(d){const y=d.width,S=d.height;let x,R,w,f,g,k,M,G,v,u,P=Math.round(this.kaleidoscopePower());const N=Math.round(this.kaleidoscopeAngle()),I=Math.floor(y*(N%360)/360);if(P<1)return;const W=E.Util.createCanvasElement();W.width=y,W.height=S;const F=W.getContext("2d").getImageData(0,0,y,S);E.Util.releaseCanvas(W),O(d,F,{polarCenterX:y/2,polarCenterY:S/2});let D=y/Math.pow(2,P);for(;D<=8;)D=D*2,P-=1;D=Math.ceil(D);let B=D,H=0,Z=B,se=1;for(I+D>y&&(H=B,Z=0,se=-1),R=0;R<S;R+=1)for(x=H;x!==Z;x+=se)w=Math.round(x+I)%y,v=(y*R+w)*4,g=F.data[v+0],k=F.data[v+1],M=F.data[v+2],G=F.data[v+3],u=(y*R+x)*4,F.data[u+0]=g,F.data[u+1]=k,F.data[u+2]=M,F.data[u+3]=G;for(R=0;R<S;R+=1)for(B=Math.floor(D),f=0;f<P;f+=1){for(x=0;x<B+1;x+=1)v=(y*R+x)*4,g=F.data[v+0],k=F.data[v+1],M=F.data[v+2],G=F.data[v+3],u=(y*R+B*2-x-1)*4,F.data[u+0]=g,F.data[u+1]=k,F.data[u+2]=M,F.data[u+3]=G;B*=2}m(F,d,{})};return ha.Kaleidoscope=h,a.Factory.addGetterSetter(c.Node,"kaleidoscopePower",2,(0,T.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(c.Node,"kaleidoscopeAngle",0,(0,T.getNumberValidator)(),a.Factory.afterSetFilter),ha}var da={},Dc;function wf(){if(Dc)return da;Dc=1,Object.defineProperty(da,"__esModule",{value:!0}),da.Mask=void 0;const a=st(),c=Gt(),E=at();function T(w,f,g){let k=(g*w.width+f)*4;const M=[];return M.push(w.data[k++],w.data[k++],w.data[k++],w.data[k++]),M}function O(w,f){return Math.sqrt(Math.pow(w[0]-f[0],2)+Math.pow(w[1]-f[1],2)+Math.pow(w[2]-f[2],2))}function m(w){const f=[0,0,0];for(let g=0;g<w.length;g++)f[0]+=w[g][0],f[1]+=w[g][1],f[2]+=w[g][2];return f[0]/=w.length,f[1]/=w.length,f[2]/=w.length,f}function h(w,f){const g=T(w,0,0),k=T(w,w.width-1,0),M=T(w,0,w.height-1),G=T(w,w.width-1,w.height-1),v=f||10;if(O(g,k)<v&&O(k,G)<v&&O(G,M)<v&&O(M,g)<v){const u=m([k,g,G,M]),P=[];for(let N=0;N<w.width*w.height;N++){const I=O(u,[w.data[N*4],w.data[N*4+1],w.data[N*4+2]]);P[N]=I<v?0:255}return P}}function d(w,f){for(let g=0;g<w.width*w.height;g++)w.data[4*g+3]=f[g]}function y(w,f,g){const k=[1,1,1,1,0,1,1,1,1],M=Math.round(Math.sqrt(k.length)),G=Math.floor(M/2),v=[];for(let u=0;u<g;u++)for(let P=0;P<f;P++){const N=u*f+P;let I=0;for(let W=0;W<M;W++)for(let F=0;F<M;F++){const D=u+W-G,B=P+F-G;if(D>=0&&D<g&&B>=0&&B<f){const H=D*f+B,Z=k[W*M+F];I+=w[H]*Z}}v[N]=I===2040?255:0}return v}function S(w,f,g){const k=[1,1,1,1,1,1,1,1,1],M=Math.round(Math.sqrt(k.length)),G=Math.floor(M/2),v=[];for(let u=0;u<g;u++)for(let P=0;P<f;P++){const N=u*f+P;let I=0;for(let W=0;W<M;W++)for(let F=0;F<M;F++){const D=u+W-G,B=P+F-G;if(D>=0&&D<g&&B>=0&&B<f){const H=D*f+B,Z=k[W*M+F];I+=w[H]*Z}}v[N]=I>=1020?255:0}return v}function x(w,f,g){const k=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],M=Math.round(Math.sqrt(k.length)),G=Math.floor(M/2),v=[];for(let u=0;u<g;u++)for(let P=0;P<f;P++){const N=u*f+P;let I=0;for(let W=0;W<M;W++)for(let F=0;F<M;F++){const D=u+W-G,B=P+F-G;if(D>=0&&D<g&&B>=0&&B<f){const H=D*f+B,Z=k[W*M+F];I+=w[H]*Z}}v[N]=I}return v}const R=function(w){const f=this.threshold();let g=h(w,f);return g&&(g=y(g,w.width,w.height),g=S(g,w.width,w.height),g=x(g,w.width,w.height),d(w,g)),w};return da.Mask=R,a.Factory.addGetterSetter(c.Node,"threshold",0,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),da}var fa={},Lc;function Sf(){if(Lc)return fa;Lc=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.Noise=void 0;const a=st(),c=Gt(),E=at(),T=function(O){const m=this.noise()*255,h=O.data,d=h.length,y=m/2;for(let S=0;S<d;S+=4)h[S+0]+=y-2*y*Math.random(),h[S+1]+=y-2*y*Math.random(),h[S+2]+=y-2*y*Math.random()};return fa.Noise=T,a.Factory.addGetterSetter(c.Node,"noise",.2,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),fa}var ga={},Gc;function xf(){if(Gc)return ga;Gc=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.Pixelate=void 0;const a=st(),c=At(),E=Gt(),T=at(),O=function(m){let h=Math.ceil(this.pixelSize()),d=m.width,y=m.height,S=Math.ceil(d/h),x=Math.ceil(y/h),R=m.data;if(h<=0){c.Util.error("pixelSize value can not be <= 0");return}for(let w=0;w<S;w+=1)for(let f=0;f<x;f+=1){let g=0,k=0,M=0,G=0;const v=w*h,u=v+h,P=f*h,N=P+h;let I=0;for(let W=v;W<u;W+=1)if(!(W>=d))for(let F=P;F<N;F+=1){if(F>=y)continue;const D=(d*F+W)*4;g+=R[D+0],k+=R[D+1],M+=R[D+2],G+=R[D+3],I+=1}g=g/I,k=k/I,M=M/I,G=G/I;for(let W=v;W<u;W+=1)if(!(W>=d))for(let F=P;F<N;F+=1){if(F>=y)continue;const D=(d*F+W)*4;R[D+0]=g,R[D+1]=k,R[D+2]=M,R[D+3]=G}}};return ga.Pixelate=O,a.Factory.addGetterSetter(E.Node,"pixelSize",8,(0,T.getNumberValidator)(),a.Factory.afterSetFilter),ga}var pa={},Bc;function bf(){if(Bc)return pa;Bc=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.Posterize=void 0;const a=st(),c=Gt(),E=at(),T=function(O){const m=Math.round(this.levels()*254)+1,h=O.data,d=h.length,y=255/m;for(let S=0;S<d;S+=1)h[S]=Math.floor(h[S]/y)*y};return pa.Posterize=T,a.Factory.addGetterSetter(c.Node,"levels",.5,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),pa}var ma={},jc;function Cf(){if(jc)return ma;jc=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.RGB=void 0;const a=st(),c=Gt(),E=at(),T=function(O){const m=O.data,h=m.length,d=this.red(),y=this.green(),S=this.blue();for(let x=0;x<h;x+=4){const R=(.34*m[x]+.5*m[x+1]+.16*m[x+2])/255;m[x]=R*d,m[x+1]=R*y,m[x+2]=R*S,m[x+3]=m[x+3]}};return ma.RGB=T,a.Factory.addGetterSetter(c.Node,"red",0,function(O){return this._filterUpToDate=!1,O>255?255:O<0?0:Math.round(O)}),a.Factory.addGetterSetter(c.Node,"green",0,function(O){return this._filterUpToDate=!1,O>255?255:O<0?0:Math.round(O)}),a.Factory.addGetterSetter(c.Node,"blue",0,E.RGBComponent,a.Factory.afterSetFilter),ma}var ya={},Uc;function Pf(){if(Uc)return ya;Uc=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.RGBA=void 0;const a=st(),c=Gt(),E=at(),T=function(O){const m=O.data,h=m.length,d=this.red(),y=this.green(),S=this.blue(),x=this.alpha();for(let R=0;R<h;R+=4){const w=1-x;m[R]=d*x+m[R]*w,m[R+1]=y*x+m[R+1]*w,m[R+2]=S*x+m[R+2]*w}};return ya.RGBA=T,a.Factory.addGetterSetter(c.Node,"red",0,function(O){return this._filterUpToDate=!1,O>255?255:O<0?0:Math.round(O)}),a.Factory.addGetterSetter(c.Node,"green",0,function(O){return this._filterUpToDate=!1,O>255?255:O<0?0:Math.round(O)}),a.Factory.addGetterSetter(c.Node,"blue",0,E.RGBComponent,a.Factory.afterSetFilter),a.Factory.addGetterSetter(c.Node,"alpha",1,function(O){return this._filterUpToDate=!1,O>1?1:O<0?0:O}),ya}var va={},zc;function kf(){if(zc)return va;zc=1,Object.defineProperty(va,"__esModule",{value:!0}),va.Sepia=void 0;const a=function(c){const E=c.data,T=E.length;for(let O=0;O<T;O+=4){const m=E[O+0],h=E[O+1],d=E[O+2];E[O+0]=Math.min(255,m*.393+h*.769+d*.189),E[O+1]=Math.min(255,m*.349+h*.686+d*.168),E[O+2]=Math.min(255,m*.272+h*.534+d*.131)}};return va.Sepia=a,va}var _a={},qc;function Ef(){if(qc)return _a;qc=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.Solarize=void 0;const a=function(c){const E=c.data,T=c.width,O=c.height,m=T*4;let h=O;do{const d=(h-1)*m;let y=T;do{const S=d+(y-1)*4;let x=E[S],R=E[S+1],w=E[S+2];x>127&&(x=255-x),R>127&&(R=255-R),w>127&&(w=255-w),E[S]=x,E[S+1]=R,E[S+2]=w}while(--y)}while(--h)};return _a.Solarize=a,_a}var wa={},Vc;function Rf(){if(Vc)return wa;Vc=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.Threshold=void 0;const a=st(),c=Gt(),E=at(),T=function(O){const m=this.threshold()*255,h=O.data,d=h.length;for(let y=0;y<d;y+=1)h[y]=h[y]<m?0:255};return wa.Threshold=T,a.Factory.addGetterSetter(c.Node,"threshold",.5,(0,E.getNumberValidator)(),a.Factory.afterSetFilter),wa}var Kc;function Tf(){if(Kc)return Fs;Kc=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.Konva=void 0;const a=bl(),c=Xd(),E=Jd(),T=Zd(),O=$d(),m=ef(),h=tf(),d=bh(),y=Nl(),S=Ch(),x=nf(),R=rf(),w=sf(),f=af(),g=Ph(),k=of(),M=lf(),G=uf(),v=cf(),u=hf(),P=df(),N=ff(),I=gf(),W=pf(),F=mf(),D=yf(),B=vf(),H=_f(),Z=wf(),se=Sf(),he=xf(),ne=bf(),Ce=Cf(),C=Pf(),L=kf(),q=Ef(),z=Rf();return Fs.Konva=a.Konva.Util._assign(a.Konva,{Arc:c.Arc,Arrow:E.Arrow,Circle:T.Circle,Ellipse:O.Ellipse,Image:m.Image,Label:h.Label,Tag:h.Tag,Line:d.Line,Path:y.Path,Rect:S.Rect,RegularPolygon:x.RegularPolygon,Ring:R.Ring,Sprite:w.Sprite,Star:f.Star,Text:g.Text,TextPath:k.TextPath,Transformer:M.Transformer,Wedge:G.Wedge,Filters:{Blur:v.Blur,Brighten:u.Brighten,Contrast:P.Contrast,Emboss:N.Emboss,Enhance:I.Enhance,Grayscale:W.Grayscale,HSL:F.HSL,HSV:D.HSV,Invert:B.Invert,Kaleidoscope:H.Kaleidoscope,Mask:Z.Mask,Noise:se.Noise,Pixelate:he.Pixelate,Posterize:ne.Posterize,RGB:Ce.RGB,RGBA:C.RGBA,Sepia:L.Sepia,Solarize:q.Solarize,Threshold:z.Threshold}}),Fs}var Af=ho.exports,Hc;function Of(){if(Hc)return ho.exports;Hc=1,Object.defineProperty(Af,"__esModule",{value:!0});const a=Tf();return ho.exports=a.Konva,ho.exports}Of();var uo={exports:{}},Wc;function Nf(){return Wc||(Wc=1,(function(a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.Konva=void 0;var E=bl();Object.defineProperty(c,"Konva",{enumerable:!0,get:function(){return E.Konva}});const T=bl();a.exports=T.Konva})(uo,uo.exports)),uo.exports}var Mf=Nf();const ka=Ea(Mf);var gl={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pl,Yc;function Ff(){return Yc||(Yc=1,pl=function(c){var E={},T=yh(),O=vh(),m=Object.assign;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),g=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),N=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}function W(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case x:return"Fragment";case S:return"Portal";case w:return"Profiler";case R:return"StrictMode";case M:return"Suspense";case G:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case g:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case v:return t=e.displayName||null,t!==null?t:W(e.type)||"Memo";case u:t=e._payload,e=e._init;try{return W(e(t))}catch{}}return null}function F(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function D(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function B(e){if(D(e)!==e)throw Error(h(188))}function H(e){var t=e.alternate;if(!t){if(t=D(e),t===null)throw Error(h(188));return t!==e?null:e}for(var r=e,s=t;;){var o=r.return;if(o===null)break;var _=o.alternate;if(_===null){if(s=o.return,s!==null){r=s;continue}break}if(o.child===_.child){for(_=o.child;_;){if(_===r)return B(o),e;if(_===s)return B(o),t;_=_.sibling}throw Error(h(188))}if(r.return!==s.return)r=o,s=_;else{for(var j=!1,le=o.child;le;){if(le===r){j=!0,r=o,s=_;break}if(le===s){j=!0,s=o,r=_;break}le=le.sibling}if(!j){for(le=_.child;le;){if(le===r){j=!0,r=_,s=o;break}if(le===s){j=!0,s=_,r=o;break}le=le.sibling}if(!j)throw Error(h(189))}}if(r.alternate!==s)throw Error(h(190))}if(r.tag!==3)throw Error(h(188));return r.stateNode.current===r?e:t}function Z(e){return e=H(e),e!==null?se(e):null}function se(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=se(e);if(t!==null)return t;e=e.sibling}return null}function he(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=he(e);if(t!==null)return t}e=e.sibling}return null}var ne=Array.isArray,Ce=c.getPublicInstance,C=c.getRootHostContext,L=c.getChildHostContext,q=c.prepareForCommit,z=c.resetAfterCommit,X=c.createInstance,_e=c.appendInitialChild,ie=c.finalizeInitialChildren,be=c.prepareUpdate,Te=c.shouldSetTextContent,ge=c.createTextInstance,V=c.scheduleTimeout,fe=c.cancelTimeout,ye=c.noTimeout,Me=c.isPrimaryRenderer,Ie=c.supportsMutation,Fe=c.supportsPersistence,Ke=c.supportsHydration,lt=c.getInstanceFromNode,He=c.preparePortalMount,Ot=c.getCurrentEventPriority,ft=c.detachDeletedInstance,xt=c.supportsMicrotasks,tr=c.scheduleMicrotask,Rt=c.supportsTestSelectors,Xt=c.findFiberRoot,gt=c.getBoundingRect,Ut=c.getTextContent,zt=c.isHiddenSubtree,mn=c.matchAccessibilityRole,Ct=c.setFocusIfFocusable,Qt=c.setupIntersectionObserver,tn=c.appendChild,Jt=c.appendChildToContainer,Bt=c.commitTextUpdate,Nt=c.commitMount,yn=c.commitUpdate,_r=c.insertBefore,nr=c.insertInContainerBefore,zn=c.removeChild,qe=c.removeChildFromContainer,jr=c.resetTextContent,wr=c.hideInstance,Ri=c.hideTextInstance,De=c.unhideInstance,rs=c.unhideTextInstance,Ra=c.clearContainer,is=c.cloneInstance,ss=c.createContainerChildSet,Ti=c.appendChildToContainerChildSet,So=c.finalizeContainerChildren,as=c.replaceContainerChildren,Sr=c.cloneHiddenInstance,xr=c.cloneHiddenTextInstance,os=c.canHydrateInstance,Ai=c.canHydrateTextInstance,St=c.canHydrateSuspenseInstance,Mt=c.isSuspenseInstancePending,ls=c.isSuspenseInstanceFallback,Oi=c.getSuspenseInstanceFallbackErrorDetails,Ni=c.registerSuspenseInstanceRetry,br=c.getNextHydratableSibling,xo=c.getFirstHydratableChild,rr=c.getFirstHydratableChildWithinContainer,Ur=c.getFirstHydratableChildWithinSuspenseInstance,ir=c.hydrateInstance,Mi=c.hydrateTextInstance,bo=c.hydrateSuspenseInstance,sr=c.getNextHydratableInstanceAfterSuspenseInstance,Ta=c.commitHydratedContainer,Cr=c.commitHydratedSuspenseInstance,Aa=c.clearSuspenseBoundary,us=c.clearSuspenseBoundaryFromContainer,Et=c.shouldDeleteUnhydratedTailInstances,Pr=c.didNotMatchHydratedContainerTextInstance,Xn=c.didNotMatchHydratedTextInstance,Fi;function qn(e){if(Fi===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Fi=t&&t[1]||""}return`
`+Fi+e}var zr=!1;function ci(e,t){if(!e||zr)return"";zr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(Re){var s=Re}Reflect.construct(e,[],t)}else{try{t.call()}catch(Re){s=Re}e.call(t.prototype)}else{try{throw Error()}catch(Re){s=Re}e()}}catch(Re){if(Re&&s&&typeof Re.stack=="string"){for(var o=Re.stack.split(`
`),_=s.stack.split(`
`),j=o.length-1,le=_.length-1;1<=j&&0<=le&&o[j]!==_[le];)le--;for(;1<=j&&0<=le;j--,le--)if(o[j]!==_[le]){if(j!==1||le!==1)do if(j--,le--,0>le||o[j]!==_[le]){var ve=`
`+o[j].replace(" at new "," at ");return e.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",e.displayName)),ve}while(1<=j&&0<=le);break}}}finally{zr=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?qn(e):""}var cs=Object.prototype.hasOwnProperty,Qn=[],kr=-1;function Dn(e){return{current:e}}function yt(e){0>kr||(e.current=Qn[kr],Qn[kr]=null,kr--)}function Ve(e,t){kr++,Qn[kr]=e.current,e.current=t}var Jn={},qt=Dn(Jn),Vt=Dn(!1),Ln=Jn;function Er(e,t){var r=e.type.contextTypes;if(!r)return Jn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},_;for(_ in r)o[_]=t[_];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function nn(e){return e=e.childContextTypes,e!=null}function hi(){yt(Vt),yt(qt)}function pt(e,t,r){if(qt.current!==Jn)throw Error(h(168));Ve(qt,t),Ve(Vt,r)}function qr(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(h(108,F(e)||"Unknown",o));return m({},r,s)}function ar(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jn,Ln=qt.current,Ve(qt,e),Ve(Vt,Vt.current),!0}function Rr(e,t,r){var s=e.stateNode;if(!s)throw Error(h(169));r?(e=qr(e,t,Ln),s.__reactInternalMemoizedMergedChildContext=e,yt(Vt),yt(qt),Ve(qt,e)):yt(Vt),Ve(Vt,r)}var vn=Math.clz32?Math.clz32:Oa,hs=Math.log,Ii=Math.LN2;function Oa(e){return e>>>=0,e===0?32:31-(hs(e)/Ii|0)|0}var Tr=64,di=4194304;function fi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function rt(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,o=e.suspendedLanes,_=e.pingedLanes,j=r&268435455;if(j!==0){var le=j&~o;le!==0?s=fi(le):(_&=j,_!==0&&(s=fi(_)))}else j=r&~o,j!==0?s=fi(j):_!==0&&(s=fi(_));if(s===0)return 0;if(t!==0&&t!==s&&(t&o)===0&&(o=s&-s,_=t&-t,o>=_||o===16&&(_&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-vn(t),o=1<<r,s|=e[r],t&=~o;return s}function Na(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Co(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,_=e.pendingLanes;0<_;){var j=31-vn(_),le=1<<j,ve=o[j];ve===-1?((le&r)===0||(le&s)!==0)&&(o[j]=Na(le,t)):ve<=t&&(e.expiredLanes|=le),_&=~le}}function ds(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ln(){var e=Tr;return Tr<<=1,(Tr&4194240)===0&&(Tr=64),e}function or(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function lr(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vn(t),e[t]=r}function ur(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-vn(r),_=1<<o;t[o]=0,s[o]=-1,e[o]=-1,r&=~_}}function Di(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-vn(r),o=1<<s;o&t|e[s]&t&&(e[s]|=t),r&=~o}}var ot=0;function Ft(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var bn=O.unstable_scheduleCallback,Vr=O.unstable_cancelCallback,gi=O.unstable_shouldYield,fs=O.unstable_requestPaint,_t=O.unstable_now,gs=O.unstable_ImmediatePriority,Vn=O.unstable_UserBlockingPriority,pi=O.unstable_NormalPriority,Ma=O.unstable_IdlePriority,Kr=null,un=null;function ps(e){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Kr,e,void 0,(e.current.flags&128)===128)}catch{}}function Fa(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gn=typeof Object.is=="function"?Object.is:Fa,_n=null,Li=!1,ms=!1;function mi(e){_n===null?_n=[e]:_n.push(e)}function Gi(e){Li=!0,mi(e)}function Cn(){if(!ms&&_n!==null){ms=!0;var e=0,t=ot;try{var r=_n;for(ot=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}_n=null,Li=!1}catch(o){throw _n!==null&&(_n=_n.slice(e+1)),bn(gs,Cn),o}finally{ot=t,ms=!1}}return null}var Hr=[],Wr=0,Bi=null,Yr=0,cn=[],wn=0,Kn=null,Pn=1,kn="";function cr(e,t){Hr[Wr++]=Yr,Hr[Wr++]=Bi,Bi=e,Yr=t}function Ia(e,t,r){cn[wn++]=Pn,cn[wn++]=kn,cn[wn++]=Kn,Kn=e;var s=Pn;e=kn;var o=32-vn(s)-1;s&=~(1<<o),r+=1;var _=32-vn(t)+o;if(30<_){var j=o-o%5;_=(s&(1<<j)-1).toString(32),s>>=j,o-=j,Pn=1<<32-vn(t)+o|r<<o|s,kn=_+e}else Pn=1<<_|r<<o|s,kn=e}function hr(e){e.return!==null&&(cr(e,1),Ia(e,1,0))}function yi(e){for(;e===Bi;)Bi=Hr[--Wr],Hr[Wr]=null,Yr=Hr[--Wr],Hr[Wr]=null;for(;e===Kn;)Kn=cn[--wn],cn[wn]=null,kn=cn[--wn],cn[wn]=null,Pn=cn[--wn],cn[wn]=null}var rn=null,hn=null,vt=!1,Tt=!1,sn=null;function Xr(e,t){var r=Yn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ys(e,t){switch(e.tag){case 5:return t=os(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,rn=e,hn=xo(t),!0):!1;case 6:return t=Ai(t,e.pendingProps),t!==null?(e.stateNode=t,rn=e,hn=null,!0):!1;case 13:if(t=St(t),t!==null){var r=Kn!==null?{id:Pn,overflow:kn}:null;return e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Yn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rn=e,hn=null,!0}return!1;default:return!1}}function Qr(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ji(e){if(vt){var t=hn;if(t){var r=t;if(!ys(e,t)){if(Qr(e))throw Error(h(418));t=br(r);var s=rn;t&&ys(e,t)?Xr(s,r):(e.flags=e.flags&-4097|2,vt=!1,rn=e)}}else{if(Qr(e))throw Error(h(418));e.flags=e.flags&-4097|2,vt=!1,rn=e}}}function vs(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rn=e}function Ar(e){if(!Ke||e!==rn)return!1;if(!vt)return vs(e),vt=!0,!1;if(e.tag!==3&&(e.tag!==5||Et(e.type)&&!Te(e.type,e.memoizedProps))){var t=hn;if(t){if(Qr(e))throw Ui(),Error(h(418));for(;t;)Xr(e,t),t=br(t)}}if(vs(e),e.tag===13){if(!Ke)throw Error(h(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(317));hn=sr(e)}else hn=rn?br(e.stateNode):null;return!0}function Ui(){for(var e=hn;e;)e=br(e)}function En(){Ke&&(hn=rn=null,Tt=vt=!1)}function vi(e){sn===null?sn=[e]:sn.push(e)}var _s=d.ReactCurrentBatchConfig;function Or(e,t){if(Gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var o=r[s];if(!cs.call(t,o)||!Gn(e[o],t[o]))return!1}return!0}function ws(e){switch(e.tag){case 5:return qn(e.type);case 16:return qn("Lazy");case 13:return qn("Suspense");case 19:return qn("SuspenseList");case 0:case 2:case 15:return e=ci(e.type,!1),e;case 11:return e=ci(e.type.render,!1),e;case 1:return e=ci(e.type,!0),e;default:return""}}function Jr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(h(309));var s=r.stateNode}if(!s)throw Error(h(147,e));var o=s,_=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===_?t.ref:(t=function(j){var le=o.refs;j===null?delete le[_]:le[_]=j},t._stringRef=_,t)}if(typeof e!="string")throw Error(h(284));if(!r._owner)throw Error(h(290,e))}return e}function zi(e,t){throw e=Object.prototype.toString.call(t),Error(h(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qi(e){var t=e._init;return t(e._payload)}function _i(e){function t(pe,ue){if(e){var we=pe.deletions;we===null?(pe.deletions=[ue],pe.flags|=16):we.push(ue)}}function r(pe,ue){if(!e)return null;for(;ue!==null;)t(pe,ue),ue=ue.sibling;return null}function s(pe,ue){for(pe=new Map;ue!==null;)ue.key!==null?pe.set(ue.key,ue):pe.set(ue.index,ue),ue=ue.sibling;return pe}function o(pe,ue){return pe=si(pe,ue),pe.index=0,pe.sibling=null,pe}function _(pe,ue,we){return pe.index=we,e?(we=pe.alternate,we!==null?(we=we.index,we<ue?(pe.flags|=2,ue):we):(pe.flags|=2,ue)):(pe.flags|=1048576,ue)}function j(pe){return e&&pe.alternate===null&&(pe.flags|=2),pe}function le(pe,ue,we,Be){return ue===null||ue.tag!==6?(ue=rl(we,pe.mode,Be),ue.return=pe,ue):(ue=o(ue,we),ue.return=pe,ue)}function ve(pe,ue,we,Be){var We=we.type;return We===x?ze(pe,ue,we.props.children,Be,we.key):ue!==null&&(ue.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===u&&qi(We)===ue.type)?(Be=o(ue,we.props),Be.ref=Jr(pe,ue,we),Be.return=pe,Be):(Be=so(we.type,we.key,we.props,null,pe.mode,Be),Be.ref=Jr(pe,ue,we),Be.return=pe,Be)}function Re(pe,ue,we,Be){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==we.containerInfo||ue.stateNode.implementation!==we.implementation?(ue=il(we,pe.mode,Be),ue.return=pe,ue):(ue=o(ue,we.children||[]),ue.return=pe,ue)}function ze(pe,ue,we,Be,We){return ue===null||ue.tag!==7?(ue=ki(we,pe.mode,Be,We),ue.return=pe,ue):(ue=o(ue,we),ue.return=pe,ue)}function Je(pe,ue,we){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=rl(""+ue,pe.mode,we),ue.return=pe,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case y:return we=so(ue.type,ue.key,ue.props,null,pe.mode,we),we.ref=Jr(pe,null,ue),we.return=pe,we;case S:return ue=il(ue,pe.mode,we),ue.return=pe,ue;case u:var Be=ue._init;return Je(pe,Be(ue._payload),we)}if(ne(ue)||I(ue))return ue=ki(ue,pe.mode,we,null),ue.return=pe,ue;zi(pe,ue)}return null}function Ge(pe,ue,we,Be){var We=ue!==null?ue.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return We!==null?null:le(pe,ue,""+we,Be);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case y:return we.key===We?ve(pe,ue,we,Be):null;case S:return we.key===We?Re(pe,ue,we,Be):null;case u:return We=we._init,Ge(pe,ue,We(we._payload),Be)}if(ne(we)||I(we))return We!==null?null:ze(pe,ue,we,Be,null);zi(pe,we)}return null}function bt(pe,ue,we,Be,We){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return pe=pe.get(we)||null,le(ue,pe,""+Be,We);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case y:return pe=pe.get(Be.key===null?we:Be.key)||null,ve(ue,pe,Be,We);case S:return pe=pe.get(Be.key===null?we:Be.key)||null,Re(ue,pe,Be,We);case u:var et=Be._init;return bt(pe,ue,we,et(Be._payload),We)}if(ne(Be)||I(Be))return pe=pe.get(we)||null,ze(ue,pe,Be,We,null);zi(ue,Be)}return null}function wt(pe,ue,we,Be){for(var We=null,et=null,Ze=ue,ut=ue=0,$t=null;Ze!==null&&ut<we.length;ut++){Ze.index>ut?($t=Ze,Ze=null):$t=Ze.sibling;var ct=Ge(pe,Ze,we[ut],Be);if(ct===null){Ze===null&&(Ze=$t);break}e&&Ze&&ct.alternate===null&&t(pe,Ze),ue=_(ct,ue,ut),et===null?We=ct:et.sibling=ct,et=ct,Ze=$t}if(ut===we.length)return r(pe,Ze),vt&&cr(pe,ut),We;if(Ze===null){for(;ut<we.length;ut++)Ze=Je(pe,we[ut],Be),Ze!==null&&(ue=_(Ze,ue,ut),et===null?We=Ze:et.sibling=Ze,et=Ze);return vt&&cr(pe,ut),We}for(Ze=s(pe,Ze);ut<we.length;ut++)$t=bt(Ze,pe,ut,we[ut],Be),$t!==null&&(e&&$t.alternate!==null&&Ze.delete($t.key===null?ut:$t.key),ue=_($t,ue,ut),et===null?We=$t:et.sibling=$t,et=$t);return e&&Ze.forEach(function(ai){return t(pe,ai)}),vt&&cr(pe,ut),We}function Mn(pe,ue,we,Be){var We=I(we);if(typeof We!="function")throw Error(h(150));if(we=We.call(we),we==null)throw Error(h(151));for(var et=We=null,Ze=ue,ut=ue=0,$t=null,ct=we.next();Ze!==null&&!ct.done;ut++,ct=we.next()){Ze.index>ut?($t=Ze,Ze=null):$t=Ze.sibling;var ai=Ge(pe,Ze,ct.value,Be);if(ai===null){Ze===null&&(Ze=$t);break}e&&Ze&&ai.alternate===null&&t(pe,Ze),ue=_(ai,ue,ut),et===null?We=ai:et.sibling=ai,et=ai,Ze=$t}if(ct.done)return r(pe,Ze),vt&&cr(pe,ut),We;if(Ze===null){for(;!ct.done;ut++,ct=we.next())ct=Je(pe,ct.value,Be),ct!==null&&(ue=_(ct,ue,ut),et===null?We=ct:et.sibling=ct,et=ct);return vt&&cr(pe,ut),We}for(Ze=s(pe,Ze);!ct.done;ut++,ct=we.next())ct=bt(Ze,pe,ut,ct.value,Be),ct!==null&&(e&&ct.alternate!==null&&Ze.delete(ct.key===null?ut:ct.key),ue=_(ct,ue,ut),et===null?We=ct:et.sibling=ct,et=ct);return e&&Ze.forEach(function(bd){return t(pe,bd)}),vt&&cr(pe,ut),We}function Lr(pe,ue,we,Be){if(typeof we=="object"&&we!==null&&we.type===x&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case y:e:{for(var We=we.key,et=ue;et!==null;){if(et.key===We){if(We=we.type,We===x){if(et.tag===7){r(pe,et.sibling),ue=o(et,we.props.children),ue.return=pe,pe=ue;break e}}else if(et.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===u&&qi(We)===et.type){r(pe,et.sibling),ue=o(et,we.props),ue.ref=Jr(pe,et,we),ue.return=pe,pe=ue;break e}r(pe,et);break}else t(pe,et);et=et.sibling}we.type===x?(ue=ki(we.props.children,pe.mode,Be,we.key),ue.return=pe,pe=ue):(Be=so(we.type,we.key,we.props,null,pe.mode,Be),Be.ref=Jr(pe,ue,we),Be.return=pe,pe=Be)}return j(pe);case S:e:{for(et=we.key;ue!==null;){if(ue.key===et)if(ue.tag===4&&ue.stateNode.containerInfo===we.containerInfo&&ue.stateNode.implementation===we.implementation){r(pe,ue.sibling),ue=o(ue,we.children||[]),ue.return=pe,pe=ue;break e}else{r(pe,ue);break}else t(pe,ue);ue=ue.sibling}ue=il(we,pe.mode,Be),ue.return=pe,pe=ue}return j(pe);case u:return et=we._init,Lr(pe,ue,et(we._payload),Be)}if(ne(we))return wt(pe,ue,we,Be);if(I(we))return Mn(pe,ue,we,Be);zi(pe,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ue!==null&&ue.tag===6?(r(pe,ue.sibling),ue=o(ue,we),ue.return=pe,pe=ue):(r(pe,ue),ue=rl(we,pe.mode,Be),ue.return=pe,pe=ue),j(pe)):r(pe,ue)}return Lr}var Zr=_i(!0),Vi=_i(!1),$r=Dn(null),Ki=null,Nr=null,Ss=null;function Hi(){Ss=Nr=Ki=null}function xs(e,t,r){Me?(Ve($r,t._currentValue),t._currentValue=r):(Ve($r,t._currentValue2),t._currentValue2=r)}function bs(e){var t=$r.current;yt($r),Me?e._currentValue=t:e._currentValue2=t}function Wi(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function dr(e,t){Ki=e,Ss=Nr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(An=!0),e.firstContext=null)}function Sn(e){var t=Me?e._currentValue:e._currentValue2;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},Nr===null){if(Ki===null)throw Error(h(308));Nr=e,Ki.dependencies={lanes:0,firstContext:e}}else Nr=Nr.next=e;return t}var fr=null;function Cs(e){fr===null?fr=[e]:fr.push(e)}function Da(e,t,r,s){var o=t.interleaved;return o===null?(r.next=r,Cs(t)):(r.next=o.next,o.next=r),t.interleaved=r,Hn(e,s)}function Hn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Bn=!1;function jn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pt(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function It(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(nt&2)!==0){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,Hn(e,r)}return o=s.interleaved,o===null?(t.next=t,Cs(s)):(t.next=o.next,o.next=t),s.interleaved=t,Hn(e,r)}function Yi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Di(e,r)}}function Xi(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var o=null,_=null;if(r=r.firstBaseUpdate,r!==null){do{var j={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};_===null?o=_=j:_=_.next=j,r=r.next}while(r!==null);_===null?o=_=t:_=_.next=t}else o=_=t;r={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:_,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function wi(e,t,r,s){var o=e.updateQueue;Bn=!1;var _=o.firstBaseUpdate,j=o.lastBaseUpdate,le=o.shared.pending;if(le!==null){o.shared.pending=null;var ve=le,Re=ve.next;ve.next=null,j===null?_=Re:j.next=Re,j=ve;var ze=e.alternate;ze!==null&&(ze=ze.updateQueue,le=ze.lastBaseUpdate,le!==j&&(le===null?ze.firstBaseUpdate=Re:le.next=Re,ze.lastBaseUpdate=ve))}if(_!==null){var Je=o.baseState;j=0,ze=Re=ve=null,le=_;do{var Ge=le.lane,bt=le.eventTime;if((s&Ge)===Ge){ze!==null&&(ze=ze.next={eventTime:bt,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var wt=e,Mn=le;switch(Ge=t,bt=r,Mn.tag){case 1:if(wt=Mn.payload,typeof wt=="function"){Je=wt.call(bt,Je,Ge);break e}Je=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Mn.payload,Ge=typeof wt=="function"?wt.call(bt,Je,Ge):wt,Ge==null)break e;Je=m({},Je,Ge);break e;case 2:Bn=!0}}le.callback!==null&&le.lane!==0&&(e.flags|=64,Ge=o.effects,Ge===null?o.effects=[le]:Ge.push(le))}else bt={eventTime:bt,lane:Ge,tag:le.tag,payload:le.payload,callback:le.callback,next:null},ze===null?(Re=ze=bt,ve=Je):ze=ze.next=bt,j|=Ge;if(le=le.next,le===null){if(le=o.shared.pending,le===null)break;Ge=le,le=Ge.next,Ge.next=null,o.lastBaseUpdate=Ge,o.shared.pending=null}}while(!0);if(ze===null&&(ve=Je),o.baseState=ve,o.firstBaseUpdate=Re,o.lastBaseUpdate=ze,t=o.shared.interleaved,t!==null){o=t;do j|=o.lane,o=o.next;while(o!==t)}else _===null&&(o.shared.lanes=0);xi|=j,e.lanes=j,e.memoizedState=Je}}function gr(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(o!==null){if(s.callback=null,s=r,typeof o!="function")throw Error(h(191,o));o.call(s)}}}var Mr={},Kt=Dn(Mr),Tn=Dn(Mr),Fr=Dn(Mr);function n(e){if(e===Mr)throw Error(h(174));return e}function i(e,t){Ve(Fr,t),Ve(Tn,e),Ve(Kt,Mr),e=C(t),yt(Kt),Ve(Kt,e)}function l(){yt(Kt),yt(Tn),yt(Fr)}function p(e){var t=n(Fr.current),r=n(Kt.current);t=L(r,e.type,t),r!==t&&(Ve(Tn,e),Ve(Kt,t))}function b(e){Tn.current===e&&(yt(Kt),yt(Tn))}var A=Dn(0);function U(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Mt(r)||ls(r)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var K=[];function J(){for(var e=0;e<K.length;e++){var t=K[e];Me?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}K.length=0}var ee=d.ReactCurrentDispatcher,ae=d.ReactCurrentBatchConfig,Y=0,te=null,Q=null,$=null,re=!1,oe=!1,ce=0,de=0;function me(){throw Error(h(321))}function Se(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Gn(e[r],t[r]))return!1;return!0}function Ee(e,t,r,s,o,_){if(Y=_,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ee.current=e===null||e.memoizedState===null?Zh:$h,e=r(s,o),oe){_=0;do{if(oe=!1,ce=0,25<=_)throw Error(h(301));_+=1,$=Q=null,t.updateQueue=null,ee.current=ed,e=r(s,o)}while(oe)}if(ee.current=Ga,t=Q!==null&&Q.next!==null,Y=0,$=Q=te=null,re=!1,t)throw Error(h(300));return e}function Ne(){var e=ce!==0;return ce=0,e}function Pe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $===null?te.memoizedState=$=e:$=$.next=e,$}function ke(){if(Q===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=Q.next;var t=$===null?te.memoizedState:$.next;if(t!==null)$=t,Q=e;else{if(e===null)throw Error(h(310));Q=e,e={memoizedState:Q.memoizedState,baseState:Q.baseState,baseQueue:Q.baseQueue,queue:Q.queue,next:null},$===null?te.memoizedState=$=e:$=$.next=e}return $}function Oe(e,t){return typeof t=="function"?t(e):t}function Ae(e){var t=ke(),r=t.queue;if(r===null)throw Error(h(311));r.lastRenderedReducer=e;var s=Q,o=s.baseQueue,_=r.pending;if(_!==null){if(o!==null){var j=o.next;o.next=_.next,_.next=j}s.baseQueue=o=_,r.pending=null}if(o!==null){_=o.next,s=s.baseState;var le=j=null,ve=null,Re=_;do{var ze=Re.lane;if((Y&ze)===ze)ve!==null&&(ve=ve.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),s=Re.hasEagerState?Re.eagerState:e(s,Re.action);else{var Je={lane:ze,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ve===null?(le=ve=Je,j=s):ve=ve.next=Je,te.lanes|=ze,xi|=ze}Re=Re.next}while(Re!==null&&Re!==_);ve===null?j=s:ve.next=le,Gn(s,t.memoizedState)||(An=!0),t.memoizedState=s,t.baseState=j,t.baseQueue=ve,r.lastRenderedState=s}if(e=r.interleaved,e!==null){o=e;do _=o.lane,te.lanes|=_,xi|=_,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Le(e){var t=ke(),r=t.queue;if(r===null)throw Error(h(311));r.lastRenderedReducer=e;var s=r.dispatch,o=r.pending,_=t.memoizedState;if(o!==null){r.pending=null;var j=o=o.next;do _=e(_,j.action),j=j.next;while(j!==o);Gn(_,t.memoizedState)||(An=!0),t.memoizedState=_,t.baseQueue===null&&(t.baseState=_),r.lastRenderedState=_}return[_,s]}function Xe(){}function Qe(e,t){var r=te,s=ke(),o=t(),_=!Gn(s.memoizedState,o);if(_&&(s.memoizedState=o,An=!0),s=s.queue,Po(Ye.bind(null,r,s,e),[e]),s.getSnapshot!==t||_||$!==null&&$.memoizedState.tag&1){if(r.flags|=2048,Dt(9,dn.bind(null,r,s,o,t),void 0,null),Zt===null)throw Error(h(349));(Y&30)!==0||$e(r,t,o)}return o}function $e(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function dn(e,t,r,s){t.value=r,t.getSnapshot=s,Ht(t)&&Wt(e)}function Ye(e,t,r){return r(function(){Ht(t)&&Wt(e)})}function Ht(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Gn(e,r)}catch{return!0}}function Wt(e){var t=Hn(e,1);t!==null&&Wn(t,e,1,-1)}function Si(e){var t=Pe();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oe,lastRenderedState:e},t.queue=e,e=e.dispatch=Jh.bind(null,te,e),[t.memoizedState,e]}function Dt(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function pr(){return ke().memoizedState}function ei(e,t,r,s){var o=Pe();te.flags|=e,o.memoizedState=Dt(1|t,r,void 0,s===void 0?null:s)}function La(e,t,r,s){var o=ke();s=s===void 0?null:s;var _=void 0;if(Q!==null){var j=Q.memoizedState;if(_=j.destroy,s!==null&&Se(s,j.deps)){o.memoizedState=Dt(t,r,_,s);return}}te.flags|=e,o.memoizedState=Dt(1|t,r,_,s)}function Dl(e,t){return ei(8390656,8,e,t)}function Po(e,t){return La(2048,8,e,t)}function Ll(e,t){return La(4,2,e,t)}function Gl(e,t){return La(4,4,e,t)}function Bl(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jl(e,t,r){return r=r!=null?r.concat([e]):null,La(4,4,Bl.bind(null,t,e),r)}function ko(){}function Ul(e,t){var r=ke();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Se(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function zl(e,t){var r=ke();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Se(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function ql(e,t,r){return(Y&21)===0?(e.baseState&&(e.baseState=!1,An=!0),e.memoizedState=r):(Gn(r,t)||(r=ln(),te.lanes|=r,xi|=r,e.baseState=!0),t)}function Xh(e,t){var r=ot;ot=r!==0&&4>r?r:4,e(!0);var s=ae.transition;ae.transition={};try{e(!1),t()}finally{ot=r,ae.transition=s}}function Vl(){return ke().memoizedState}function Qh(e,t,r){var s=ri(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Kl(e))Hl(t,r);else if(r=Da(e,t,r,s),r!==null){var o=pn();Wn(r,e,s,o),Wl(r,t,s)}}function Jh(e,t,r){var s=ri(e),o={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Kl(e))Hl(t,o);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=t.lastRenderedReducer,_!==null))try{var j=t.lastRenderedState,le=_(j,r);if(o.hasEagerState=!0,o.eagerState=le,Gn(le,j)){var ve=t.interleaved;ve===null?(o.next=o,Cs(t)):(o.next=ve.next,ve.next=o),t.interleaved=o;return}}catch{}finally{}r=Da(e,t,o,s),r!==null&&(o=pn(),Wn(r,e,s,o),Wl(r,t,s))}}function Kl(e){var t=e.alternate;return e===te||t!==null&&t===te}function Hl(e,t){oe=re=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Wl(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Di(e,r)}}var Ga={readContext:Sn,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},Zh={readContext:Sn,useCallback:function(e,t){return Pe().memoizedState=[e,t===void 0?null:t],e},useContext:Sn,useEffect:Dl,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ei(4194308,4,Bl.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ei(4194308,4,e,t)},useInsertionEffect:function(e,t){return ei(4,2,e,t)},useMemo:function(e,t){var r=Pe();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Pe();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Qh.bind(null,te,e),[s.memoizedState,e]},useRef:function(e){var t=Pe();return e={current:e},t.memoizedState=e},useState:Si,useDebugValue:ko,useDeferredValue:function(e){return Pe().memoizedState=e},useTransition:function(){var e=Si(!1),t=e[0];return e=Xh.bind(null,e[1]),Pe().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=te,o=Pe();if(vt){if(r===void 0)throw Error(h(407));r=r()}else{if(r=t(),Zt===null)throw Error(h(349));(Y&30)!==0||$e(s,t,r)}o.memoizedState=r;var _={value:r,getSnapshot:t};return o.queue=_,Dl(Ye.bind(null,s,_,e),[e]),s.flags|=2048,Dt(9,dn.bind(null,s,_,r,t),void 0,null),r},useId:function(){var e=Pe(),t=Zt.identifierPrefix;if(vt){var r=kn,s=Pn;r=(s&~(1<<32-vn(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ce++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=de++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$h={readContext:Sn,useCallback:Ul,useContext:Sn,useEffect:Po,useImperativeHandle:jl,useInsertionEffect:Ll,useLayoutEffect:Gl,useMemo:zl,useReducer:Ae,useRef:pr,useState:function(){return Ae(Oe)},useDebugValue:ko,useDeferredValue:function(e){var t=ke();return ql(t,Q.memoizedState,e)},useTransition:function(){var e=Ae(Oe)[0],t=ke().memoizedState;return[e,t]},useMutableSource:Xe,useSyncExternalStore:Qe,useId:Vl,unstable_isNewReconciler:!1},ed={readContext:Sn,useCallback:Ul,useContext:Sn,useEffect:Po,useImperativeHandle:jl,useInsertionEffect:Ll,useLayoutEffect:Gl,useMemo:zl,useReducer:Le,useRef:pr,useState:function(){return Le(Oe)},useDebugValue:ko,useDeferredValue:function(e){var t=ke();return Q===null?t.memoizedState=e:ql(t,Q.memoizedState,e)},useTransition:function(){var e=Le(Oe)[0],t=ke().memoizedState;return[e,t]},useMutableSource:Xe,useSyncExternalStore:Qe,useId:Vl,unstable_isNewReconciler:!1};function Zn(e,t){if(e&&e.defaultProps){t=m({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Eo(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:m({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ba={isMounted:function(e){return(e=e._reactInternals)?D(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=pn(),o=ri(e),_=Rn(s,o);_.payload=t,r!=null&&(_.callback=r),t=It(e,_,o),t!==null&&(Wn(t,e,o,s),Yi(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=pn(),o=ri(e),_=Rn(s,o);_.tag=1,_.payload=t,r!=null&&(_.callback=r),t=It(e,_,o),t!==null&&(Wn(t,e,o,s),Yi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=pn(),s=ri(e),o=Rn(r,s);o.tag=2,t!=null&&(o.callback=t),t=It(e,o,s),t!==null&&(Wn(t,e,s,r),Yi(t,e,s))}};function Yl(e,t,r,s,o,_,j){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,_,j):t.prototype&&t.prototype.isPureReactComponent?!Or(r,s)||!Or(o,_):!0}function Xl(e,t,r){var s=!1,o=Jn,_=t.contextType;return typeof _=="object"&&_!==null?_=Sn(_):(o=nn(t)?Ln:qt.current,s=t.contextTypes,_=(s=s!=null)?Er(e,o):Jn),t=new t(r,_),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=_),t}function Ql(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ro(e,t,r,s){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},jn(e);var _=t.contextType;typeof _=="object"&&_!==null?o.context=Sn(_):(_=nn(t)?Ln:qt.current,o.context=Er(e,_)),o.state=e.memoizedState,_=t.getDerivedStateFromProps,typeof _=="function"&&(Eo(e,t,_,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ba.enqueueReplaceState(o,o.state,null),wi(e,r,o,s),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Qi(e,t){try{var r="",s=t;do r+=ws(s),s=s.return;while(s);var o=r}catch(_){o=`
Error generating stack: `+_.message+`
`+_.stack}return{value:e,source:t,stack:o,digest:null}}function To(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ao(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var td=typeof WeakMap=="function"?WeakMap:Map;function Jl(e,t,r){r=Rn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){$a||($a=!0,Qo=s),Ao(e,t)},r}function Zl(e,t,r){r=Rn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;r.payload=function(){return s(o)},r.callback=function(){Ao(e,t)}}var _=e.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){Ao(e,t),typeof s!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var j=t.stack;this.componentDidCatch(t.value,{componentStack:j!==null?j:""})}),r}function $l(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new td;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(r)||(o.add(r),e=pd.bind(null,e,t,r),t.then(e,e))}function eu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tu(e,t,r,s,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Rn(-1,1),t.tag=2,It(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var nd=d.ReactCurrentOwner,An=!1;function xn(e,t,r,s){t.child=e===null?Vi(t,null,r,s):Zr(t,e.child,r,s)}function nu(e,t,r,s,o){r=r.render;var _=t.ref;return dr(t,o),s=Ee(e,t,r,s,_,o),r=Ne(),e!==null&&!An?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ir(e,t,o)):(vt&&r&&hr(t),t.flags|=1,xn(e,t,s,o),t.child)}function ru(e,t,r,s,o){if(e===null){var _=r.type;return typeof _=="function"&&!nl(_)&&_.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=_,iu(e,t,_,s,o)):(e=so(r.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(_=e.child,(e.lanes&o)===0){var j=_.memoizedProps;if(r=r.compare,r=r!==null?r:Or,r(j,s)&&e.ref===t.ref)return Ir(e,t,o)}return t.flags|=1,e=si(_,s),e.ref=t.ref,e.return=t,t.child=e}function iu(e,t,r,s,o){if(e!==null){var _=e.memoizedProps;if(Or(_,s)&&e.ref===t.ref)if(An=!1,t.pendingProps=s=_,(e.lanes&o)!==0)(e.flags&131072)!==0&&(An=!0);else return t.lanes=e.lanes,Ir(e,t,o)}return Oo(e,t,r,s,o)}function su(e,t,r){var s=t.pendingProps,o=s.children,_=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Zi,Un),Un|=r;else{if((r&1073741824)===0)return e=_!==null?_.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ve(Zi,Un),Un|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=_!==null?_.baseLanes:r,Ve(Zi,Un),Un|=s}else _!==null?(s=_.baseLanes|r,t.memoizedState=null):s=r,Ve(Zi,Un),Un|=s;return xn(e,t,o,r),t.child}function au(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Oo(e,t,r,s,o){var _=nn(r)?Ln:qt.current;return _=Er(t,_),dr(t,o),r=Ee(e,t,r,s,_,o),s=Ne(),e!==null&&!An?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ir(e,t,o)):(vt&&s&&hr(t),t.flags|=1,xn(e,t,r,o),t.child)}function ou(e,t,r,s,o){if(nn(r)){var _=!0;ar(t)}else _=!1;if(dr(t,o),t.stateNode===null)Ua(e,t),Xl(t,r,s),Ro(t,r,s,o),s=!0;else if(e===null){var j=t.stateNode,le=t.memoizedProps;j.props=le;var ve=j.context,Re=r.contextType;typeof Re=="object"&&Re!==null?Re=Sn(Re):(Re=nn(r)?Ln:qt.current,Re=Er(t,Re));var ze=r.getDerivedStateFromProps,Je=typeof ze=="function"||typeof j.getSnapshotBeforeUpdate=="function";Je||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(le!==s||ve!==Re)&&Ql(t,j,s,Re),Bn=!1;var Ge=t.memoizedState;j.state=Ge,wi(t,s,j,o),ve=t.memoizedState,le!==s||Ge!==ve||Vt.current||Bn?(typeof ze=="function"&&(Eo(t,r,ze,s),ve=t.memoizedState),(le=Bn||Yl(t,r,le,s,Ge,ve,Re))?(Je||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(t.flags|=4194308)):(typeof j.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=ve),j.props=s,j.state=ve,j.context=Re,s=le):(typeof j.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{j=t.stateNode,Pt(e,t),le=t.memoizedProps,Re=t.type===t.elementType?le:Zn(t.type,le),j.props=Re,Je=t.pendingProps,Ge=j.context,ve=r.contextType,typeof ve=="object"&&ve!==null?ve=Sn(ve):(ve=nn(r)?Ln:qt.current,ve=Er(t,ve));var bt=r.getDerivedStateFromProps;(ze=typeof bt=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(le!==Je||Ge!==ve)&&Ql(t,j,s,ve),Bn=!1,Ge=t.memoizedState,j.state=Ge,wi(t,s,j,o);var wt=t.memoizedState;le!==Je||Ge!==wt||Vt.current||Bn?(typeof bt=="function"&&(Eo(t,r,bt,s),wt=t.memoizedState),(Re=Bn||Yl(t,r,Re,s,Ge,wt,ve)||!1)?(ze||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(s,wt,ve),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(s,wt,ve)),typeof j.componentDidUpdate=="function"&&(t.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof j.componentDidUpdate!="function"||le===e.memoizedProps&&Ge===e.memoizedState||(t.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||le===e.memoizedProps&&Ge===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=wt),j.props=s,j.state=wt,j.context=ve,s=Re):(typeof j.componentDidUpdate!="function"||le===e.memoizedProps&&Ge===e.memoizedState||(t.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||le===e.memoizedProps&&Ge===e.memoizedState||(t.flags|=1024),s=!1)}return No(e,t,r,s,_,o)}function No(e,t,r,s,o,_){au(e,t);var j=(t.flags&128)!==0;if(!s&&!j)return o&&Rr(t,r,!1),Ir(e,t,_);s=t.stateNode,nd.current=t;var le=j&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&j?(t.child=Zr(t,e.child,null,_),t.child=Zr(t,null,le,_)):xn(e,t,le,_),t.memoizedState=s.state,o&&Rr(t,r,!0),t.child}function lu(e){var t=e.stateNode;t.pendingContext?pt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pt(e,t.context,!1),i(e,t.containerInfo)}function uu(e,t,r,s,o){return En(),vi(o),t.flags|=256,xn(e,t,r,s),t.child}var Mo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function cu(e,t,r){var s=t.pendingProps,o=A.current,_=!1,j=(t.flags&128)!==0,le;if((le=j)||(le=e!==null&&e.memoizedState===null?!1:(o&2)!==0),le?(_=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ve(A,o&1),e===null)return ji(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:ls(e)?t.lanes=8:t.lanes=1073741824,null):(j=s.children,e=s.fallback,_?(s=t.mode,_=t.child,j={mode:"hidden",children:j},(s&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=j):_=ao(j,s,0,null),e=ki(e,s,r,null),_.return=t,e.return=t,_.sibling=e,t.child=_,t.child.memoizedState=Fo(r),t.memoizedState=Mo,e):Io(t,j));if(o=e.memoizedState,o!==null&&(le=o.dehydrated,le!==null))return rd(e,t,j,s,le,o,r);if(_){_=s.fallback,j=t.mode,o=e.child,le=o.sibling;var ve={mode:"hidden",children:s.children};return(j&1)===0&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=ve,t.deletions=null):(s=si(o,ve),s.subtreeFlags=o.subtreeFlags&14680064),le!==null?_=si(le,_):(_=ki(_,j,r,null),_.flags|=2),_.return=t,s.return=t,s.sibling=_,t.child=s,s=_,_=t.child,j=e.child.memoizedState,j=j===null?Fo(r):{baseLanes:j.baseLanes|r,cachePool:null,transitions:j.transitions},_.memoizedState=j,_.childLanes=e.childLanes&~r,t.memoizedState=Mo,s}return _=e.child,e=_.sibling,s=si(_,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Io(e,t){return t=ao({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ja(e,t,r,s){return s!==null&&vi(s),Zr(t,e.child,null,r),e=Io(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rd(e,t,r,s,o,_,j){if(r)return t.flags&256?(t.flags&=-257,s=To(Error(h(422))),ja(e,t,j,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(_=s.fallback,o=t.mode,s=ao({mode:"visible",children:s.children},o,0,null),_=ki(_,o,j,null),_.flags|=2,s.return=t,_.return=t,s.sibling=_,t.child=s,(t.mode&1)!==0&&Zr(t,e.child,null,j),t.child.memoizedState=Fo(j),t.memoizedState=Mo,_);if((t.mode&1)===0)return ja(e,t,j,null);if(ls(o))return s=Oi(o).digest,_=Error(h(419)),s=To(_,s,void 0),ja(e,t,j,s);if(r=(j&e.childLanes)!==0,An||r){if(s=Zt,s!==null){switch(j&-j){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&(s.suspendedLanes|j))!==0?0:o,o!==0&&o!==_.retryLane&&(_.retryLane=o,Hn(e,o),Wn(s,e,o,-1))}return tl(),s=To(Error(h(421))),ja(e,t,j,s)}return Mt(o)?(t.flags|=128,t.child=e.child,t=md.bind(null,e),Ni(o,t),null):(e=_.treeContext,Ke&&(hn=Ur(o),rn=t,vt=!0,sn=null,Tt=!1,e!==null&&(cn[wn++]=Pn,cn[wn++]=kn,cn[wn++]=Kn,Pn=e.id,kn=e.overflow,Kn=t)),t=Io(t,s.children),t.flags|=4096,t)}function hu(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Wi(e.return,t,r)}function Do(e,t,r,s,o){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:o}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=s,_.tail=r,_.tailMode=o)}function du(e,t,r){var s=t.pendingProps,o=s.revealOrder,_=s.tail;if(xn(e,t,s.children,r),s=A.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hu(e,r,t);else if(e.tag===19)hu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Ve(A,s),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&U(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Do(t,!1,o,r,_);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&U(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Do(t,!0,r,null,_);break;case"together":Do(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ua(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ir(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),xi|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(h(153));if(t.child!==null){for(e=t.child,r=si(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=si(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function id(e,t,r){switch(t.tag){case 3:lu(t),En();break;case 5:p(t);break;case 1:nn(t.type)&&ar(t);break;case 4:i(t,t.stateNode.containerInfo);break;case 10:xs(t,t.type._context,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Ve(A,A.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?cu(e,t,r):(Ve(A,A.current&1),e=Ir(e,t,r),e!==null?e.sibling:null);Ve(A,A.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return du(e,t,r);t.flags|=128}var o=t.memoizedState;if(o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ve(A,A.current),s)break;return null;case 22:case 23:return t.lanes=0,su(e,t,r)}return Ir(e,t,r)}function mr(e){e.flags|=4}function fu(e,t){if(e!==null&&e.child===t.child)return!0;if((t.flags&16)!==0)return!1;for(e=t.child;e!==null;){if((e.flags&12854)!==0||(e.subtreeFlags&12854)!==0)return!1;e=e.sibling}return!0}var Ps,ks,za,qa;if(Ie)Ps=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)_e(e,r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ks=function(){},za=function(e,t,r,s,o){if(e=e.memoizedProps,e!==s){var _=t.stateNode,j=n(Kt.current);r=be(_,r,e,s,o,j),(t.updateQueue=r)&&mr(t)}},qa=function(e,t,r,s){r!==s&&mr(t)};else if(Fe){Ps=function(e,t,r,s){for(var o=t.child;o!==null;){if(o.tag===5){var _=o.stateNode;r&&s&&(_=Sr(_,o.type,o.memoizedProps,o)),_e(e,_)}else if(o.tag===6)_=o.stateNode,r&&s&&(_=xr(_,o.memoizedProps,o)),_e(e,_);else if(o.tag!==4){if(o.tag===22&&o.memoizedState!==null)_=o.child,_!==null&&(_.return=o),Ps(e,o,!0,!0);else if(o.child!==null){o.child.return=o,o=o.child;continue}}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};var gu=function(e,t,r,s){for(var o=t.child;o!==null;){if(o.tag===5){var _=o.stateNode;r&&s&&(_=Sr(_,o.type,o.memoizedProps,o)),Ti(e,_)}else if(o.tag===6)_=o.stateNode,r&&s&&(_=xr(_,o.memoizedProps,o)),Ti(e,_);else if(o.tag!==4){if(o.tag===22&&o.memoizedState!==null)_=o.child,_!==null&&(_.return=o),gu(e,o,!0,!0);else if(o.child!==null){o.child.return=o,o=o.child;continue}}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};ks=function(e,t){var r=t.stateNode;if(!fu(e,t)){e=r.containerInfo;var s=ss(e);gu(s,t,!1,!1),r.pendingChildren=s,mr(t),So(e,s)}},za=function(e,t,r,s,o){var _=e.stateNode,j=e.memoizedProps;if((e=fu(e,t))&&j===s)t.stateNode=_;else{var le=t.stateNode,ve=n(Kt.current),Re=null;j!==s&&(Re=be(le,r,j,s,o,ve)),e&&Re===null?t.stateNode=_:(_=is(_,Re,r,j,s,t,e,le),ie(_,r,s,o,ve)&&mr(t),t.stateNode=_,e?mr(t):Ps(_,t,!1,!1))}},qa=function(e,t,r,s){r!==s?(e=n(Fr.current),r=n(Kt.current),t.stateNode=ge(s,e,r,t),mr(t)):t.stateNode=e.stateNode}}else ks=function(){},za=function(){},qa=function(){};function Es(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function fn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function sd(e,t,r){var s=t.pendingProps;switch(yi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(t),null;case 1:return nn(t.type)&&hi(),fn(t),null;case 3:return r=t.stateNode,l(),yt(Vt),yt(qt),J(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ar(t)?mr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,sn!==null&&($o(sn),sn=null))),ks(e,t),fn(t),null;case 5:b(t),r=n(Fr.current);var o=t.type;if(e!==null&&t.stateNode!=null)za(e,t,o,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(h(166));return fn(t),null}if(e=n(Kt.current),Ar(t)){if(!Ke)throw Error(h(175));e=ir(t.stateNode,t.type,t.memoizedProps,r,e,t,!Tt),t.updateQueue=e,e!==null&&mr(t)}else{var _=X(o,s,r,e,t);Ps(_,t,!1,!1),t.stateNode=_,ie(_,o,s,r,e)&&mr(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fn(t),null;case 6:if(e&&t.stateNode!=null)qa(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(h(166));if(e=n(Fr.current),r=n(Kt.current),Ar(t)){if(!Ke)throw Error(h(176));if(e=t.stateNode,r=t.memoizedProps,(s=Mi(e,r,t,!Tt))&&(o=rn,o!==null))switch(o.tag){case 3:Pr(o.stateNode.containerInfo,e,r,(o.mode&1)!==0);break;case 5:Xn(o.type,o.memoizedProps,o.stateNode,e,r,(o.mode&1)!==0)}s&&mr(t)}else t.stateNode=ge(s,e,r,t)}return fn(t),null;case 13:if(yt(A),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&hn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ui(),En(),t.flags|=98560,o=!1;else if(o=Ar(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(h(318));if(!Ke)throw Error(h(344));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(h(317));bo(o,t)}else En(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;fn(t),o=!1}else sn!==null&&($o(sn),sn=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(r=s!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(A.current&1)!==0?Yt===0&&(Yt=3):tl())),t.updateQueue!==null&&(t.flags|=4),fn(t),null);case 4:return l(),ks(e,t),e===null&&He(t.stateNode.containerInfo),fn(t),null;case 10:return bs(t.type._context),fn(t),null;case 17:return nn(t.type)&&hi(),fn(t),null;case 19:if(yt(A),o=t.memoizedState,o===null)return fn(t),null;if(s=(t.flags&128)!==0,_=o.rendering,_===null)if(s)Es(o,!1);else{if(Yt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(_=U(e),_!==null){for(t.flags|=128,Es(o,!1),e=_.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=r,r=t.child;r!==null;)s=r,o=e,s.flags&=14680066,_=s.alternate,_===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=_.childLanes,s.lanes=_.lanes,s.child=_.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=_.memoizedProps,s.memoizedState=_.memoizedState,s.updateQueue=_.updateQueue,s.type=_.type,o=_.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r=r.sibling;return Ve(A,A.current&1|2),t.child}e=e.sibling}o.tail!==null&&_t()>Xo&&(t.flags|=128,s=!0,Es(o,!1),t.lanes=4194304)}else{if(!s)if(e=U(_),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Es(o,!0),o.tail===null&&o.tailMode==="hidden"&&!_.alternate&&!vt)return fn(t),null}else 2*_t()-o.renderingStartTime>Xo&&r!==1073741824&&(t.flags|=128,s=!0,Es(o,!1),t.lanes=4194304);o.isBackwards?(_.sibling=t.child,t.child=_):(e=o.last,e!==null?e.sibling=_:t.child=_,o.last=_)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=_t(),t.sibling=null,e=A.current,Ve(A,s?e&1|2:e&1),t):(fn(t),null);case 22:case 23:return el(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Un&1073741824)!==0&&(fn(t),Ie&&t.subtreeFlags&6&&(t.flags|=8192)):fn(t),null;case 24:return null;case 25:return null}throw Error(h(156,t.tag))}function ad(e,t){switch(yi(t),t.tag){case 1:return nn(t.type)&&hi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return l(),yt(Vt),yt(qt),J(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return b(t),null;case 13:if(yt(A),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(h(340));En()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yt(A),null;case 4:return l(),null;case 10:return bs(t.type._context),null;case 22:case 23:return el(),null;case 24:return null;default:return null}}var Va=!1,gn=!1,od=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Ji(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){kt(e,t,s)}else r.current=null}function Lo(e,t,r){try{r()}catch(s){kt(e,t,s)}}var pu=!1;function ld(e,t){for(q(e.containerInfo),Ue=t;Ue!==null;)if(e=Ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ue=t;else for(;Ue!==null;){e=Ue;try{var r=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(r!==null){var s=r.memoizedProps,o=r.memoizedState,_=e.stateNode,j=_.getSnapshotBeforeUpdate(e.elementType===e.type?s:Zn(e.type,s),o);_.__reactInternalSnapshotBeforeUpdate=j}break;case 3:Ie&&Ra(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(h(163))}}catch(le){kt(e,e.return,le)}if(t=e.sibling,t!==null){t.return=e.return,Ue=t;break}Ue=e.return}return r=pu,pu=!1,r}function Rs(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var _=o.destroy;o.destroy=void 0,_!==void 0&&Lo(t,r,_)}o=o.next}while(o!==s)}}function Ka(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Go(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=Ce(r);break;default:e=r}typeof t=="function"?t(e):t.current=e}}function mu(e){var t=e.alternate;t!==null&&(e.alternate=null,mu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ft(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yu(e){return e.tag===5||e.tag===3||e.tag===4}function vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?nr(r,e,t):Jt(r,e);else if(s!==4&&(e=e.child,e!==null))for(Bo(e,t,r),e=e.sibling;e!==null;)Bo(e,t,r),e=e.sibling}function jo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?_r(r,e,t):tn(r,e);else if(s!==4&&(e=e.child,e!==null))for(jo(e,t,r),e=e.sibling;e!==null;)jo(e,t,r),e=e.sibling}var an=null,$n=!1;function yr(e,t,r){for(r=r.child;r!==null;)Uo(e,t,r),r=r.sibling}function Uo(e,t,r){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Kr,r)}catch{}switch(r.tag){case 5:gn||Ji(r,t);case 6:if(Ie){var s=an,o=$n;an=null,yr(e,t,r),an=s,$n=o,an!==null&&($n?qe(an,r.stateNode):zn(an,r.stateNode))}else yr(e,t,r);break;case 18:Ie&&an!==null&&($n?us(an,r.stateNode):Aa(an,r.stateNode));break;case 4:Ie?(s=an,o=$n,an=r.stateNode.containerInfo,$n=!0,yr(e,t,r),an=s,$n=o):(Fe&&(s=r.stateNode.containerInfo,o=ss(s),as(s,o)),yr(e,t,r));break;case 0:case 11:case 14:case 15:if(!gn&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var _=o,j=_.destroy;_=_.tag,j!==void 0&&((_&2)!==0||(_&4)!==0)&&Lo(r,t,j),o=o.next}while(o!==s)}yr(e,t,r);break;case 1:if(!gn&&(Ji(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(le){kt(r,t,le)}yr(e,t,r);break;case 21:yr(e,t,r);break;case 22:r.mode&1?(gn=(s=gn)||r.memoizedState!==null,yr(e,t,r),gn=s):yr(e,t,r);break;default:yr(e,t,r)}}function _u(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new od),t.forEach(function(s){var o=yd.bind(null,e,s);r.has(s)||(r.add(s),s.then(o,o))})}}function er(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var o=r[s];try{var _=e,j=t;if(Ie){var le=j;e:for(;le!==null;){switch(le.tag){case 5:an=le.stateNode,$n=!1;break e;case 3:an=le.stateNode.containerInfo,$n=!0;break e;case 4:an=le.stateNode.containerInfo,$n=!0;break e}le=le.return}if(an===null)throw Error(h(160));Uo(_,j,o),an=null,$n=!1}else Uo(_,j,o);var ve=o.alternate;ve!==null&&(ve.return=null),o.return=null}catch(Re){kt(o,t,Re)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wu(t,e),t=t.sibling}function wu(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(er(t,e),vr(e),s&4){try{Rs(3,e,e.return),Ka(3,e)}catch(Ge){kt(e,e.return,Ge)}try{Rs(5,e,e.return)}catch(Ge){kt(e,e.return,Ge)}}break;case 1:er(t,e),vr(e),s&512&&r!==null&&Ji(r,r.return);break;case 5:if(er(t,e),vr(e),s&512&&r!==null&&Ji(r,r.return),Ie){if(e.flags&32){var o=e.stateNode;try{jr(o)}catch(Ge){kt(e,e.return,Ge)}}if(s&4&&(o=e.stateNode,o!=null)){var _=e.memoizedProps;if(r=r!==null?r.memoizedProps:_,s=e.type,t=e.updateQueue,e.updateQueue=null,t!==null)try{yn(o,t,s,r,_,e)}catch(Ge){kt(e,e.return,Ge)}}}break;case 6:if(er(t,e),vr(e),s&4&&Ie){if(e.stateNode===null)throw Error(h(162));o=e.stateNode,_=e.memoizedProps,r=r!==null?r.memoizedProps:_;try{Bt(o,r,_)}catch(Ge){kt(e,e.return,Ge)}}break;case 3:if(er(t,e),vr(e),s&4){if(Ie&&Ke&&r!==null&&r.memoizedState.isDehydrated)try{Ta(t.containerInfo)}catch(Ge){kt(e,e.return,Ge)}if(Fe){o=t.containerInfo,_=t.pendingChildren;try{as(o,_)}catch(Ge){kt(e,e.return,Ge)}}}break;case 4:if(er(t,e),vr(e),s&4&&Fe){_=e.stateNode,o=_.containerInfo,_=_.pendingChildren;try{as(o,_)}catch(Ge){kt(e,e.return,Ge)}}break;case 13:er(t,e),vr(e),o=e.child,o.flags&8192&&(_=o.memoizedState!==null,o.stateNode.isHidden=_,!_||o.alternate!==null&&o.alternate.memoizedState!==null||(Yo=_t())),s&4&&_u(e);break;case 22:var j=r!==null&&r.memoizedState!==null;if(e.mode&1?(gn=(r=gn)||j,er(t,e),gn=r):er(t,e),vr(e),s&8192){if(r=e.memoizedState!==null,(e.stateNode.isHidden=r)&&!j&&(e.mode&1)!==0)for(Ue=e,s=e.child;s!==null;){for(t=Ue=s;Ue!==null;){j=Ue;var le=j.child;switch(j.tag){case 0:case 11:case 14:case 15:Rs(4,j,j.return);break;case 1:Ji(j,j.return);var ve=j.stateNode;if(typeof ve.componentWillUnmount=="function"){var Re=j,ze=j.return;try{var Je=Re;ve.props=Je.memoizedProps,ve.state=Je.memoizedState,ve.componentWillUnmount()}catch(Ge){kt(Re,ze,Ge)}}break;case 5:Ji(j,j.return);break;case 22:if(j.memoizedState!==null){bu(t);continue}}le!==null?(le.return=j,Ue=le):bu(t)}s=s.sibling}if(Ie){e:if(s=null,Ie)for(t=e;;){if(t.tag===5){if(s===null){s=t;try{o=t.stateNode,r?wr(o):De(t.stateNode,t.memoizedProps)}catch(Ge){kt(e,e.return,Ge)}}}else if(t.tag===6){if(s===null)try{_=t.stateNode,r?Ri(_):rs(_,t.memoizedProps)}catch(Ge){kt(e,e.return,Ge)}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}}}break;case 19:er(t,e),vr(e),s&4&&_u(e);break;case 21:break;default:er(t,e),vr(e)}}function vr(e){var t=e.flags;if(t&2){try{if(Ie){e:{for(var r=e.return;r!==null;){if(yu(r)){var s=r;break e}r=r.return}throw Error(h(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(jr(o),s.flags&=-33);var _=vu(e);jo(e,_,o);break;case 3:case 4:var j=s.stateNode.containerInfo,le=vu(e);Bo(e,le,j);break;default:throw Error(h(161))}}}catch(ve){kt(e,e.return,ve)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ud(e,t,r){Ue=e,Su(e)}function Su(e,t,r){for(var s=(e.mode&1)!==0;Ue!==null;){var o=Ue,_=o.child;if(o.tag===22&&s){var j=o.memoizedState!==null||Va;if(!j){var le=o.alternate,ve=le!==null&&le.memoizedState!==null||gn;le=Va;var Re=gn;if(Va=j,(gn=ve)&&!Re)for(Ue=o;Ue!==null;)j=Ue,ve=j.child,j.tag===22&&j.memoizedState!==null?Cu(o):ve!==null?(ve.return=j,Ue=ve):Cu(o);for(;_!==null;)Ue=_,Su(_),_=_.sibling;Ue=o,Va=le,gn=Re}xu(e)}else(o.subtreeFlags&8772)!==0&&_!==null?(_.return=o,Ue=_):xu(e)}}function xu(e){for(;Ue!==null;){var t=Ue;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:gn||Ka(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!gn)if(r===null)s.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:Zn(t.type,r.memoizedProps);s.componentDidUpdate(o,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var _=t.updateQueue;_!==null&&gr(t,_,s);break;case 3:var j=t.updateQueue;if(j!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=Ce(t.child.stateNode);break;case 1:r=t.child.stateNode}gr(t,j,r)}break;case 5:var le=t.stateNode;r===null&&t.flags&4&&Nt(le,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(Ke&&t.memoizedState===null){var ve=t.alternate;if(ve!==null){var Re=ve.memoizedState;if(Re!==null){var ze=Re.dehydrated;ze!==null&&Cr(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(h(163))}gn||t.flags&512&&Go(t)}catch(Je){kt(t,t.return,Je)}}if(t===e){Ue=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ue=r;break}Ue=t.return}}function bu(e){for(;Ue!==null;){var t=Ue;if(t===e){Ue=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ue=r;break}Ue=t.return}}function Cu(e){for(;Ue!==null;){var t=Ue;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ka(4,t)}catch(ve){kt(t,r,ve)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(ve){kt(t,o,ve)}}var _=t.return;try{Go(t)}catch(ve){kt(t,_,ve)}break;case 5:var j=t.return;try{Go(t)}catch(ve){kt(t,j,ve)}}}catch(ve){kt(t,t.return,ve)}if(t===e){Ue=null;break}var le=t.sibling;if(le!==null){le.return=t.return,Ue=le;break}Ue=t.return}}var Ha=0,Wa=1,Ya=2,Xa=3,Qa=4;if(typeof Symbol=="function"&&Symbol.for){var Ts=Symbol.for;Ha=Ts("selector.component"),Wa=Ts("selector.has_pseudo_class"),Ya=Ts("selector.role"),Xa=Ts("selector.test_id"),Qa=Ts("selector.text")}function zo(e){var t=lt(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(h(364));return t}if(e=Xt(e),e===null)throw Error(h(362));return e.stateNode.current}function qo(e,t){switch(t.$$typeof){case Ha:if(e.type===t.value)return!0;break;case Wa:e:{t=t.value,e=[e,0];for(var r=0;r<e.length;){var s=e[r++],o=e[r++],_=t[o];if(s.tag!==5||!zt(s)){for(;_!=null&&qo(s,_);)o++,_=t[o];if(o===t.length){t=!0;break e}else for(s=s.child;s!==null;)e.push(s,o),s=s.sibling}}t=!1}return t;case Ya:if(e.tag===5&&mn(e.stateNode,t.value))return!0;break;case Qa:if((e.tag===5||e.tag===6)&&(e=Ut(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case Xa:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(h(365))}return!1}function Vo(e){switch(e.$$typeof){case Ha:return"<"+(W(e.value)||"Unknown")+">";case Wa:return":has("+(Vo(e)||"")+")";case Ya:return'[role="'+e.value+'"]';case Qa:return'"'+e.value+'"';case Xa:return'[data-testname="'+e.value+'"]';default:throw Error(h(365))}}function Pu(e,t){var r=[];e=[e,0];for(var s=0;s<e.length;){var o=e[s++],_=e[s++],j=t[_];if(o.tag!==5||!zt(o)){for(;j!=null&&qo(o,j);)_++,j=t[_];if(_===t.length)r.push(o);else for(o=o.child;o!==null;)e.push(o,_),o=o.sibling}}return r}function Ko(e,t){if(!Rt)throw Error(h(363));e=zo(e),e=Pu(e,t),t=[],e=Array.from(e);for(var r=0;r<e.length;){var s=e[r++];if(s.tag===5)zt(s)||t.push(s.stateNode);else for(s=s.child;s!==null;)e.push(s),s=s.sibling}return t}var cd=Math.ceil,Ja=d.ReactCurrentDispatcher,Ho=d.ReactCurrentOwner,Lt=d.ReactCurrentBatchConfig,nt=0,Zt=null,jt=null,on=0,Un=0,Zi=Dn(0),Yt=0,As=null,xi=0,Za=0,Wo=0,Os=null,On=null,Yo=0,Xo=1/0,Dr=null;function $i(){Xo=_t()+500}var $a=!1,Qo=null,ti=null,eo=!1,ni=null,to=0,Ns=0,Jo=null,no=-1,ro=0;function pn(){return(nt&6)!==0?_t():no!==-1?no:no=_t()}function ri(e){return(e.mode&1)===0?1:(nt&2)!==0&&on!==0?on&-on:_s.transition!==null?(ro===0&&(ro=ln()),ro):(e=ot,e!==0?e:Ot())}function Wn(e,t,r,s){if(50<Ns)throw Ns=0,Jo=null,Error(h(185));lr(e,r,s),((nt&2)===0||e!==Zt)&&(e===Zt&&((nt&2)===0&&(Za|=r),Yt===4&&ii(e,on)),Nn(e,s),r===1&&nt===0&&(t.mode&1)===0&&($i(),Li&&Cn()))}function Nn(e,t){var r=e.callbackNode;Co(e,t);var s=rt(e,e===Zt?on:0);if(s===0)r!==null&&Vr(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Vr(r),t===1)e.tag===0?Gi(Eu.bind(null,e)):mi(Eu.bind(null,e)),xt?tr(function(){(nt&6)===0&&Cn()}):bn(gs,Cn),r=null;else{switch(Ft(s)){case 1:r=gs;break;case 4:r=Vn;break;case 16:r=pi;break;case 536870912:r=Ma;break;default:r=pi}r=Du(r,ku.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ku(e,t){if(no=-1,ro=0,(nt&6)!==0)throw Error(h(327));var r=e.callbackNode;if(Pi()&&e.callbackNode!==r)return null;var s=rt(e,e===Zt?on:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=io(e,s);else{t=s;var o=nt;nt|=2;var _=Au();(Zt!==e||on!==t)&&(Dr=null,$i(),bi(e,t));do try{fd();break}catch(le){Tu(e,le)}while(!0);Hi(),Ja.current=_,nt=o,jt!==null?t=0:(Zt=null,on=0,t=Yt)}if(t!==0){if(t===2&&(o=ds(e),o!==0&&(s=o,t=Zo(e,o))),t===1)throw r=As,bi(e,0),ii(e,s),Nn(e,_t()),r;if(t===6)ii(e,s);else{if(o=e.current.alternate,(s&30)===0&&!hd(o)&&(t=io(e,s),t===2&&(_=ds(e),_!==0&&(s=_,t=Zo(e,_))),t===1))throw r=As,bi(e,0),ii(e,s),Nn(e,_t()),r;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(h(345));case 2:Ci(e,On,Dr);break;case 3:if(ii(e,s),(s&130023424)===s&&(t=Yo+500-_t(),10<t)){if(rt(e,0)!==0)break;if(o=e.suspendedLanes,(o&s)!==s){pn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=V(Ci.bind(null,e,On,Dr),t);break}Ci(e,On,Dr);break;case 4:if(ii(e,s),(s&4194240)===s)break;for(t=e.eventTimes,o=-1;0<s;){var j=31-vn(s);_=1<<j,j=t[j],j>o&&(o=j),s&=~_}if(s=o,s=_t()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*cd(s/1960))-s,10<s){e.timeoutHandle=V(Ci.bind(null,e,On,Dr),s);break}Ci(e,On,Dr);break;case 5:Ci(e,On,Dr);break;default:throw Error(h(329))}}}return Nn(e,_t()),e.callbackNode===r?ku.bind(null,e):null}function Zo(e,t){var r=Os;return e.current.memoizedState.isDehydrated&&(bi(e,t).flags|=256),e=io(e,t),e!==2&&(t=On,On=r,t!==null&&$o(t)),e}function $o(e){On===null?On=e:On.push.apply(On,e)}function hd(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var o=r[s],_=o.getSnapshot;o=o.value;try{if(!Gn(_(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ii(e,t){for(t&=~Wo,t&=~Za,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-vn(t),s=1<<r;e[r]=-1,t&=~s}}function Eu(e){if((nt&6)!==0)throw Error(h(327));Pi();var t=rt(e,0);if((t&1)===0)return Nn(e,_t()),null;var r=io(e,t);if(e.tag!==0&&r===2){var s=ds(e);s!==0&&(t=s,r=Zo(e,s))}if(r===1)throw r=As,bi(e,0),ii(e,t),Nn(e,_t()),r;if(r===6)throw Error(h(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ci(e,On,Dr),Nn(e,_t()),null}function Ru(e){ni!==null&&ni.tag===0&&(nt&6)===0&&Pi();var t=nt;nt|=1;var r=Lt.transition,s=ot;try{if(Lt.transition=null,ot=1,e)return e()}finally{ot=s,Lt.transition=r,nt=t,(nt&6)===0&&Cn()}}function el(){Un=Zi.current,yt(Zi)}function bi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==ye&&(e.timeoutHandle=ye,fe(r)),jt!==null)for(r=jt.return;r!==null;){var s=r;switch(yi(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&hi();break;case 3:l(),yt(Vt),yt(qt),J();break;case 5:b(s);break;case 4:l();break;case 13:yt(A);break;case 19:yt(A);break;case 10:bs(s.type._context);break;case 22:case 23:el()}r=r.return}if(Zt=e,jt=e=si(e.current,null),on=Un=t,Yt=0,As=null,Wo=Za=xi=0,On=Os=null,fr!==null){for(t=0;t<fr.length;t++)if(r=fr[t],s=r.interleaved,s!==null){r.interleaved=null;var o=s.next,_=r.pending;if(_!==null){var j=_.next;_.next=o,s.next=j}r.pending=s}fr=null}return e}function Tu(e,t){do{var r=jt;try{if(Hi(),ee.current=Ga,re){for(var s=te.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}re=!1}if(Y=0,$=Q=te=null,oe=!1,ce=0,Ho.current=null,r===null||r.return===null){Yt=1,As=t,jt=null;break}e:{var _=e,j=r.return,le=r,ve=t;if(t=on,le.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Re=ve,ze=le,Je=ze.tag;if((ze.mode&1)===0&&(Je===0||Je===11||Je===15)){var Ge=ze.alternate;Ge?(ze.updateQueue=Ge.updateQueue,ze.memoizedState=Ge.memoizedState,ze.lanes=Ge.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var bt=eu(j);if(bt!==null){bt.flags&=-257,tu(bt,j,le,_,t),bt.mode&1&&$l(_,Re,t),t=bt,ve=Re;var wt=t.updateQueue;if(wt===null){var Mn=new Set;Mn.add(ve),t.updateQueue=Mn}else wt.add(ve);break e}else{if((t&1)===0){$l(_,Re,t),tl();break e}ve=Error(h(426))}}else if(vt&&le.mode&1){var Lr=eu(j);if(Lr!==null){(Lr.flags&65536)===0&&(Lr.flags|=256),tu(Lr,j,le,_,t),vi(Qi(ve,le));break e}}_=ve=Qi(ve,le),Yt!==4&&(Yt=2),Os===null?Os=[_]:Os.push(_),_=j;do{switch(_.tag){case 3:_.flags|=65536,t&=-t,_.lanes|=t;var pe=Jl(_,ve,t);Xi(_,pe);break e;case 1:le=ve;var ue=_.type,we=_.stateNode;if((_.flags&128)===0&&(typeof ue.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(ti===null||!ti.has(we)))){_.flags|=65536,t&=-t,_.lanes|=t;var Be=Zl(_,le,t);Xi(_,Be);break e}}_=_.return}while(_!==null)}Nu(r)}catch(We){t=We,jt===r&&r!==null&&(jt=r=r.return);continue}break}while(!0)}function Au(){var e=Ja.current;return Ja.current=Ga,e===null?Ga:e}function tl(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),Zt===null||(xi&268435455)===0&&(Za&268435455)===0||ii(Zt,on)}function io(e,t){var r=nt;nt|=2;var s=Au();(Zt!==e||on!==t)&&(Dr=null,bi(e,t));do try{dd();break}catch(o){Tu(e,o)}while(!0);if(Hi(),nt=r,Ja.current=s,jt!==null)throw Error(h(261));return Zt=null,on=0,Yt}function dd(){for(;jt!==null;)Ou(jt)}function fd(){for(;jt!==null&&!gi();)Ou(jt)}function Ou(e){var t=Iu(e.alternate,e,Un);e.memoizedProps=e.pendingProps,t===null?Nu(e):jt=t,Ho.current=null}function Nu(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=sd(r,t,Un),r!==null){jt=r;return}}else{if(r=ad(r,t),r!==null){r.flags&=32767,jt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Yt=6,jt=null;return}}if(t=t.sibling,t!==null){jt=t;return}jt=t=e}while(t!==null);Yt===0&&(Yt=5)}function Ci(e,t,r){var s=ot,o=Lt.transition;try{Lt.transition=null,ot=1,gd(e,t,r,s)}finally{Lt.transition=o,ot=s}return null}function gd(e,t,r,s){do Pi();while(ni!==null);if((nt&6)!==0)throw Error(h(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(h(177));e.callbackNode=null,e.callbackPriority=0;var _=r.lanes|r.childLanes;if(ur(e,_),e===Zt&&(jt=Zt=null,on=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||eo||(eo=!0,Du(pi,function(){return Pi(),null})),_=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||_){_=Lt.transition,Lt.transition=null;var j=ot;ot=1;var le=nt;nt|=4,Ho.current=null,ld(e,r),wu(r,e),z(e.containerInfo),e.current=r,ud(r),fs(),nt=le,ot=j,Lt.transition=_}else e.current=r;if(eo&&(eo=!1,ni=e,to=o),_=e.pendingLanes,_===0&&(ti=null),ps(r.stateNode),Nn(e,_t()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],s(o.value,{componentStack:o.stack,digest:o.digest});if($a)throw $a=!1,e=Qo,Qo=null,e;return(to&1)!==0&&e.tag!==0&&Pi(),_=e.pendingLanes,(_&1)!==0?e===Jo?Ns++:(Ns=0,Jo=e):Ns=0,Cn(),null}function Pi(){if(ni!==null){var e=Ft(to),t=Lt.transition,r=ot;try{if(Lt.transition=null,ot=16>e?16:e,ni===null)var s=!1;else{if(e=ni,ni=null,to=0,(nt&6)!==0)throw Error(h(331));var o=nt;for(nt|=4,Ue=e.current;Ue!==null;){var _=Ue,j=_.child;if((Ue.flags&16)!==0){var le=_.deletions;if(le!==null){for(var ve=0;ve<le.length;ve++){var Re=le[ve];for(Ue=Re;Ue!==null;){var ze=Ue;switch(ze.tag){case 0:case 11:case 15:Rs(8,ze,_)}var Je=ze.child;if(Je!==null)Je.return=ze,Ue=Je;else for(;Ue!==null;){ze=Ue;var Ge=ze.sibling,bt=ze.return;if(mu(ze),ze===Re){Ue=null;break}if(Ge!==null){Ge.return=bt,Ue=Ge;break}Ue=bt}}}var wt=_.alternate;if(wt!==null){var Mn=wt.child;if(Mn!==null){wt.child=null;do{var Lr=Mn.sibling;Mn.sibling=null,Mn=Lr}while(Mn!==null)}}Ue=_}}if((_.subtreeFlags&2064)!==0&&j!==null)j.return=_,Ue=j;else e:for(;Ue!==null;){if(_=Ue,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Rs(9,_,_.return)}var pe=_.sibling;if(pe!==null){pe.return=_.return,Ue=pe;break e}Ue=_.return}}var ue=e.current;for(Ue=ue;Ue!==null;){j=Ue;var we=j.child;if((j.subtreeFlags&2064)!==0&&we!==null)we.return=j,Ue=we;else e:for(j=ue;Ue!==null;){if(le=Ue,(le.flags&2048)!==0)try{switch(le.tag){case 0:case 11:case 15:Ka(9,le)}}catch(We){kt(le,le.return,We)}if(le===j){Ue=null;break e}var Be=le.sibling;if(Be!==null){Be.return=le.return,Ue=Be;break e}Ue=le.return}}if(nt=o,Cn(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Kr,e)}catch{}s=!0}return s}finally{ot=r,Lt.transition=t}}return!1}function Mu(e,t,r){t=Qi(r,t),t=Jl(e,t,1),e=It(e,t,1),t=pn(),e!==null&&(lr(e,1,t),Nn(e,t))}function kt(e,t,r){if(e.tag===3)Mu(e,e,r);else for(;t!==null;){if(t.tag===3){Mu(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ti===null||!ti.has(s))){e=Qi(r,e),e=Zl(t,e,1),t=It(t,e,1),e=pn(),t!==null&&(lr(t,1,e),Nn(t,e));break}}t=t.return}}function pd(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=pn(),e.pingedLanes|=e.suspendedLanes&r,Zt===e&&(on&r)===r&&(Yt===4||Yt===3&&(on&130023424)===on&&500>_t()-Yo?bi(e,0):Wo|=r),Nn(e,t)}function Fu(e,t){t===0&&((e.mode&1)===0?t=1:(t=di,di<<=1,(di&130023424)===0&&(di=4194304)));var r=pn();e=Hn(e,t),e!==null&&(lr(e,t,r),Nn(e,r))}function md(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Fu(e,r)}function yd(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(h(314))}s!==null&&s.delete(t),Fu(e,r)}var Iu;Iu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vt.current)An=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return An=!1,id(e,t,r);An=(e.flags&131072)!==0}else An=!1,vt&&(t.flags&1048576)!==0&&Ia(t,Yr,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ua(e,t),e=t.pendingProps;var o=Er(t,qt.current);dr(t,r),o=Ee(null,t,s,e,o,r);var _=Ne();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nn(s)?(_=!0,ar(t)):_=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,jn(t),o.updater=Ba,t.stateNode=o,o._reactInternals=t,Ro(t,s,e,r),t=No(null,t,s,!0,_,r)):(t.tag=0,vt&&_&&hr(t),xn(null,t,o,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Ua(e,t),e=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=_d(s),e=Zn(s,e),o){case 0:t=Oo(null,t,s,e,r);break e;case 1:t=ou(null,t,s,e,r);break e;case 11:t=nu(null,t,s,e,r);break e;case 14:t=ru(null,t,s,Zn(s.type,e),r);break e}throw Error(h(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:Zn(s,o),Oo(e,t,s,o,r);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:Zn(s,o),ou(e,t,s,o,r);case 3:e:{if(lu(t),e===null)throw Error(h(387));s=t.pendingProps,_=t.memoizedState,o=_.element,Pt(e,t),wi(t,s,null,r);var j=t.memoizedState;if(s=j.element,Ke&&_.isDehydrated)if(_={element:s,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},t.updateQueue.baseState=_,t.memoizedState=_,t.flags&256){o=Qi(Error(h(423)),t),t=uu(e,t,s,r,o);break e}else if(s!==o){o=Qi(Error(h(424)),t),t=uu(e,t,s,r,o);break e}else for(Ke&&(hn=rr(t.stateNode.containerInfo),rn=t,vt=!0,sn=null,Tt=!1),r=Vi(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(En(),s===o){t=Ir(e,t,r);break e}xn(e,t,s,r)}t=t.child}return t;case 5:return p(t),e===null&&ji(t),s=t.type,o=t.pendingProps,_=e!==null?e.memoizedProps:null,j=o.children,Te(s,o)?j=null:_!==null&&Te(s,_)&&(t.flags|=32),au(e,t),xn(e,t,j,r),t.child;case 6:return e===null&&ji(t),null;case 13:return cu(e,t,r);case 4:return i(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Zr(t,null,s,r):xn(e,t,s,r),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:Zn(s,o),nu(e,t,s,o,r);case 7:return xn(e,t,t.pendingProps,r),t.child;case 8:return xn(e,t,t.pendingProps.children,r),t.child;case 12:return xn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,_=t.memoizedProps,j=o.value,xs(t,s,j),_!==null)if(Gn(_.value,j)){if(_.children===o.children&&!Vt.current){t=Ir(e,t,r);break e}}else for(_=t.child,_!==null&&(_.return=t);_!==null;){var le=_.dependencies;if(le!==null){j=_.child;for(var ve=le.firstContext;ve!==null;){if(ve.context===s){if(_.tag===1){ve=Rn(-1,r&-r),ve.tag=2;var Re=_.updateQueue;if(Re!==null){Re=Re.shared;var ze=Re.pending;ze===null?ve.next=ve:(ve.next=ze.next,ze.next=ve),Re.pending=ve}}_.lanes|=r,ve=_.alternate,ve!==null&&(ve.lanes|=r),Wi(_.return,r,t),le.lanes|=r;break}ve=ve.next}}else if(_.tag===10)j=_.type===t.type?null:_.child;else if(_.tag===18){if(j=_.return,j===null)throw Error(h(341));j.lanes|=r,le=j.alternate,le!==null&&(le.lanes|=r),Wi(j,r,t),j=_.sibling}else j=_.child;if(j!==null)j.return=_;else for(j=_;j!==null;){if(j===t){j=null;break}if(_=j.sibling,_!==null){_.return=j.return,j=_;break}j=j.return}_=j}xn(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,dr(t,r),o=Sn(o),s=s(o),t.flags|=1,xn(e,t,s,r),t.child;case 14:return s=t.type,o=Zn(s,t.pendingProps),o=Zn(s.type,o),ru(e,t,s,o,r);case 15:return iu(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:Zn(s,o),Ua(e,t),t.tag=1,nn(s)?(e=!0,ar(t)):e=!1,dr(t,r),Xl(t,s,o),Ro(t,s,o,r),No(null,t,s,!0,e,r);case 19:return du(e,t,r);case 22:return su(e,t,r)}throw Error(h(156,t.tag))};function Du(e,t){return bn(e,t)}function vd(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(e,t,r,s){return new vd(e,t,r,s)}function nl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _d(e){if(typeof e=="function")return nl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===k)return 11;if(e===v)return 14}return 2}function si(e,t){var r=e.alternate;return r===null?(r=Yn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function so(e,t,r,s,o,_){var j=2;if(s=e,typeof e=="function")nl(e)&&(j=1);else if(typeof e=="string")j=5;else e:switch(e){case x:return ki(r.children,o,_,t);case R:j=8,o|=8;break;case w:return e=Yn(12,r,t,o|2),e.elementType=w,e.lanes=_,e;case M:return e=Yn(13,r,t,o),e.elementType=M,e.lanes=_,e;case G:return e=Yn(19,r,t,o),e.elementType=G,e.lanes=_,e;case P:return ao(r,o,_,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case f:j=10;break e;case g:j=9;break e;case k:j=11;break e;case v:j=14;break e;case u:j=16,s=null;break e}throw Error(h(130,e==null?e:typeof e,""))}return t=Yn(j,r,t,o),t.elementType=e,t.type=s,t.lanes=_,t}function ki(e,t,r,s){return e=Yn(7,e,s,t),e.lanes=r,e}function ao(e,t,r,s){return e=Yn(22,e,s,t),e.elementType=P,e.lanes=r,e.stateNode={isHidden:!1},e}function rl(e,t,r){return e=Yn(6,e,null,t),e.lanes=r,e}function il(e,t,r){return t=Yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wd(e,t,r,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ye,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=or(0),this.expirationTimes=or(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.identifierPrefix=s,this.onRecoverableError=o,Ke&&(this.mutableSourceEagerHydrationData=null)}function Lu(e,t,r,s,o,_,j,le,ve){return e=new wd(e,t,r,le,ve),t===1?(t=1,_===!0&&(t|=8)):t=0,_=Yn(3,null,null,t),e.current=_,_.stateNode=e,_.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},jn(_),e}function Gu(e){if(!e)return Jn;e=e._reactInternals;e:{if(D(e)!==e||e.tag!==1)throw Error(h(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(h(171))}if(e.tag===1){var r=e.type;if(nn(r))return qr(e,r,t)}return t}function Bu(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(h(188)):(e=Object.keys(e).join(","),Error(h(268,e)));return e=Z(t),e===null?null:e.stateNode}function ju(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function oo(e,t){ju(e,t),(e=e.alternate)&&ju(e,t)}function Sd(e){return e=Z(e),e===null?null:e.stateNode}function xd(){return null}return E.attemptContinuousHydration=function(e){if(e.tag===13){var t=Hn(e,134217728);if(t!==null){var r=pn();Wn(t,e,134217728,r)}oo(e,134217728)}},E.attemptDiscreteHydration=function(e){if(e.tag===13){var t=Hn(e,1);if(t!==null){var r=pn();Wn(t,e,1,r)}oo(e,1)}},E.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=ri(e),r=Hn(e,t);if(r!==null){var s=pn();Wn(r,e,t,s)}oo(e,t)}},E.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=fi(t.pendingLanes);r!==0&&(Di(t,r|1),Nn(t,_t()),(nt&6)===0&&($i(),Cn()))}break;case 13:Ru(function(){var s=Hn(e,1);if(s!==null){var o=pn();Wn(s,e,1,o)}}),oo(e,1)}},E.batchedUpdates=function(e,t){var r=nt;nt|=1;try{return e(t)}finally{nt=r,nt===0&&($i(),Li&&Cn())}},E.createComponentSelector=function(e){return{$$typeof:Ha,value:e}},E.createContainer=function(e,t,r,s,o,_,j){return Lu(e,t,!1,null,r,s,o,_,j)},E.createHasPseudoClassSelector=function(e){return{$$typeof:Wa,value:e}},E.createHydrationContainer=function(e,t,r,s,o,_,j,le,ve){return e=Lu(r,s,!0,e,o,_,j,le,ve),e.context=Gu(null),r=e.current,s=pn(),o=ri(r),_=Rn(s,o),_.callback=t??null,It(r,_,o),e.current.lanes=o,lr(e,o,s),Nn(e,s),e},E.createPortal=function(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}},E.createRoleSelector=function(e){return{$$typeof:Ya,value:e}},E.createTestNameSelector=function(e){return{$$typeof:Xa,value:e}},E.createTextSelector=function(e){return{$$typeof:Qa,value:e}},E.deferredUpdates=function(e){var t=ot,r=Lt.transition;try{return Lt.transition=null,ot=16,e()}finally{ot=t,Lt.transition=r}},E.discreteUpdates=function(e,t,r,s,o){var _=ot,j=Lt.transition;try{return Lt.transition=null,ot=1,e(t,r,s,o)}finally{ot=_,Lt.transition=j,nt===0&&$i()}},E.findAllNodes=Ko,E.findBoundingRects=function(e,t){if(!Rt)throw Error(h(363));t=Ko(e,t),e=[];for(var r=0;r<t.length;r++)e.push(gt(t[r]));for(t=e.length-1;0<t;t--){r=e[t];for(var s=r.x,o=s+r.width,_=r.y,j=_+r.height,le=t-1;0<=le;le--)if(t!==le){var ve=e[le],Re=ve.x,ze=Re+ve.width,Je=ve.y,Ge=Je+ve.height;if(s>=Re&&_>=Je&&o<=ze&&j<=Ge){e.splice(t,1);break}else if(s!==Re||r.width!==ve.width||Ge<_||Je>j){if(!(_!==Je||r.height!==ve.height||ze<s||Re>o)){Re>s&&(ve.width+=Re-s,ve.x=s),ze<o&&(ve.width=o-Re),e.splice(t,1);break}}else{Je>_&&(ve.height+=Je-_,ve.y=_),Ge<j&&(ve.height=j-Je),e.splice(t,1);break}}}return e},E.findHostInstance=Bu,E.findHostInstanceWithNoPortals=function(e){return e=H(e),e=e!==null?he(e):null,e===null?null:e.stateNode},E.findHostInstanceWithWarning=function(e){return Bu(e)},E.flushControlled=function(e){var t=nt;nt|=1;var r=Lt.transition,s=ot;try{Lt.transition=null,ot=1,e()}finally{ot=s,Lt.transition=r,nt=t,nt===0&&($i(),Cn())}},E.flushPassiveEffects=Pi,E.flushSync=Ru,E.focusWithin=function(e,t){if(!Rt)throw Error(h(363));for(e=zo(e),t=Pu(e,t),t=Array.from(t),e=0;e<t.length;){var r=t[e++];if(!zt(r)){if(r.tag===5&&Ct(r.stateNode))return!0;for(r=r.child;r!==null;)t.push(r),r=r.sibling}}return!1},E.getCurrentUpdatePriority=function(){return ot},E.getFindAllNodesFailureDescription=function(e,t){if(!Rt)throw Error(h(363));var r=0,s=[];e=[zo(e),0];for(var o=0;o<e.length;){var _=e[o++],j=e[o++],le=t[j];if((_.tag!==5||!zt(_))&&(qo(_,le)&&(s.push(Vo(le)),j++,j>r&&(r=j)),j<t.length))for(_=_.child;_!==null;)e.push(_,j),_=_.sibling}if(r<t.length){for(e=[];r<t.length;r++)e.push(Vo(t[r]));return`findAllNodes was able to match part of the selector:
  `+(s.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},E.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return Ce(e.child.stateNode);default:return e.child.stateNode}},E.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:d.ReactCurrentDispatcher,findHostInstanceByFiber:Sd,findFiberByHostInstance:e.findFiberByHostInstance||xd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Kr=t.inject(e),un=t}catch{}e=!!t.checkDCE}}return e},E.isAlreadyRendering=function(){return!1},E.observeVisibleRects=function(e,t,r,s){if(!Rt)throw Error(h(363));e=Ko(e,t);var o=Qt(e,r,s).disconnect;return{disconnect:function(){o()}}},E.registerMutableSourceForHydration=function(e,t){var r=t._getVersion;r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r)},E.runWithPriority=function(e,t){var r=ot;try{return ot=e,t()}finally{ot=r}},E.shouldError=function(){return null},E.shouldSuspend=function(){return!1},E.updateContainer=function(e,t,r,s){var o=t.current,_=pn(),j=ri(o);return r=Gu(r),t.context===null?t.context=r:t.pendingContext=r,t=Rn(_,j),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=It(o,t,j),e!==null&&(Wn(e,o,j,_),Yi(e,o,j)),j},E}),pl}var Xc;function If(){return Xc||(Xc=1,gl.exports=Ff()),gl.exports}var Df=If();const Lf=Ea(Df);var ml={exports:{}},li={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc;function Gf(){return Qc||(Qc=1,li.ConcurrentRoot=1,li.ContinuousEventPriority=4,li.DefaultEventPriority=16,li.DiscreteEventPriority=1,li.IdleEventPriority=536870912,li.LegacyRoot=0),li}var Jc;function Bf(){return Jc||(Jc=1,ml.exports=Gf()),ml.exports}var kh=Bf(),jf=tt();const Zc={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let $c=!1,eh=!1;const Ml=".react-konva-event",Uf=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,zf=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,qf={};function wo(a,c,E=qf){if(!$c&&"zIndex"in c&&(console.warn(zf),$c=!0),!eh&&c.draggable){var T=c.x!==void 0||c.y!==void 0,O=c.onDragEnd||c.onDragMove;T&&!O&&(console.warn(Uf),eh=!0)}for(var m in E)if(!Zc[m]){var h=m.slice(0,2)==="on",d=E[m]!==c[m];if(h&&d){var y=m.substr(2).toLowerCase();y.substr(0,7)==="content"&&(y="content"+y.substr(7,1).toUpperCase()+y.substr(8)),a.off(y,E[m])}var S=!c.hasOwnProperty(m);S&&a.setAttr(m,void 0)}var x=c._useStrictMode,R={},w=!1;const f={};for(var m in c)if(!Zc[m]){var h=m.slice(0,2)==="on",g=E[m]!==c[m];if(h&&g){var y=m.substr(2).toLowerCase();y.substr(0,7)==="content"&&(y="content"+y.substr(7,1).toUpperCase()+y.substr(8)),c[m]&&(f[y]=c[m])}!h&&(c[m]!==E[m]||x&&c[m]!==a.getAttr(m))&&(w=!0,R[m]=c[m])}w&&(a.setAttrs(R),ui(a));for(var y in f)a.on(y+Ml,f[y])}function ui(a){if(!jf.Konva.autoDrawEnabled){var c=a.getLayer()||a.getStage();c&&c.batchDraw()}}var yl=vh();const Eh={},Vf={};ka.Node.prototype._applyProps=wo;function Kf(a,c){if(typeof c=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${c}`);return}a.add(c),ui(a)}function Hf(a,c,E){let T=ka[a];T||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),T=ka.Group);const O={},m={};for(var h in c){var d=h.slice(0,2)==="on";d?m[h]=c[h]:O[h]=c[h]}const y=new T(O);return wo(y,m),y}function Wf(a,c,E){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function Yf(a,c,E){return!1}function Xf(a){return a}function Qf(){return null}function Jf(){return null}function Zf(a,c,E,T){return Vf}function $f(){}function e0(a){}function t0(a,c){return!1}function n0(){return Eh}function r0(){return Eh}const i0=setTimeout,s0=clearTimeout,a0=-1;function o0(a,c){return!1}const l0=!1,u0=!0,c0=!0;function h0(a,c){c.parent===a?c.moveToTop():a.add(c),ui(a)}function d0(a,c){c.parent===a?c.moveToTop():a.add(c),ui(a)}function Rh(a,c,E){c._remove(),a.add(c),c.setZIndex(E.getZIndex()),ui(a)}function f0(a,c,E){Rh(a,c,E)}function g0(a,c){c.destroy(),c.off(Ml),ui(a)}function p0(a,c){c.destroy(),c.off(Ml),ui(a)}function m0(a,c,E){console.error(`Text components are not yet supported in ReactKonva. You text is: "${E}"`)}function y0(a,c,E){}function v0(a,c,E,T,O){wo(a,O,T)}function _0(a){a.hide(),ui(a)}function w0(a){}function S0(a,c){(c.visible==null||c.visible)&&a.show()}function x0(a,c){}function b0(a){}function C0(){}const P0=()=>kh.DefaultEventPriority,k0=Object.freeze(Object.defineProperty({__proto__:null,appendChild:h0,appendChildToContainer:d0,appendInitialChild:Kf,cancelTimeout:s0,clearContainer:b0,commitMount:y0,commitTextUpdate:m0,commitUpdate:v0,createInstance:Hf,createTextInstance:Wf,detachDeletedInstance:C0,finalizeInitialChildren:Yf,getChildHostContext:r0,getCurrentEventPriority:P0,getPublicInstance:Xf,getRootHostContext:n0,hideInstance:_0,hideTextInstance:w0,idlePriority:yl.unstable_IdlePriority,insertBefore:Rh,insertInContainerBefore:f0,isPrimaryRenderer:l0,noTimeout:a0,now:yl.unstable_now,prepareForCommit:Qf,preparePortalMount:Jf,prepareUpdate:Zf,removeChild:g0,removeChildFromContainer:p0,resetAfterCommit:$f,resetTextContent:e0,run:yl.unstable_runWithPriority,scheduleTimeout:i0,shouldDeprioritizeSubtree:t0,shouldSetTextContent:o0,supportsMutation:c0,unhideInstance:S0,unhideTextInstance:x0,warnsIfNotActing:u0},Symbol.toStringTag,{value:"Module"}));var E0=Object.defineProperty,R0=Object.defineProperties,T0=Object.getOwnPropertyDescriptors,th=Object.getOwnPropertySymbols,A0=Object.prototype.hasOwnProperty,O0=Object.prototype.propertyIsEnumerable,nh=(a,c,E)=>c in a?E0(a,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):a[c]=E,rh=(a,c)=>{for(var E in c||(c={}))A0.call(c,E)&&nh(a,E,c[E]);if(th)for(var E of th(c))O0.call(c,E)&&nh(a,E,c[E]);return a},N0=(a,c)=>R0(a,T0(c)),ih,sh;typeof window<"u"&&((ih=window.document)!=null&&ih.createElement||((sh=window.navigator)==null?void 0:sh.product)==="ReactNative")?xe.useLayoutEffect:xe.useEffect;function Th(a,c,E){if(!a)return;if(E(a)===!0)return a;let T=a.child;for(;T;){const O=Th(T,c,E);if(O)return O;T=T.sibling}}function Ah(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const ah=console.error;console.error=function(){const a=[...arguments].join("");if(a?.startsWith("Warning:")&&a.includes("useContext")){console.error=ah;return}return ah.apply(this,arguments)};const Fl=Ah(xe.createContext(null));class Oh extends xe.Component{render(){return xe.createElement(Fl.Provider,{value:this._reactInternals},this.props.children)}}function M0(){const a=xe.useContext(Fl);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const c=xe.useId();return xe.useMemo(()=>{for(const T of[a,a?.alternate]){if(!T)continue;const O=Th(T,!1,m=>{let h=m.memoizedState;for(;h;){if(h.memoizedState===c)return!0;h=h.next}});if(O)return O}},[a,c])}function F0(){const a=M0(),[c]=xe.useState(()=>new Map);c.clear();let E=a;for(;E;){if(E.type&&typeof E.type=="object"){const O=E.type._context===void 0&&E.type.Provider===E.type?E.type:E.type._context;O&&O!==Fl&&!c.has(O)&&c.set(O,xe.useContext(Ah(O)))}E=E.return}return c}function I0(){const a=F0();return xe.useMemo(()=>Array.from(a.keys()).reduce((c,E)=>T=>xe.createElement(c,null,xe.createElement(E.Provider,N0(rh({},T),{value:a.get(E)}))),c=>xe.createElement(Oh,rh({},c))),[a])}function D0(a){const c=mt.useRef({});return mt.useLayoutEffect(()=>{c.current=a}),mt.useLayoutEffect(()=>()=>{c.current={}},[]),c.current}const L0=a=>{const c=mt.useRef(null),E=mt.useRef(null),T=mt.useRef(null),O=D0(a),m=I0(),h=d=>{const{forwardedRef:y}=a;y&&(typeof y=="function"?y(d):y.current=d)};return mt.useLayoutEffect(()=>(E.current=new ka.Stage({width:a.width,height:a.height,container:c.current}),h(E.current),T.current=ba.createContainer(E.current,kh.LegacyRoot,!1,null),ba.updateContainer(mt.createElement(m,{},a.children),T.current),()=>{ka.isBrowser&&(h(null),ba.updateContainer(null,T.current,null),E.current.destroy())}),[]),mt.useLayoutEffect(()=>{h(E.current),wo(E.current,a,O),ba.updateContainer(mt.createElement(m,{},a.children),T.current,null)}),mt.createElement("div",{ref:c,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},G0="Layer",oh="Group",B0="Circle",j0="Image",ba=Lf(k0);ba.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:mt.version,rendererPackageName:"react-konva"});const U0=mt.forwardRef((a,c)=>mt.createElement(Oh,{},mt.createElement(L0,{...a,forwardedRef:c})));function z0({onYes:a,onNo:c,open:E,onOpenChange:T}){return je.jsx(Cd,{open:E,onOpenChange:O=>T(O.open),size:"sm",placement:"center",role:"alertdialog",children:je.jsxs(Pd,{children:[je.jsx(kd,{}),je.jsx(Ed,{children:je.jsxs(Rd,{rounded:"xl",children:[je.jsx(Td,{children:je.jsx(Ad,{children:""})}),je.jsx(Od,{children:""}),je.jsxs(Nd,{gap:"2",children:[je.jsx(Uu,{colorScheme:"teal",onClick:a,children:""}),je.jsx(Uu,{variant:"outline",onClick:c,children:""})]})]})})]})})}const q0=_h(Rl);function co({side:a,src:c,visible:E,animateCtrl:T}){if(!E)return null;const O=a==="top"?50:a==="bottom"?40:a==="right"?30:20;return je.jsx(q0,{src:c,alt:a,pos:"absolute",inset:"0",w:"100%",h:"100%",zIndex:O,animate:T,pointerEvents:"none"})}const V0=_h(Rl);function K0({src:a,visible:c,animateCtrl:E}){return c?je.jsx(V0,{src:a,alt:"",pos:"absolute",inset:"0",w:"100%",h:"100%",objectFit:"contain",zIndex:60,animate:E,initial:{scale:0,opacity:0,display:"block"},pointerEvents:"none",style:{willChange:"transform, opacity",backfaceVisibility:"hidden"}}):null}const Nh=xe.createContext(void 0),Mh=xe.createContext(void 0),Fh=xe.createContext(void 0),Ih=xe.createContext(void 0),Dh=xe.createContext(void 0),Lh=xe.createContext(void 0),Gh=xe.createContext(void 0),Bh=xe.createContext(void 0),jh=xe.createContext(void 0),Uh=xe.createContext(void 0);function H0(){const a=xe.useContext(Nh);if(a===void 0)throw new Error("usePage must be used within <PageProvider>");return a}function W0(){const a=xe.useContext(Mh);if(a===void 0)throw new Error("useSetPage must be used within <PageProvider>");return a}function Y0(){const a=xe.useContext(Fh);if(a===void 0)throw new Error("useSound must be used within <PageProvider>");return a}function X0(){const a=xe.useContext(Ih);if(a===void 0)throw new Error("useSetSound must be used within <PageProvider>");return a}function xg(){const a=xe.useContext(Dh);if(a===void 0)throw new Error("useBattle must be used within <PageProvider>");return a}function bg(){const a=xe.useContext(Lh);if(a===void 0)throw new Error("useSetBattle must be used within <PageProvider>");return a}function Cg(){const a=xe.useContext(Gh);if(a===void 0)throw new Error("useSort must be used within <PageProvider>");return a}function Pg(){const a=xe.useContext(Bh);if(a===void 0)throw new Error("useSetSort must be used within <PageProvider>");return a}function kg(){const a=xe.useContext(jh);if(a===void 0)throw new Error("useLevel must be used within <PageProvider>");return a}function Eg(){const a=xe.useContext(Uh);if(a===void 0)throw new Error("useSetLevel must be used within <PageProvider>");return a}const Q0=[{ja:"1",en:"january",img:"./images/month/tsuki_title01.png"},{ja:"2",en:"february",img:"./images/month/tsuki_title02.png"},{ja:"3",en:"march",img:"./images/month/tsuki_title03.png"},{ja:"4",en:"april",img:"./images/month/tsuki_title04.png"},{ja:"5",en:"may",img:"./images/month/tsuki_title05.png"},{ja:"6",en:"june",img:"./images/month/tsuki_title06.png"},{ja:"7",en:"july",img:"./images/month/tsuki_title07.png"},{ja:"8",en:"august",img:"./images/month/tsuki_title08.png"},{ja:"9",en:"september",img:"./images/month/tsuki_title09.png"},{ja:"10",en:"october",img:"./images/month/tsuki_title10.png"},{ja:"11",en:"november",img:"./images/month/tsuki_title11.png"},{ja:"12",en:"december",img:"./images/month/tsuki_title12.png"}],J0=[{ja:"1",en:"one",img:"./images/number/number_1.png"},{ja:"2",en:"two",img:"./images/number/number_2.png"},{ja:"3",en:"three",img:"./images/number/number_3.png"},{ja:"4",en:"four",img:"./images/number/number_4.png"},{ja:"5",en:"five",img:"./images/number/number_5.png"},{ja:"6",en:"six",img:"./images/number/number_6.png"},{ja:"7",en:"seven",img:"./images/number/number_7.png"},{ja:"8",en:"eight",img:"./images/number/number_8.png"},{ja:"9",en:"nine",img:"./images/number/number_9.png"},{ja:"10",en:"ten",img:"./images/number/number_10.png"}],Z0=[{ja:"11",en:"eleven",img:"./images/number11/number_11.png"},{ja:"12",en:"twelve",img:"./images/number11/number_12.png"},{ja:"13",en:"thirteen",img:"./images/number11/number_13.png"},{ja:"14",en:"fourteen",img:"./images/number11/number_14.png"},{ja:"15",en:"fifteen",img:"./images/number11/number_15.png"},{ja:"16",en:"sixteen",img:"./images/number11/number_16.png"},{ja:"17",en:"seventeen",img:"./images/number11/number_17.png"},{ja:"18",en:"eighteen",img:"./images/number11/number_18.png"},{ja:"19",en:"nineteen",img:"./images/number11/number_19.png"},{ja:"20",en:"twenty",img:"./images/number11/number_20.png"}],$0=[{ja:"/",en:"about",img:"./images/step1/about.png"},{ja:"",en:"activity",img:"./images/step1/activity.png"},{ja:"",en:"after",img:"./images/step1/after.png"},{ja:"",en:"afternoon",img:"./images/step1/afternoon.png"},{ja:"",en:"again",img:"./images/step1/again.png"},{ja:"",en:"against",img:"./images/step1/against.png"},{ja:"",en:"age",img:"./images/step1/age.png"},{ja:"/",en:"all",img:"./images/step1/all.png"},{ja:"",en:"always",img:"./images/step1/always.png"},{ja:"",en:"and",img:"./images/step1/and.png"}],e1=[{ja:"",en:"sunday",img:"./images/week/weekmark7.png"},{ja:"",en:"monday",img:"./images/week/weekmark1.png"},{ja:"",en:"tuesday",img:"./images/week/weekmark2.png"},{ja:"",en:"wednesday",img:"./images/week/weekmark3.png"},{ja:"",en:"thursday",img:"./images/week/weekmark4.png"},{ja:"",en:"friday",img:"./images/week/weekmark5.png"},{ja:"",en:"saturday",img:"./images/week/weekmark6.png"}],fo=[{id:1,x:2724,y:1768,title:"110",QA:J0},{id:2,x:2224,y:1976,title:"1120",QA:Z0},{id:3,x:3352,y:1396,title:"",QA:Q0},{id:4,x:3225,y:1946,title:"",QA:e1},{id:5,x:2850,y:1390,title:"1",QA:$0}],it={howl:null,src:null,targetVolume:.5,isFading:!1,onFade:void 0},zh=.005,po=a=>Math.max(0,Math.min(1,a));function Cl(a,c){it.onFade&&a.off("fade",it.onFade),it.onFade=c,a.once("fade",c)}function t1(a,c=.5,E=!0){if(Pa.Howler.volume()===0&&Pa.Howler.volume(1),it.howl&&it.src===a){it.targetVolume=po(c),it.isFading||it.howl.volume(it.targetVolume);return}it.howl&&(it.howl.stop(),it.howl.unload()),it.src=a,it.targetVolume=po(c),it.isFading=!1,it.onFade=void 0,it.howl=new Pa.Howl({src:[a],loop:E,volume:it.targetVolume,preload:!0,html5:!1})}function n1(a){it.targetVolume=po(a),it.howl&&!it.isFading&&it.howl.volume(it.targetVolume)}function r1(){return it.targetVolume}function i1(a=800,c){const E=it.howl;if(!E)return;const T=po(c??it.targetVolume),O=E.volume();if(!E.playing()){E.volume(0),E.play(),a>0?(it.isFading=!0,Cl(E,()=>{it.isFading=!1}),E.fade(0,T,a)):E.volume(T);return}Math.abs(O-T)>zh&&(a>0?(it.isFading=!0,Cl(E,()=>{it.isFading=!1}),E.fade(O,T,a)):E.volume(T))}function s1(a=500){const c=it.howl;if(!c||!c.playing())return;const E=c.volume();if(E<=zh){c.stop(),c.volume(it.targetVolume);return}it.isFading=!0,Cl(c,()=>{c.stop(),c.volume(it.targetVolume),it.isFading=!1}),c.fade(E,0,a)}function a1(){const a=it.howl;a&&(a.stop(),a.volume(it.targetVolume))}function o1(a,c=.5){xe.useEffect(()=>{t1(a,c,!0)},[a,c]);const E=xe.useCallback((d,y)=>{i1(d,y)},[]),T=xe.useCallback(d=>{s1(d)},[]),O=xe.useCallback(()=>{a1()},[]),m=xe.useCallback(d=>{n1(d)},[]),h=xe.useCallback(()=>r1(),[]);return{ensurePlaying:E,fadeOutStop:T,stopNow:O,setTargetVolume:m,getTargetVolume:h}}function l1(a,c=1){const E=xe.useRef(null);return xe.useEffect(()=>{const T=new Pa.Howl({src:[a],volume:c,preload:!0});return E.current=T,()=>{T.unload(),E.current=null}},[a,c]),{play:()=>E.current?.play()}}const u1=()=>new Promise(a=>requestAnimationFrame(()=>a())),c1=a=>new Promise(c=>setTimeout(c,a));async function h1(a){await new Promise(c=>{const E=document.createElement("img");E.src=a,typeof E.decode=="function"?E.decode().then(()=>c()).catch(()=>c()):(E.onload=()=>c(),E.onerror=()=>c())})}function d1(a){const c=Ms(),E=Ms(),T=Ms(),O=Ms(),m=Ms(),[h,d]=xe.useState({title:!0,top:!0,bottom:!0,right:!0,left:!0}),y=xe.useCallback(async()=>{c.stop(),E.stop(),T.stop(),O.stop(),m.stop(),d({title:!0,top:!0,bottom:!0,right:!0,left:!0}),await Promise.all([c.set({scale:0,opacity:0,display:"block"}),E.set({x:0,y:0}),T.set({x:0,y:0}),O.set({x:0,y:0}),m.set({x:0,y:0})])},[c,E,T,O,m]),S=xe.useCallback(async x=>{await y(),a.firstPlayed&&(await h1(a.titleSrc),await u1(),await c.start({scale:1,opacity:1,transition:{duration:.9,ease:"easeOut"}}),await c1(2e3),await c.start({opacity:0,transition:{duration:.8,ease:"easeInOut"}}),await c.set({display:"none"}),d(R=>({...R,title:!1})),await E.start({y:"-100%",transition:{duration:1.5,ease:"easeInOut"}}),d(R=>({...R,top:!1})),await T.start({y:"100%",transition:{duration:1,ease:"easeInOut"}}),d(R=>({...R,bottom:!1})),await O.start({x:"100%",transition:{duration:1,ease:"easeInOut"}}),d(R=>({...R,right:!1})),await m.start({x:"-100%",transition:{duration:1,ease:"easeInOut"}}),d(R=>({...R,left:!1})),x(!0),a.onFinishFirst())},[a,y,c,E,T,O,m]);return{title:{visible:h.title,ctrl:c},top:{visible:h.top,ctrl:E},bottom:{visible:h.bottom,ctrl:T},right:{visible:h.right,ctrl:O},left:{visible:h.left,ctrl:m},start:S,reset:y}}function f1(){const[a,c]=xe.useState([]),[E,T]=xe.useState(!1),O=xe.useRef(!1),m=xe.useRef([]),h=xe.useRef({text:"",at:0}),d=xe.useRef(null);xe.useEffect(()=>{const w=()=>{const g=speechSynthesis.getVoices();g?.length&&(c(g),O.current=!0,T(!0),m.current.length&&(m.current.map(k=>k()),m.current=[]))};w();const f=()=>w();return speechSynthesis.onvoiceschanged=f,()=>{speechSynthesis.onvoiceschanged=null}},[]);const y=xe.useCallback(()=>{try{d.current=null,speechSynthesis.cancel()}catch{}},[]),S=xe.useCallback(()=>O.current?Promise.resolve():new Promise(w=>{m.current.push(w),setTimeout(()=>w(),1e3)}),[]),x=xe.useCallback(async()=>{try{await S(),speechSynthesis.cancel();const w=new SpeechSynthesisUtterance(".");w.lang="en-US",w.rate=1,w.pitch=1,w.volume=0,speechSynthesis.speak(w)}catch{}},[S]);return{speak:xe.useCallback((w,f={})=>{if(!w)return;const{lang:g="en-US",rate:k=1,pitch:M=1,voiceHint:G="en",dedupeMs:v=500,noDedupe:u=!1}=f;if(!u){const I=Date.now();if(h.current.text===w&&I-h.current.at<v)return;h.current={text:w,at:I}}y();const P=new SpeechSynthesisUtterance(w);P.lang=g,P.rate=k,P.pitch=M;const N=a.find(I=>I.lang===g)||a.find(I=>I.lang.startsWith(g))||a.find(I=>I.lang.startsWith(G));N&&(P.voice=N),P.onend=()=>{d.current===P&&(d.current=null)},P.onerror=()=>{d.current===P&&(d.current=null)},setTimeout(()=>{try{if(d.current=P,speechSynthesis.paused)try{speechSynthesis.resume()}catch{}speechSynthesis.speak(P)}catch{}},O.current?0:60)},[a,y]),stop:y,voices:a,isReady:E,waitUntilReady:S,warmup:x}}var vl,lh;function g1(){if(lh)return vl;lh=1;var a=yh();return vl=function(E,T,O){const m=a.useRef("loading"),h=a.useRef(),[d,y]=a.useState(0),S=a.useRef(),x=a.useRef(),R=a.useRef();return(S.current!==E||x.current!==T||R.current!==O)&&(m.current="loading",h.current=void 0,S.current=E,x.current=T,R.current=O),a.useLayoutEffect(function(){if(!E)return;var w=document.createElement("img");function f(){w.decode().catch(()=>{}).finally(()=>{m.current="loaded",h.current=w,y(Math.random())})}function g(){m.current="failed",h.current=void 0,y(Math.random())}return w.addEventListener("load",f),w.addEventListener("error",g),T&&(w.crossOrigin=T),O&&(w.referrerPolicy=O),w.src=E,function(){w.removeEventListener("load",f),w.removeEventListener("error",g)}},[E,T,O]),[h.current,m.current]},vl}var p1=g1();const m1=Ea(p1);function y1({containRect:a}){if(!a||a.w===0||a.h===0)return null;const c=a.x+.8*a.w,E=a.y;return je.jsx(Ca,{pos:"absolute",left:c,top:E,w:"20%",zIndex:1,children:je.jsx(Rl,{src:"./images/title/title.png",alt:""})})}const Sa=1744,xa=981;function v1({src:a,x:c,y:E}){const[T]=m1(a,"anonymous");return je.jsx(j0,{image:T??void 0,x:c,y:E,listening:!1,perfectDrawEnabled:!1})}function _1({tiles:a,points:c,worldSize:E,initialCenter:T={x:E.width-Sa/2,y:E.height-xa/2},showTooltip:O=!1,stageRef:m,children:h,mode:d="cover"}){const y=xe.useRef(null),[S,x]=xe.useState({w:1308,h:736}),[R,w]=xe.useState(()=>({x:-(T.x-Sa/2),y:-(T.y-xa/2)})),f=xe.useMemo(()=>{const C=S.w/Sa,L=S.h/xa;return d==="cover"?Math.max(C,L):Math.min(C,L)},[S.w,S.h,d]),g=xe.useMemo(()=>S.w/f,[S.w,f]),k=xe.useMemo(()=>S.h/f,[S.h,f]),M=xe.useMemo(()=>{if(d==="contain"){const C=Math.min(S.w/Sa,S.h/xa);return{x:Math.round((S.w-Sa*C)/2),y:Math.round((S.h-xa*C)/2)}}return{x:0,y:0}},[S.w,S.h,d]),G=E.width<=g,v=E.height<=k,u=G?(g-E.width)/2:g-E.width,P=G?u:0,N=v?(k-E.height)/2:k-E.height,I=v?N:0,W=G?u:R.x,F=v?N:R.y,D=Math.round(M.x+W*f),B=Math.round(M.y+F*f),H=xe.useMemo(()=>{const C={left:-W-1,top:-F-1,right:-W+g+1,bottom:-F+k+1};return a.filter(L=>!(L.x+L.w<C.left||L.y+L.h<C.top||L.x>C.right||L.y>C.bottom))},[a,W,F,g,k]),Z=xe.useCallback(C=>{const L=M.x+u*f,q=M.x+P*f,z=M.y+N*f,X=M.y+I*f,_e=Math.max(Math.ceil(L+1),Math.min(Math.floor(q-1),C.x)),ie=Math.max(Math.ceil(z+1),Math.min(Math.floor(X-1),C.y));return{x:Math.round(_e),y:Math.round(ie)}},[u,P,N,I,M.x,M.y,f]),se=xe.useMemo(()=>c.map(C=>{const L=M.x+(W+C.x)*f,q=M.y+(F+C.y)*f;return{...C,sx:L+12,sy:q-8}}),[c,W,F,f,M.x,M.y]);xe.useEffect(()=>{if(!y.current)return;const C=new ResizeObserver(L=>{const q=L[0].contentRect;x({w:Math.round(q.width),h:Math.round(q.height)})});return C.observe(y.current),()=>C.disconnect()},[]);const he=xe.useCallback(C=>{const L=(C.target.x()-M.x)/f,q=(C.target.y()-M.y)/f;w(z=>({x:G?z.x:Math.max(u,Math.min(P,Math.round(L))),y:v?z.y:Math.max(N,Math.min(I,Math.round(q)))}))},[M.x,M.y,f,G,v,u,P,N,I]),ne=xe.useCallback(C=>{const L=(C.target.x()-M.x)/f,q=(C.target.y()-M.y)/f;w(z=>({x:G?z.x:Math.max(u,Math.min(P,Math.round(L))),y:v?z.y:Math.max(N,Math.min(I,Math.round(q)))}))},[M.x,M.y,f,G,v,u,P,N,I]),Ce=!(G&&v);return je.jsxs(Ca,{ref:y,w:"100%",h:"100%",bg:"#222",position:"relative",overflow:"hidden",children:[je.jsx(U0,{ref:m,width:S.w,height:S.h,draggable:Ce,x:D,y:B,scaleX:f,scaleY:f,dragBoundFunc:Z,onDragMove:he,onDragEnd:ne,style:{background:"#000"},children:je.jsxs(G0,{children:[je.jsx(oh,{onMouseEnter:()=>{const C=m.current?.container();C&&(C.style.cursor="all-scroll")},onMouseLeave:()=>{const C=m.current?.container();C&&(C.style.cursor="default")},children:H.map(C=>je.jsx(v1,{src:C.src,x:C.x,y:C.y},`${C.x},${C.y}`))}),je.jsx(oh,{onMouseEnter:()=>{const C=m.current?.container();C&&(C.style.cursor="grab")},onMouseLeave:()=>{const C=m.current?.container();C&&(C.style.cursor="default")},children:h})]})}),O&&se.map(C=>je.jsx(Ca,{position:"absolute",left:C.sx,top:C.sy,transform:"translateY(-100%)",bg:"tomato",color:"white",px:"8px",py:"6px",fontSize:14,borderRadius:6,pointerEvents:"none",whiteSpace:"nowrap",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1,"aria-hidden":!0,children:je.jsx(Ca,{fontSize:"20px",fontWeight:"bold",color:"gray.50",children:C.title})},`tip-${C.id}`)),je.jsx(y1,{containRect:{x:0,y:0,w:S.w,h:S.h}})]})}const ht=1308,dt=736,Pl=[{src:"./images/map/map_01.webp",x:ht*0,y:dt*0,w:ht,h:dt},{src:"./images/map/map_02.webp",x:ht*1,y:dt*0,w:ht,h:dt},{src:"./images/map/map_03.webp",x:ht*2,y:dt*0,w:ht,h:dt},{src:"./images/map/map_04.webp",x:ht*3,y:dt*0,w:ht,h:dt},{src:"./images/map/map_05.webp",x:ht*0,y:dt*1,w:ht,h:dt},{src:"./images/map/map_06.webp",x:ht*1,y:dt*1,w:ht,h:dt},{src:"./images/map/map_07.webp",x:ht*2,y:dt*1,w:ht,h:dt},{src:"./images/map/map_08.webp",x:ht*3,y:dt*1,w:ht,h:dt},{src:"./images/map/map_09.webp",x:ht*0,y:dt*2,w:ht,h:dt},{src:"./images/map/map_10.webp",x:ht*1,y:dt*2,w:ht,h:dt},{src:"./images/map/map_11.webp",x:ht*2,y:dt*2,w:ht,h:dt},{src:"./images/map/map_12.webp",x:ht*3,y:dt*2,w:ht,h:dt},{src:"./images/map/map_13.webp",x:ht*0,y:dt*3,w:ht,h:dt},{src:"./images/map/map_14.webp",x:ht*1,y:dt*3,w:ht,h:dt},{src:"./images/map/map_15.webp",x:ht*2,y:dt*3,w:ht,h:dt},{src:"./images/map/map_16.webp",x:ht*3,y:dt*3,w:ht,h:dt}],w1={width:Math.max(...Pl.map(a=>a.x+a.w)),height:Math.max(...Pl.map(a=>a.y+a.h))};function S1({showTooltip:a,stageRef:c,children:E}){return je.jsx("div",{style:{width:"100vw",height:"100vh"},children:je.jsx(_1,{tiles:Pl,points:fo,worldSize:w1,initialCenter:{x:2990,y:1740},showTooltip:a,stageRef:c,children:E})})}const x1=mt.lazy(()=>Kd(()=>import("./TypingPage-VZyRKIDk.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(a=>({default:a.TypingPage})));function b1(){const c=Pa.Howler.ctx;return c&&c.state==="suspended"?c.resume():Promise.resolve()}function C1({played:a=!0}){const c=H0(),E=W0(),[T,O]=xe.useState(a),m=Y0(),h=X0(),[d,y]=xe.useState(T),[S,x]=xe.useState(!a),{ensurePlaying:R,fadeOutStop:w}=o1("./music/bgm/mainTheme.mp3",.4),{play:f}=l1("./music/soundEffects/screenTransition.mp3",1),g=d1({firstPlayed:T,titleSrc:"./images/title/title.png",onFinishFirst:()=>O(!1)}),{warmup:k,waitUntilReady:M}=f1(),G=xe.useRef(null);xe.useEffect(()=>{const I=()=>{b1(),window.removeEventListener("pointerdown",I)};return window.addEventListener("pointerdown",I,{once:!0}),()=>window.removeEventListener("pointerdown",I)},[]),xe.useEffect(()=>{m&&c===0?R(800):w(500)},[c,m,R,w]),xe.useEffect(()=>{c===0&&m&&R(0)},[c,m,R]);const v=xe.useCallback(()=>{y(!1),h(!0),R(800),g.start(x)},[R,g,h]),u=xe.useCallback(()=>{y(!1),h(!1),g.start(x)},[g,h]),P=xe.useCallback(async I=>{console.log(m),m&&(w(500),f()),await M(),await k(),E(I)},[E,m,w,f,M,k]),N=xe.useMemo(()=>fo,[]);return je.jsx(je.Fragment,{children:c===0?je.jsxs(Ca,{pos:"relative",w:"100vw",h:"100vh",bg:"black",children:[T&&je.jsx(z0,{open:d,onOpenChange:y,onYes:v,onNo:u}),je.jsx(S1,{showTooltip:S,stageRef:G,children:N.map(I=>je.jsx(B0,{x:I.x,y:I.y,radius:10,fill:"#ff5252",onClick:()=>P(I.id)},I.id))}),T&&je.jsxs(je.Fragment,{children:[je.jsx(K0,{src:"./images/title/title.png",visible:g.title.visible,animateCtrl:g.title.ctrl}),je.jsx(co,{side:"top",src:"./images/title/top.png",visible:g.top.visible,animateCtrl:g.top.ctrl}),je.jsx(co,{side:"bottom",src:"./images/title/bottom.png",visible:g.bottom.visible,animateCtrl:g.bottom.ctrl}),je.jsx(co,{side:"right",src:"./images/title/right.png",visible:g.right.visible,animateCtrl:g.right.ctrl}),je.jsx(co,{side:"left",src:"./images/title/left.png",visible:g.left.visible,animateCtrl:g.left.ctrl})]})]}):je.jsx(xe.Suspense,{fallback:je.jsx("div",{children:"Loading..."}),children:je.jsx(x1,{QA:fo[c-1].QA,title:fo[c-1].title,sound:m})})})}var P1=(a,c,E,T,O,m,h,d)=>{let y=document.documentElement,S=["light","dark"];function x(f){(Array.isArray(a)?a:[a]).forEach(g=>{let k=g==="class",M=k&&m?O.map(G=>m[G]||G):O;k?(y.classList.remove(...M),y.classList.add(m&&m[f]?m[f]:f)):y.setAttribute(g,f)}),R(f)}function R(f){d&&S.includes(f)&&(y.style.colorScheme=f)}function w(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(T)x(T);else try{let f=localStorage.getItem(c)||E,g=h&&f==="system"?w():f;x(g)}catch{}},uh=["light","dark"],qh="(prefers-color-scheme: dark)",k1=typeof window>"u",Il=xe.createContext(void 0),E1={setTheme:a=>{},themes:[]},R1=()=>{var a;return(a=xe.useContext(Il))!=null?a:E1},T1=a=>xe.useContext(Il)?xe.createElement(xe.Fragment,null,a.children):xe.createElement(O1,{...a}),A1=["light","dark"],O1=({forcedTheme:a,disableTransitionOnChange:c=!1,enableSystem:E=!0,enableColorScheme:T=!0,storageKey:O="theme",themes:m=A1,defaultTheme:h=E?"system":"light",attribute:d="data-theme",value:y,children:S,nonce:x,scriptProps:R})=>{let[w,f]=xe.useState(()=>M1(O,h)),[g,k]=xe.useState(()=>w==="system"?_l():w),M=y?Object.values(y):m,G=xe.useCallback(N=>{let I=N;if(!I)return;N==="system"&&E&&(I=_l());let W=y?y[I]:I,F=c?F1(x):null,D=document.documentElement,B=H=>{H==="class"?(D.classList.remove(...M),W&&D.classList.add(W)):H.startsWith("data-")&&(W?D.setAttribute(H,W):D.removeAttribute(H))};if(Array.isArray(d)?d.forEach(B):B(d),T){let H=uh.includes(h)?h:null,Z=uh.includes(I)?I:H;D.style.colorScheme=Z}F?.()},[x]),v=xe.useCallback(N=>{let I=typeof N=="function"?N(w):N;f(I);try{localStorage.setItem(O,I)}catch{}},[w]),u=xe.useCallback(N=>{let I=_l(N);k(I),w==="system"&&E&&!a&&G("system")},[w,a]);xe.useEffect(()=>{let N=window.matchMedia(qh);return N.addListener(u),u(N),()=>N.removeListener(u)},[u]),xe.useEffect(()=>{let N=I=>{I.key===O&&(I.newValue?f(I.newValue):v(h))};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[v]),xe.useEffect(()=>{G(a??w)},[a,w]);let P=xe.useMemo(()=>({theme:w,setTheme:v,forcedTheme:a,resolvedTheme:w==="system"?g:w,themes:E?[...m,"system"]:m,systemTheme:E?g:void 0}),[w,v,a,g,E,m]);return xe.createElement(Il.Provider,{value:P},xe.createElement(N1,{forcedTheme:a,storageKey:O,attribute:d,enableSystem:E,enableColorScheme:T,defaultTheme:h,value:y,themes:m,nonce:x,scriptProps:R}),S)},N1=xe.memo(({forcedTheme:a,storageKey:c,attribute:E,enableSystem:T,enableColorScheme:O,defaultTheme:m,value:h,themes:d,nonce:y,scriptProps:S})=>{let x=JSON.stringify([E,c,m,a,d,h,T,O]).slice(1,-1);return xe.createElement("script",{...S,suppressHydrationWarning:!0,nonce:typeof window>"u"?y:"",dangerouslySetInnerHTML:{__html:`(${P1.toString()})(${x})`}})}),M1=(a,c)=>{if(k1)return;let E;try{E=localStorage.getItem(a)||void 0}catch{}return E||c},F1=a=>{let c=document.createElement("style");return a&&c.setAttribute("nonce",a),c.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(c),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(c)},1)}},_l=a=>(a||(a=window.matchMedia(qh)),a.matches?"dark":"light"),Vh={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ch=mt.createContext&&mt.createContext(Vh),I1=["attr","size","title"];function D1(a,c){if(a==null)return{};var E=L1(a,c),T,O;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(a);for(O=0;O<m.length;O++)T=m[O],!(c.indexOf(T)>=0)&&Object.prototype.propertyIsEnumerable.call(a,T)&&(E[T]=a[T])}return E}function L1(a,c){if(a==null)return{};var E={};for(var T in a)if(Object.prototype.hasOwnProperty.call(a,T)){if(c.indexOf(T)>=0)continue;E[T]=a[T]}return E}function mo(){return mo=Object.assign?Object.assign.bind():function(a){for(var c=1;c<arguments.length;c++){var E=arguments[c];for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(a[T]=E[T])}return a},mo.apply(this,arguments)}function hh(a,c){var E=Object.keys(a);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(a);c&&(T=T.filter(function(O){return Object.getOwnPropertyDescriptor(a,O).enumerable})),E.push.apply(E,T)}return E}function yo(a){for(var c=1;c<arguments.length;c++){var E=arguments[c]!=null?arguments[c]:{};c%2?hh(Object(E),!0).forEach(function(T){G1(a,T,E[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(E)):hh(Object(E)).forEach(function(T){Object.defineProperty(a,T,Object.getOwnPropertyDescriptor(E,T))})}return a}function G1(a,c,E){return c=B1(c),c in a?Object.defineProperty(a,c,{value:E,enumerable:!0,configurable:!0,writable:!0}):a[c]=E,a}function B1(a){var c=j1(a,"string");return typeof c=="symbol"?c:c+""}function j1(a,c){if(typeof a!="object"||!a)return a;var E=a[Symbol.toPrimitive];if(E!==void 0){var T=E.call(a,c);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}function Kh(a){return a&&a.map((c,E)=>mt.createElement(c.tag,yo({key:E},c.attr),Kh(c.child)))}function Hh(a){return c=>mt.createElement(U1,mo({attr:yo({},a.attr)},c),Kh(a.child))}function U1(a){var c=E=>{var{attr:T,size:O,title:m}=a,h=D1(a,I1),d=O||E.size||"1em",y;return E.className&&(y=E.className),a.className&&(y=(y?y+" ":"")+a.className),mt.createElement("svg",mo({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},E.attr,T,h,{className:y,style:yo(yo({color:a.color||E.color},E.style),a.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),m&&mt.createElement("title",null,m),a.children)};return ch!==void 0?mt.createElement(ch.Consumer,null,E=>c(E)):c(Vh)}function z1(a){return Hh({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"},child:[]}]})(a)}function q1(a){return Hh({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"4"},child:[]},{tag:"path",attr:{d:"M12 2v2"},child:[]},{tag:"path",attr:{d:"M12 20v2"},child:[]},{tag:"path",attr:{d:"m4.93 4.93 1.41 1.41"},child:[]},{tag:"path",attr:{d:"m17.66 17.66 1.41 1.41"},child:[]},{tag:"path",attr:{d:"M2 12h2"},child:[]},{tag:"path",attr:{d:"M20 12h2"},child:[]},{tag:"path",attr:{d:"m6.34 17.66-1.41 1.41"},child:[]},{tag:"path",attr:{d:"m19.07 4.93-1.41 1.41"},child:[]}]})(a)}function Wh(){const{resolvedTheme:a,setTheme:c,forcedTheme:E}=R1(),T=E||a;return{colorMode:T,setColorMode:h=>c(h),toggleColorMode:()=>{c(T==="dark"?"light":"dark")}}}function V1(a){return je.jsx(T1,{attribute:"class",disableTransitionOnChange:!0,...a})}function K1(a){const{colorMode:c}=Wh(),E=c==="dark"?z1:q1;return je.jsx(E,{...a})}xe.forwardRef(function(c,E){const{toggleColorMode:T}=Wh();return je.jsx(Md,{fallback:je.jsx(Id,{boxSize:"8"}),children:je.jsx(Fd,{onClick:T,variant:"ghost","aria-label":"Toggle color mode",size:"sm",ref:E,...c,children:je.jsx(K1,{size:20})})})});xe.forwardRef(function(c,E){return je.jsx(mh,{color:"fg",display:"contents",className:"chakra-theme light",colorPalette:"gray",colorScheme:"light",ref:E,...c})});xe.forwardRef(function(c,E){return je.jsx(mh,{color:"fg",display:"contents",className:"chakra-theme dark",colorPalette:"gray",colorScheme:"dark",ref:E,...c})});function H1(a){return je.jsx(Dd,{value:Ld,children:je.jsx(V1,{...a})})}var go={exports:{}},W1=go.exports,dh;function Y1(){return dh||(dh=1,(function(a,c){(function(E,T){a.exports=T()})(W1,function(){var E=function(n,i){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(l[b]=p[b])})(n,i)},T=function(){return(T=Object.assign||function(n){for(var i,l=1,p=arguments.length;l<p;l++)for(var b in i=arguments[l])Object.prototype.hasOwnProperty.call(i,b)&&(n[b]=i[b]);return n}).apply(this,arguments)};function O(n,i,l){for(var p,b=0,A=i.length;b<A;b++)!p&&b in i||((p=p||Array.prototype.slice.call(i,0,b))[b]=i[b]);return n.concat(p||Array.prototype.slice.call(i))}var m=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Sl,h=Object.keys,d=Array.isArray;function y(n,i){return typeof i!="object"||h(i).forEach(function(l){n[l]=i[l]}),n}typeof Promise>"u"||m.Promise||(m.Promise=Promise);var S=Object.getPrototypeOf,x={}.hasOwnProperty;function R(n,i){return x.call(n,i)}function w(n,i){typeof i=="function"&&(i=i(S(n))),(typeof Reflect>"u"?h:Reflect.ownKeys)(i).forEach(function(l){g(n,l,i[l])})}var f=Object.defineProperty;function g(n,i,l,p){f(n,i,y(l&&R(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},p))}function k(n){return{from:function(i){return n.prototype=Object.create(i.prototype),g(n.prototype,"constructor",n),{extend:w.bind(null,n.prototype)}}}}var M=Object.getOwnPropertyDescriptor,G=[].slice;function v(n,i,l){return G.call(n,i,l)}function u(n,i){return i(n)}function P(n){if(!n)throw new Error("Assertion Failed")}function N(n){m.setImmediate?setImmediate(n):setTimeout(n,0)}function I(n,i){if(typeof i=="string"&&R(n,i))return n[i];if(!i)return n;if(typeof i!="string"){for(var l=[],p=0,b=i.length;p<b;++p){var A=I(n,i[p]);l.push(A)}return l}var U=i.indexOf(".");if(U!==-1){var K=n[i.substr(0,U)];return K==null?void 0:I(K,i.substr(U+1))}}function W(n,i,l){if(n&&i!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof i!="string"&&"length"in i){P(typeof l!="string"&&"length"in l);for(var p=0,b=i.length;p<b;++p)W(n,i[p],l[p])}else{var A,U,K=i.indexOf(".");K!==-1?(A=i.substr(0,K),(U=i.substr(K+1))===""?l===void 0?d(n)&&!isNaN(parseInt(A))?n.splice(A,1):delete n[A]:n[A]=l:W(K=!(K=n[A])||!R(n,A)?n[A]={}:K,U,l)):l===void 0?d(n)&&!isNaN(parseInt(i))?n.splice(i,1):delete n[i]:n[i]=l}}function F(n){var i,l={};for(i in n)R(n,i)&&(l[i]=n[i]);return l}var D=[].concat;function B(n){return D.apply([],n)}var Ct="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(B([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(i){return i+n+"Array"})}))).filter(function(n){return m[n]}),H=new Set(Ct.map(function(n){return m[n]})),Z=null;function se(n){return Z=new WeakMap,n=(function i(l){if(!l||typeof l!="object")return l;var p=Z.get(l);if(p)return p;if(d(l)){p=[],Z.set(l,p);for(var b=0,A=l.length;b<A;++b)p.push(i(l[b]))}else if(H.has(l.constructor))p=l;else{var U,K=S(l);for(U in p=K===Object.prototype?{}:Object.create(K),Z.set(l,p),l)R(l,U)&&(p[U]=i(l[U]))}return p})(n),Z=null,n}var he={}.toString;function ne(n){return he.call(n).slice(8,-1)}var Ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",C=typeof Ce=="symbol"?function(n){var i;return n!=null&&(i=n[Ce])&&i.apply(n)}:function(){return null};function L(n,i){return i=n.indexOf(i),0<=i&&n.splice(i,1),0<=i}var q={};function z(n){var i,l,p,b;if(arguments.length===1){if(d(n))return n.slice();if(this===q&&typeof n=="string")return[n];if(b=C(n)){for(l=[];!(p=b.next()).done;)l.push(p.value);return l}if(n==null)return[n];if(typeof(i=n.length)!="number")return[n];for(l=new Array(i);i--;)l[i]=n[i];return l}for(i=arguments.length,l=new Array(i);i--;)l[i]=arguments[i];return l}var X=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},mn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],It=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(mn),_e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ie(n,i){this.name=n,this.message=i}function be(n,i){return n+". Errors: "+Object.keys(i).map(function(l){return i[l].toString()}).filter(function(l,p,b){return b.indexOf(l)===p}).join(`
`)}function Te(n,i,l,p){this.failures=i,this.failedKeys=p,this.successCount=l,this.message=be(n,i)}function ge(n,i){this.name="BulkError",this.failures=Object.keys(i).map(function(l){return i[l]}),this.failuresByPos=i,this.message=be(n,this.failures)}k(ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),k(Te).from(ie),k(ge).from(ie);var V=It.reduce(function(n,i){return n[i]=i+"Error",n},{}),fe=ie,ye=It.reduce(function(n,i){var l=i+"Error";function p(b,A){this.name=l,b?typeof b=="string"?(this.message="".concat(b).concat(A?`
 `+A:""),this.inner=A||null):typeof b=="object"&&(this.message="".concat(b.name," ").concat(b.message),this.inner=b):(this.message=_e[i]||l,this.inner=null)}return k(p).from(fe),n[i]=p,n},{});ye.Syntax=SyntaxError,ye.Type=TypeError,ye.Range=RangeError;var Me=mn.reduce(function(n,i){return n[i+"Error"]=ye[i],n},{}),Ie=It.reduce(function(n,i){return["Syntax","Type","Range"].indexOf(i)===-1&&(n[i+"Error"]=ye[i]),n},{});function Fe(){}function Ke(n){return n}function lt(n,i){return n==null||n===Ke?i:function(l){return i(n(l))}}function He(n,i){return function(){n.apply(this,arguments),i.apply(this,arguments)}}function Ot(n,i){return n===Fe?i:function(){var l=n.apply(this,arguments);l!==void 0&&(arguments[0]=l);var p=this.onsuccess,b=this.onerror;this.onsuccess=null,this.onerror=null;var A=i.apply(this,arguments);return p&&(this.onsuccess=this.onsuccess?He(p,this.onsuccess):p),b&&(this.onerror=this.onerror?He(b,this.onerror):b),A!==void 0?A:l}}function ft(n,i){return n===Fe?i:function(){n.apply(this,arguments);var l=this.onsuccess,p=this.onerror;this.onsuccess=this.onerror=null,i.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?He(l,this.onsuccess):l),p&&(this.onerror=this.onerror?He(p,this.onerror):p)}}function xt(n,i){return n===Fe?i:function(l){var p=n.apply(this,arguments);y(l,p);var b=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,l=i.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?He(b,this.onsuccess):b),A&&(this.onerror=this.onerror?He(A,this.onerror):A),p===void 0?l===void 0?void 0:l:y(p,l)}}function tr(n,i){return n===Fe?i:function(){return i.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function Rt(n,i){return n===Fe?i:function(){var l=n.apply(this,arguments);if(l&&typeof l.then=="function"){for(var p=this,b=arguments.length,A=new Array(b);b--;)A[b]=arguments[b];return l.then(function(){return i.apply(p,A)})}return i.apply(this,arguments)}}Ie.ModifyError=Te,Ie.DexieError=ie,Ie.BulkError=ge;var Xt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function gt(n){Xt=n}var Ut={},zt=100,Ct=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,S(n),n];var i=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[i,S(i),n]})(),mn=Ct[0],It=Ct[1],Ct=Ct[2],It=It&&It.then,Qt=mn&&mn.constructor,tn=!!Ct,Jt=function(n,i){jr.push([n,i]),Nt&&(queueMicrotask(as),Nt=!1)},Bt=!0,Nt=!0,yn=[],_r=[],nr=Ke,zn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Fe,pgp:!1,env:{},finalize:Fe},qe=zn,jr=[],wr=0,Ri=[];function De(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var i=this._PSD=qe;if(typeof n!="function"){if(n!==Ut)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&is(this,this._value))}this._state=null,this._value=null,++i.ref,(function l(p,b){try{b(function(A){if(p._state===null){if(A===p)throw new TypeError("A promise cannot be resolved with itself.");var U=p._lib&&Sr();A&&typeof A.then=="function"?l(p,function(K,J){A instanceof De?A._then(K,J):A.then(K,J)}):(p._state=!0,p._value=A,ss(p)),U&&xr()}},is.bind(null,p))}catch(A){is(p,A)}})(this,n)}var rs={get:function(){var n=qe,i=br;function l(p,b){var A=this,U=!n.global&&(n!==qe||i!==br),K=U&&!ir(),J=new De(function(ee,ae){Ti(A,new Ra(Aa(p,n,U,K),Aa(b,n,U,K),ee,ae,n))});return this._consoleTask&&(J._consoleTask=this._consoleTask),J}return l.prototype=Ut,l},set:function(n){g(this,"then",n&&n.prototype===Ut?rs:{get:function(){return n},set:rs.set})}};function Ra(n,i,l,p,b){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof i=="function"?i:null,this.resolve=l,this.reject=p,this.psd=b}function is(n,i){var l,p;_r.push(i),n._state===null&&(l=n._lib&&Sr(),i=nr(i),n._state=!1,n._value=i,p=n,yn.some(function(b){return b._value===p._value})||yn.push(p),ss(n),l&&xr())}function ss(n){var i=n._listeners;n._listeners=[];for(var l=0,p=i.length;l<p;++l)Ti(n,i[l]);var b=n._PSD;--b.ref||b.finalize(),wr===0&&(++wr,Jt(function(){--wr==0&&os()},[]))}function Ti(n,i){if(n._state!==null){var l=n._state?i.onFulfilled:i.onRejected;if(l===null)return(n._state?i.resolve:i.reject)(n._value);++i.psd.ref,++wr,Jt(So,[l,n,i])}else n._listeners.push(i)}function So(n,i,l){try{var p,b=i._value;!i._state&&_r.length&&(_r=[]),p=Xt&&i._consoleTask?i._consoleTask.run(function(){return n(b)}):n(b),i._state||_r.indexOf(b)!==-1||(function(A){for(var U=yn.length;U;)if(yn[--U]._value===A._value)return yn.splice(U,1)})(i),l.resolve(p)}catch(A){l.reject(A)}finally{--wr==0&&os(),--l.psd.ref||l.psd.finalize()}}function as(){Cr(zn,function(){Sr()&&xr()})}function Sr(){var n=Bt;return Nt=Bt=!1,n}function xr(){var n,i,l;do for(;0<jr.length;)for(n=jr,jr=[],l=n.length,i=0;i<l;++i){var p=n[i];p[0].apply(null,p[1])}while(0<jr.length);Nt=Bt=!0}function os(){var n=yn;yn=[],n.forEach(function(p){p._PSD.onunhandled.call(null,p._value,p)});for(var i=Ri.slice(0),l=i.length;l;)i[--l]()}function Ai(n){return new De(Ut,!1,n)}function St(n,i){var l=qe;return function(){var p=Sr(),b=qe;try{return sr(l,!0),n.apply(this,arguments)}catch(A){i&&i(A)}finally{sr(b,!1),p&&xr()}}}w(De.prototype,{then:rs,_then:function(n,i){Ti(this,new Ra(null,null,n,i,qe))},catch:function(n){if(arguments.length===1)return this.then(null,n);var i=n,l=arguments[1];return typeof i=="function"?this.then(null,function(p){return(p instanceof i?l:Ai)(p)}):this.then(null,function(p){return(p&&p.name===i?l:Ai)(p)})},finally:function(n){return this.then(function(i){return De.resolve(n()).then(function(){return i})},function(i){return De.resolve(n()).then(function(){return Ai(i)})})},timeout:function(n,i){var l=this;return n<1/0?new De(function(p,b){var A=setTimeout(function(){return b(new ye.Timeout(i))},n);l.then(p,b).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&g(De.prototype,Symbol.toStringTag,"Dexie.Promise"),zn.env=Ta(),w(De,{all:function(){var n=z.apply(null,arguments).map(Mi);return new De(function(i,l){n.length===0&&i([]);var p=n.length;n.forEach(function(b,A){return De.resolve(b).then(function(U){n[A]=U,--p||i(n)},l)})})},resolve:function(n){return n instanceof De?n:n&&typeof n.then=="function"?new De(function(i,l){n.then(i,l)}):new De(Ut,!0,n)},reject:Ai,race:function(){var n=z.apply(null,arguments).map(Mi);return new De(function(i,l){n.map(function(p){return De.resolve(p).then(i,l)})})},PSD:{get:function(){return qe},set:function(n){return qe=n}},totalEchoes:{get:function(){return br}},newPSD:rr,usePSD:Cr,scheduler:{get:function(){return Jt},set:function(n){Jt=n}},rejectionMapper:{get:function(){return nr},set:function(n){nr=n}},follow:function(n,i){return new De(function(l,p){return rr(function(b,A){var U=qe;U.unhandleds=[],U.onunhandled=A,U.finalize=He(function(){var K,J=this;K=function(){J.unhandleds.length===0?b():A(J.unhandleds[0])},Ri.push(function ee(){K(),Ri.splice(Ri.indexOf(ee),1)}),++wr,Jt(function(){--wr==0&&os()},[])},U.finalize),n()},i,l,p)})}}),Qt&&(Qt.allSettled&&g(De,"allSettled",function(){var n=z.apply(null,arguments).map(Mi);return new De(function(i){n.length===0&&i([]);var l=n.length,p=new Array(l);n.forEach(function(b,A){return De.resolve(b).then(function(U){return p[A]={status:"fulfilled",value:U}},function(U){return p[A]={status:"rejected",reason:U}}).then(function(){return--l||i(p)})})})}),Qt.any&&typeof AggregateError<"u"&&g(De,"any",function(){var n=z.apply(null,arguments).map(Mi);return new De(function(i,l){n.length===0&&l(new AggregateError([]));var p=n.length,b=new Array(p);n.forEach(function(A,U){return De.resolve(A).then(function(K){return i(K)},function(K){b[U]=K,--p||l(new AggregateError(b))})})})}),Qt.withResolvers&&(De.withResolvers=Qt.withResolvers));var Mt={awaits:0,echoes:0,id:0},ls=0,Oi=[],Ni=0,br=0,xo=0;function rr(n,i,l,p){var b=qe,A=Object.create(b);return A.parent=b,A.ref=0,A.global=!1,A.id=++xo,zn.env,A.env=tn?{Promise:De,PromiseProp:{value:De,configurable:!0,writable:!0},all:De.all,race:De.race,allSettled:De.allSettled,any:De.any,resolve:De.resolve,reject:De.reject}:{},i&&y(A,i),++b.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},p=Cr(A,n,l,p),A.ref===0&&A.finalize(),p}function Ur(){return Mt.id||(Mt.id=++ls),++Mt.awaits,Mt.echoes+=zt,Mt.id}function ir(){return!!Mt.awaits&&(--Mt.awaits==0&&(Mt.id=0),Mt.echoes=Mt.awaits*zt,!0)}function Mi(n){return Mt.echoes&&n&&n.constructor===Qt?(Ur(),n.then(function(i){return ir(),i},function(i){return ir(),Et(i)})):n}function bo(){var n=Oi[Oi.length-1];Oi.pop(),sr(n,!1)}function sr(n,i){var l,p=qe;(i?!Mt.echoes||Ni++&&n===qe:!Ni||--Ni&&n===qe)||queueMicrotask(i?(function(b){++br,Mt.echoes&&--Mt.echoes!=0||(Mt.echoes=Mt.awaits=Mt.id=0),Oi.push(qe),sr(b,!0)}).bind(null,n):bo),n!==qe&&(qe=n,p===zn&&(zn.env=Ta()),tn&&(l=zn.env.Promise,i=n.env,(p.global||n.global)&&(Object.defineProperty(m,"Promise",i.PromiseProp),l.all=i.all,l.race=i.race,l.resolve=i.resolve,l.reject=i.reject,i.allSettled&&(l.allSettled=i.allSettled),i.any&&(l.any=i.any))))}function Ta(){var n=m.Promise;return tn?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(m,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function Cr(n,i,l,p,b){var A=qe;try{return sr(n,!0),i(l,p,b)}finally{sr(A,!1)}}function Aa(n,i,l,p){return typeof n!="function"?n:function(){var b=qe;l&&Ur(),sr(i,!0);try{return n.apply(this,arguments)}finally{sr(b,!1),p&&queueMicrotask(ir)}}}function us(n){Promise===Qt&&Mt.echoes===0?Ni===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+It).indexOf("[native code]")===-1&&(Ur=ir=Fe);var Et=De.reject,Pr="",Xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fi="String expected.",qn=[],zr="__dbnames",ci="readonly",cs="readwrite";function Qn(n,i){return n?i?function(){return n.apply(this,arguments)&&i.apply(this,arguments)}:n:i}var kr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Dn(n){return typeof n!="string"||/\./.test(n)?function(i){return i}:function(i){return i[n]===void 0&&n in i&&delete(i=se(i))[n],i}}function yt(){throw ye.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ve(n,i){try{var l=Jn(n),p=Jn(i);if(l!==p)return l==="Array"?1:p==="Array"?-1:l==="binary"?1:p==="binary"?-1:l==="string"?1:p==="string"?-1:l==="Date"?1:p!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return i<n?1:n<i?-1:0;case"binary":return(function(b,A){for(var U=b.length,K=A.length,J=U<K?U:K,ee=0;ee<J;++ee)if(b[ee]!==A[ee])return b[ee]<A[ee]?-1:1;return U===K?0:U<K?-1:1})(qt(n),qt(i));case"Array":return(function(b,A){for(var U=b.length,K=A.length,J=U<K?U:K,ee=0;ee<J;++ee){var ae=Ve(b[ee],A[ee]);if(ae!==0)return ae}return U===K?0:U<K?-1:1})(n,i)}}catch{}return NaN}function Jn(n){var i=typeof n;return i!="object"?i:ArrayBuffer.isView(n)?"binary":(n=ne(n),n==="ArrayBuffer"?"binary":n)}function qt(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function Vt(n,i,l){var p=n.schema.yProps;return p?(i&&0<l.numFailures&&(i=i.filter(function(b,A){return!l.failures[A]})),Promise.all(p.map(function(b){return b=b.updatesTable,i?n.db.table(b).where("k").anyOf(i).delete():n.db.table(b).clear()})).then(function(){return l})):l}var Ln=(Er.prototype.execute=function(n){var i=this["@@propmod"];if(i.add!==void 0){var l=i.add;if(d(l))return O(O([],d(n)?n:[],!0),l).sort();if(typeof l=="number")return(Number(n)||0)+l;if(typeof l=="bigint")try{return BigInt(n)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(i.remove!==void 0){var p=i.remove;if(d(p))return d(n)?n.filter(function(b){return!p.includes(b)}).sort():[];if(typeof p=="number")return Number(n)-p;if(typeof p=="bigint")try{return BigInt(n)-p}catch{return BigInt(0)-p}throw new TypeError("Invalid subtrahend ".concat(p))}return l=(l=i.replacePrefix)===null||l===void 0?void 0:l[0],l&&typeof n=="string"&&n.startsWith(l)?i.replacePrefix[1]+n.substring(l.length):n},Er);function Er(n){this["@@propmod"]=n}function nn(n,i){for(var l=h(i),p=l.length,b=!1,A=0;A<p;++A){var U=l[A],K=i[U],J=I(n,U);K instanceof Ln?(W(n,U,K.execute(J)),b=!0):J!==K&&(W(n,U,K),b=!0)}return b}var hi=(pt.prototype._trans=function(n,i,l){var p=this._tx||qe.trans,b=this.name,A=Xt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function U(ee,ae,Y){if(!Y.schema[b])throw new ye.NotFound("Table "+b+" not part of transaction");return i(Y.idbtrans,Y)}var K=Sr();try{var J=p&&p.db._novip===this.db._novip?p===qe.trans?p._promise(n,U,l):rr(function(){return p._promise(n,U,l)},{trans:p,transless:qe.transless||qe}):(function ee(ae,Y,te,Q){if(ae.idbdb&&(ae._state.openComplete||qe.letThrough||ae._vip)){var $=ae._createTransaction(Y,te,ae._dbSchema);try{$.create(),ae._state.PR1398_maxLoop=3}catch(re){return re.name===V.InvalidState&&ae.isOpen()&&0<--ae._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ae.close({disableAutoOpen:!1}),ae.open().then(function(){return ee(ae,Y,te,Q)})):Et(re)}return $._promise(Y,function(re,oe){return rr(function(){return qe.trans=$,Q(re,oe,$)})}).then(function(re){if(Y==="readwrite")try{$.idbtrans.commit()}catch{}return Y==="readonly"?re:$._completion.then(function(){return re})})}if(ae._state.openComplete)return Et(new ye.DatabaseClosed(ae._state.dbOpenError));if(!ae._state.isBeingOpened){if(!ae._state.autoOpen)return Et(new ye.DatabaseClosed);ae.open().catch(Fe)}return ae._state.dbReadyPromise.then(function(){return ee(ae,Y,te,Q)})})(this.db,n,[this.name],U);return A&&(J._consoleTask=A,J=J.catch(function(ee){return console.trace(ee),Et(ee)})),J}finally{K&&xr()}},pt.prototype.get=function(n,i){var l=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?Et(new ye.Type("Invalid argument to Table.get()")):this._trans("readonly",function(p){return l.core.get({trans:p,key:n}).then(function(b){return l.hook.reading.fire(b)})}).then(i)},pt.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(d(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=h(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(K){if(K.compound&&i.every(function(ee){return 0<=K.keyPath.indexOf(ee)})){for(var J=0;J<i.length;++J)if(i.indexOf(K.keyPath[J])===-1)return!1;return!0}return!1}).sort(function(K,J){return K.keyPath.length-J.keyPath.length})[0];if(l&&this.db._maxKey!==Pr){var A=l.keyPath.slice(0,i.length);return this.where(A).equals(A.map(function(J){return n[J]}))}!l&&Xt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var p=this.schema.idxByName;function b(K,J){return Ve(K,J)===0}var U=i.reduce(function(Y,J){var ee=Y[0],ae=Y[1],Y=p[J],te=n[J];return[ee||Y,ee||!Y?Qn(ae,Y&&Y.multi?function(Q){return Q=I(Q,J),d(Q)&&Q.some(function($){return b(te,$)})}:function(Q){return b(te,I(Q,J))}):ae]},[null,null]),A=U[0],U=U[1];return A?this.where(A.name).equals(n[A.keyPath]).filter(U):l?this.filter(U):this.where(i).equals("")},pt.prototype.filter=function(n){return this.toCollection().and(n)},pt.prototype.count=function(n){return this.toCollection().count(n)},pt.prototype.offset=function(n){return this.toCollection().offset(n)},pt.prototype.limit=function(n){return this.toCollection().limit(n)},pt.prototype.each=function(n){return this.toCollection().each(n)},pt.prototype.toArray=function(n){return this.toCollection().toArray(n)},pt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pt.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,d(n)?"[".concat(n.join("+"),"]"):n))},pt.prototype.reverse=function(){return this.toCollection().reverse()},pt.prototype.mapToClass=function(n){var i,l=this.db,p=this.name;function b(){return i!==null&&i.apply(this,arguments)||this}(this.schema.mappedClass=n).prototype instanceof yt&&((function(J,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");function ae(){this.constructor=J}E(J,ee),J.prototype=ee===null?Object.create(ee):(ae.prototype=ee.prototype,new ae)})(b,i=n),Object.defineProperty(b.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),b.prototype.table=function(){return p},n=b);for(var A=new Set,U=n.prototype;U;U=S(U))Object.getOwnPropertyNames(U).forEach(function(J){return A.add(J)});function K(J){if(!J)return J;var ee,ae=Object.create(n.prototype);for(ee in J)if(!A.has(ee))try{ae[ee]=J[ee]}catch{}return ae}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=K,this.hook("reading",K),n},pt.prototype.defineClass=function(){return this.mapToClass(function(n){y(this,n)})},pt.prototype.add=function(n,i){var l=this,p=this.schema.primKey,b=p.auto,A=p.keyPath,U=n;return A&&b&&(U=Dn(A)(n)),this._trans("readwrite",function(K){return l.core.mutate({trans:K,type:"add",keys:i!=null?[i]:null,values:[U]})}).then(function(K){return K.numFailures?De.reject(K.failures[0]):K.lastResult}).then(function(K){if(A)try{W(n,A,K)}catch{}return K})},pt.prototype.upsert=function(n,i){var l=this,p=this.schema.primKey.keyPath;return this._trans("readwrite",function(b){return l.core.get({trans:b,key:n}).then(function(A){var U=A??{};return nn(U,i),p&&W(U,p,n),l.core.mutate({trans:b,type:"put",values:[U],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[i]}}).then(function(K){return K.numFailures?De.reject(K.failures[0]):!!A})})})},pt.prototype.update=function(n,i){return typeof n!="object"||d(n)?this.where(":id").equals(n).modify(i):(n=I(n,this.schema.primKey.keyPath),n===void 0?Et(new ye.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(i))},pt.prototype.put=function(n,i){var l=this,p=this.schema.primKey,b=p.auto,A=p.keyPath,U=n;return A&&b&&(U=Dn(A)(n)),this._trans("readwrite",function(K){return l.core.mutate({trans:K,type:"put",values:[U],keys:i!=null?[i]:null})}).then(function(K){return K.numFailures?De.reject(K.failures[0]):K.lastResult}).then(function(K){if(A)try{W(n,A,K)}catch{}return K})},pt.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(l){return i.core.mutate({trans:l,type:"delete",keys:[n]}).then(function(p){return Vt(i,[n],p)}).then(function(p){return p.numFailures?De.reject(p.failures[0]):void 0})})},pt.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:kr}).then(function(l){return Vt(n,null,l)})}).then(function(i){return i.numFailures?De.reject(i.failures[0]):void 0})},pt.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(l){return i.core.getMany({keys:n,trans:l}).then(function(p){return p.map(function(b){return i.hook.reading.fire(b)})})})},pt.prototype.bulkAdd=function(n,i,l){var p=this,b=Array.isArray(i)?i:void 0,A=(l=l||(b?void 0:i))?l.allKeys:void 0;return this._trans("readwrite",function(U){var ee=p.schema.primKey,K=ee.auto,ee=ee.keyPath;if(ee&&b)throw new ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(b&&b.length!==n.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var J=n.length,ee=ee&&K?n.map(Dn(ee)):n;return p.core.mutate({trans:U,type:"add",keys:b,values:ee,wantResults:A}).then(function($){var Y=$.numFailures,te=$.results,Q=$.lastResult,$=$.failures;if(Y===0)return A?te:Q;throw new ge("".concat(p.name,".bulkAdd(): ").concat(Y," of ").concat(J," operations failed"),$)})})},pt.prototype.bulkPut=function(n,i,l){var p=this,b=Array.isArray(i)?i:void 0,A=(l=l||(b?void 0:i))?l.allKeys:void 0;return this._trans("readwrite",function(U){var ee=p.schema.primKey,K=ee.auto,ee=ee.keyPath;if(ee&&b)throw new ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(b&&b.length!==n.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var J=n.length,ee=ee&&K?n.map(Dn(ee)):n;return p.core.mutate({trans:U,type:"put",keys:b,values:ee,wantResults:A}).then(function($){var Y=$.numFailures,te=$.results,Q=$.lastResult,$=$.failures;if(Y===0)return A?te:Q;throw new ge("".concat(p.name,".bulkPut(): ").concat(Y," of ").concat(J," operations failed"),$)})})},pt.prototype.bulkUpdate=function(n){var i=this,l=this.core,p=n.map(function(U){return U.key}),b=n.map(function(U){return U.changes}),A=[];return this._trans("readwrite",function(U){return l.getMany({trans:U,keys:p,cache:"clone"}).then(function(K){var J=[],ee=[];n.forEach(function(Y,te){var Q=Y.key,$=Y.changes,re=K[te];if(re){for(var oe=0,ce=Object.keys($);oe<ce.length;oe++){var de=ce[oe],me=$[de];if(de===i.schema.primKey.keyPath){if(Ve(me,Q)!==0)throw new ye.Constraint("Cannot update primary key in bulkUpdate()")}else W(re,de,me)}A.push(te),J.push(Q),ee.push(re)}});var ae=J.length;return l.mutate({trans:U,type:"put",keys:J,values:ee,updates:{keys:p,changeSpecs:b}}).then(function(Y){var te=Y.numFailures,Q=Y.failures;if(te===0)return ae;for(var $=0,re=Object.keys(Q);$<re.length;$++){var oe,ce=re[$],de=A[Number(ce)];de!=null&&(oe=Q[ce],delete Q[ce],Q[de]=oe)}throw new ge("".concat(i.name,".bulkUpdate(): ").concat(te," of ").concat(ae," operations failed"),Q)})})})},pt.prototype.bulkDelete=function(n){var i=this,l=n.length;return this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"delete",keys:n}).then(function(b){return Vt(i,n,b)})}).then(function(U){var b=U.numFailures,A=U.lastResult,U=U.failures;if(b===0)return A;throw new ge("".concat(i.name,".bulkDelete(): ").concat(b," of ").concat(l," operations failed"),U)})},pt);function pt(){}function qr(n){function i(U,K){if(K){for(var J=arguments.length,ee=new Array(J-1);--J;)ee[J-1]=arguments[J];return l[U].subscribe.apply(null,ee),n}if(typeof U=="string")return l[U]}var l={};i.addEventType=A;for(var p=1,b=arguments.length;p<b;++p)A(arguments[p]);return i;function A(U,K,J){if(typeof U!="object"){var ee;K=K||tr;var ae={subscribers:[],fire:J=J||Fe,subscribe:function(Y){ae.subscribers.indexOf(Y)===-1&&(ae.subscribers.push(Y),ae.fire=K(ae.fire,Y))},unsubscribe:function(Y){ae.subscribers=ae.subscribers.filter(function(te){return te!==Y}),ae.fire=ae.subscribers.reduce(K,J)}};return l[U]=i[U]=ae}h(ee=U).forEach(function(Y){var te=ee[Y];if(d(te))A(Y,ee[Y][0],ee[Y][1]);else{if(te!=="asap")throw new ye.InvalidArgument("Invalid event config");var Q=A(Y,Ke,function(){for(var $=arguments.length,re=new Array($);$--;)re[$]=arguments[$];Q.subscribers.forEach(function(oe){N(function(){oe.apply(null,re)})})})}})}}function ar(n,i){return k(i).from({prototype:n}),i}function Rr(n,i){return!(n.filter||n.algorithm||n.or)&&(i?n.justLimit:!n.replayFilter)}function vn(n,i){n.filter=Qn(n.filter,i)}function hs(n,i,l){var p=n.replayFilter;n.replayFilter=p?function(){return Qn(p(),i())}:i,n.justLimit=l&&!p}function Ii(n,i){if(n.isPrimKey)return i.primaryKey;var l=i.getIndexByKeyPath(n.index);if(!l)throw new ye.Schema("KeyPath "+n.index+" on object store "+i.name+" is not indexed");return l}function Oa(n,i,l){var p=Ii(n,i.schema);return i.openCursor({trans:l,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:p,range:n.range}})}function Tr(n,i,l,p){var b=n.replayFilter?Qn(n.filter,n.replayFilter()):n.filter;if(n.or){var A={},U=function(K,J,ee){var ae,Y;b&&!b(J,ee,function(te){return J.stop(te)},function(te){return J.fail(te)})||((Y=""+(ae=J.primaryKey))=="[object ArrayBuffer]"&&(Y=""+new Uint8Array(ae)),R(A,Y)||(A[Y]=!0,i(K,J,ee)))};return Promise.all([n.or._iterate(U,l),di(Oa(n,p,l),n.algorithm,U,!n.keysOnly&&n.valueMapper)])}return di(Oa(n,p,l),Qn(n.algorithm,b),i,!n.keysOnly&&n.valueMapper)}function di(n,i,l,p){var b=St(p?function(A,U,K){return l(p(A),U,K)}:l);return n.then(function(A){if(A)return A.start(function(){var U=function(){return A.continue()};i&&!i(A,function(K){return U=K},function(K){A.stop(K),U=Fe},function(K){A.fail(K),U=Fe})||b(A.value,A,function(K){return U=K}),U()})})}var fi=(rt.prototype._read=function(n,i){var l=this._ctx;return l.error?l.table._trans(null,Et.bind(null,l.error)):l.table._trans("readonly",n).then(i)},rt.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,Et.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},rt.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=Qn(i.algorithm,n)},rt.prototype._iterate=function(n,i){return Tr(this._ctx,n,i,this._ctx.table.core)},rt.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return n&&y(l,n),i._ctx=l,i},rt.prototype.raw=function(){return this._ctx.valueMapper=null,this},rt.prototype.each=function(n){var i=this._ctx;return this._read(function(l){return Tr(i,n,l,i.table.core)})},rt.prototype.count=function(n){var i=this;return this._read(function(l){var p=i._ctx,b=p.table.core;if(Rr(p,!0))return b.count({trans:l,query:{index:Ii(p,b.schema),range:p.range}}).then(function(U){return Math.min(U,p.limit)});var A=0;return Tr(p,function(){return++A,!1},l,b).then(function(){return A})}).then(n)},rt.prototype.sortBy=function(n,i){var l=n.split(".").reverse(),p=l[0],b=l.length-1;function A(J,ee){return ee?A(J[l[ee]],ee-1):J[p]}var U=this._ctx.dir==="next"?1:-1;function K(J,ee){return Ve(A(J,b),A(ee,b))*U}return this.toArray(function(J){return J.sort(K)}).then(i)},rt.prototype.toArray=function(n){var i=this;return this._read(function(l){var p=i._ctx;if(p.dir==="next"&&Rr(p,!0)&&0<p.limit){var b=p.valueMapper,A=Ii(p,p.table.core.schema);return p.table.core.query({trans:l,limit:p.limit,values:!0,query:{index:A,range:p.range}}).then(function(K){return K=K.result,b?K.map(b):K})}var U=[];return Tr(p,function(K){return U.push(K)},l,p.table.core).then(function(){return U})},n)},rt.prototype.offset=function(n){var i=this._ctx;return n<=0||(i.offset+=n,Rr(i)?hs(i,function(){var l=n;return function(p,b){return l===0||(l===1?--l:b(function(){p.advance(l),l=0}),!1)}}):hs(i,function(){var l=n;return function(){return--l<0}})),this},rt.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),hs(this._ctx,function(){var i=n;return function(l,p,b){return--i<=0&&p(b),0<=i}},!0),this},rt.prototype.until=function(n,i){return vn(this._ctx,function(l,p,b){return!n(l.value)||(p(b),i)}),this},rt.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},rt.prototype.last=function(n){return this.reverse().first(n)},rt.prototype.filter=function(n){var i;return vn(this._ctx,function(l){return n(l.value)}),(i=this._ctx).isMatch=Qn(i.isMatch,n),this},rt.prototype.and=function(n){return this.filter(n)},rt.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},rt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},rt.prototype.desc=function(){return this.reverse()},rt.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(l,p){n(p.key,p)})},rt.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},rt.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(l,p){n(p.primaryKey,p)})},rt.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var l=[];return this.each(function(p,b){l.push(b.key)}).then(function(){return l}).then(n)},rt.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&Rr(i,!0)&&0<i.limit)return this._read(function(p){var b=Ii(i,i.table.core.schema);return i.table.core.query({trans:p,values:!1,limit:i.limit,query:{index:b,range:i.range}})}).then(function(p){return p.result}).then(n);i.keysOnly=!i.isMatch;var l=[];return this.each(function(p,b){l.push(b.primaryKey)}).then(function(){return l}).then(n)},rt.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},rt.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},rt.prototype.lastKey=function(n){return this.reverse().firstKey(n)},rt.prototype.distinct=function(){var n=this._ctx,n=n.index&&n.table.schema.idxByName[n.index];if(!n||!n.multi)return this;var i={};return vn(this._ctx,function(b){var p=b.primaryKey.toString(),b=R(i,p);return i[p]=!0,!b}),this},rt.prototype.modify=function(n){var i=this,l=this._ctx;return this._write(function(p){var b=typeof n=="function"?n:function(re){return nn(re,n)},A=l.table.core,ee=A.schema.primaryKey,U=ee.outbound,K=ee.extractKey,J=200,ee=i.db._options.modifyChunkSize;ee&&(J=typeof ee=="object"?ee[A.name]||ee["*"]||200:ee);function ae(re,de){var ce=de.failures,de=de.numFailures;te+=re-de;for(var me=0,Se=h(ce);me<Se.length;me++){var Ee=Se[me];Y.push(ce[Ee])}}var Y=[],te=0,Q=[],$=n===Na;return i.clone().primaryKeys().then(function(re){function oe(de){var me=Math.min(J,re.length-de),Se=re.slice(de,de+me);return($?Promise.resolve([]):A.getMany({trans:p,keys:Se,cache:"immutable"})).then(function(Ee){var Ne=[],Pe=[],ke=U?[]:null,Oe=$?Se:[];if(!$)for(var Ae=0;Ae<me;++Ae){var Le=Ee[Ae],Xe={value:se(Le),primKey:re[de+Ae]};b.call(Xe,Xe.value,Xe)!==!1&&(Xe.value==null?Oe.push(re[de+Ae]):U||Ve(K(Le),K(Xe.value))===0?(Pe.push(Xe.value),U&&ke.push(re[de+Ae])):(Oe.push(re[de+Ae]),Ne.push(Xe.value)))}return Promise.resolve(0<Ne.length&&A.mutate({trans:p,type:"add",values:Ne}).then(function(Qe){for(var $e in Qe.failures)Oe.splice(parseInt($e),1);ae(Ne.length,Qe)})).then(function(){return(0<Pe.length||ce&&typeof n=="object")&&A.mutate({trans:p,type:"put",keys:ke,values:Pe,criteria:ce,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<de}).then(function(Qe){return ae(Pe.length,Qe)})}).then(function(){return(0<Oe.length||ce&&$)&&A.mutate({trans:p,type:"delete",keys:Oe,criteria:ce,isAdditionalChunk:0<de}).then(function(Qe){return Vt(l.table,Oe,Qe)}).then(function(Qe){return ae(Oe.length,Qe)})}).then(function(){return re.length>de+me&&oe(de+J)})})}var ce=Rr(l)&&l.limit===1/0&&(typeof n!="function"||$)&&{index:l.index,range:l.range};return oe(0).then(function(){if(0<Y.length)throw new Te("Error modifying one or more objects",Y,te,Q);return re.length})})})},rt.prototype.delete=function(){var n=this._ctx,i=n.range;return!Rr(n)||n.table.schema.yProps||!n.isPrimKey&&i.type!==3?this.modify(Na):this._write(function(l){var p=n.table.core.schema.primaryKey,b=i;return n.table.core.count({trans:l,query:{index:p,range:b}}).then(function(A){return n.table.core.mutate({trans:l,type:"deleteRange",range:b}).then(function(J){var K=J.failures,J=J.numFailures;if(J)throw new Te("Could not delete some values",Object.keys(K).map(function(ee){return K[ee]}),A-J);return A-J})})})},rt);function rt(){}var Na=function(n,i){return i.value=null};function Co(n,i){return n<i?-1:n===i?0:1}function ds(n,i){return i<n?-1:n===i?0:1}function ln(n,i,l){return n=n instanceof ot?new n.Collection(n):n,n._ctx.error=new(l||TypeError)(i),n}function or(n){return new n.Collection(n,function(){return Di("")}).limit(0)}function lr(n,i,l,p){var b,A,U,K,J,ee,ae,Y=l.length;if(!l.every(function($){return typeof $=="string"}))return ln(n,Fi);function te($){b=$==="next"?function(oe){return oe.toUpperCase()}:function(oe){return oe.toLowerCase()},A=$==="next"?function(oe){return oe.toLowerCase()}:function(oe){return oe.toUpperCase()},U=$==="next"?Co:ds;var re=l.map(function(oe){return{lower:A(oe),upper:b(oe)}}).sort(function(oe,ce){return U(oe.lower,ce.lower)});K=re.map(function(oe){return oe.upper}),J=re.map(function(oe){return oe.lower}),ae=(ee=$)==="next"?"":p}te("next"),n=new n.Collection(n,function(){return ur(K[0],J[Y-1]+p)}),n._ondirectionchange=function($){te($)};var Q=0;return n._addAlgorithm(function($,re,oe){var ce=$.key;if(typeof ce!="string")return!1;var de=A(ce);if(i(de,J,Q))return!0;for(var me=null,Se=Q;Se<Y;++Se){var Ee=(function(Ne,Pe,ke,Oe,Ae,Le){for(var Xe=Math.min(Ne.length,Oe.length),Qe=-1,$e=0;$e<Xe;++$e){var dn=Pe[$e];if(dn!==Oe[$e])return Ae(Ne[$e],ke[$e])<0?Ne.substr(0,$e)+ke[$e]+ke.substr($e+1):Ae(Ne[$e],Oe[$e])<0?Ne.substr(0,$e)+Oe[$e]+ke.substr($e+1):0<=Qe?Ne.substr(0,Qe)+Pe[Qe]+ke.substr(Qe+1):null;Ae(Ne[$e],dn)<0&&(Qe=$e)}return Xe<Oe.length&&Le==="next"?Ne+ke.substr(Ne.length):Xe<Ne.length&&Le==="prev"?Ne.substr(0,ke.length):Qe<0?null:Ne.substr(0,Qe)+Oe[Qe]+ke.substr(Qe+1)})(ce,de,K[Se],J[Se],U,ee);Ee===null&&me===null?Q=Se+1:(me===null||0<U(me,Ee))&&(me=Ee)}return re(me!==null?function(){$.continue(me+ae)}:oe),!1}),n}function ur(n,i,l,p){return{type:2,lower:n,upper:i,lowerOpen:l,upperOpen:p}}function Di(n){return{type:1,lower:n,upper:n}}var ot=(Object.defineProperty(Ft.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ft.prototype.between=function(n,i,l,p){l=l!==!1,p=p===!0;try{return 0<this._cmp(n,i)||this._cmp(n,i)===0&&(l||p)&&(!l||!p)?or(this):new this.Collection(this,function(){return ur(n,i,!l,!p)})}catch{return ln(this,Xn)}},Ft.prototype.equals=function(n){return n==null?ln(this,Xn):new this.Collection(this,function(){return Di(n)})},Ft.prototype.above=function(n){return n==null?ln(this,Xn):new this.Collection(this,function(){return ur(n,void 0,!0)})},Ft.prototype.aboveOrEqual=function(n){return n==null?ln(this,Xn):new this.Collection(this,function(){return ur(n,void 0,!1)})},Ft.prototype.below=function(n){return n==null?ln(this,Xn):new this.Collection(this,function(){return ur(void 0,n,!1,!0)})},Ft.prototype.belowOrEqual=function(n){return n==null?ln(this,Xn):new this.Collection(this,function(){return ur(void 0,n)})},Ft.prototype.startsWith=function(n){return typeof n!="string"?ln(this,Fi):this.between(n,n+Pr,!0,!0)},Ft.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):lr(this,function(i,l){return i.indexOf(l[0])===0},[n],Pr)},Ft.prototype.equalsIgnoreCase=function(n){return lr(this,function(i,l){return i===l[0]},[n],"")},Ft.prototype.anyOfIgnoreCase=function(){var n=z.apply(q,arguments);return n.length===0?or(this):lr(this,function(i,l){return l.indexOf(i)!==-1},n,"")},Ft.prototype.startsWithAnyOfIgnoreCase=function(){var n=z.apply(q,arguments);return n.length===0?or(this):lr(this,function(i,l){return l.some(function(p){return i.indexOf(p)===0})},n,Pr)},Ft.prototype.anyOf=function(){var n=this,i=z.apply(q,arguments),l=this._cmp;try{i.sort(l)}catch{return ln(this,Xn)}if(i.length===0)return or(this);var p=new this.Collection(this,function(){return ur(i[0],i[i.length-1])});p._ondirectionchange=function(A){l=A==="next"?n._ascending:n._descending,i.sort(l)};var b=0;return p._addAlgorithm(function(A,U,K){for(var J=A.key;0<l(J,i[b]);)if(++b===i.length)return U(K),!1;return l(J,i[b])===0||(U(function(){A.continue(i[b])}),!1)}),p},Ft.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ft.prototype.noneOf=function(){var n=z.apply(q,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return ln(this,Xn)}var i=n.reduce(function(l,p){return l?l.concat([[l[l.length-1][1],p]]):[[-1/0,p]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},Ft.prototype.inAnyRange=function(ce,i){var l=this,p=this._cmp,b=this._ascending,A=this._descending,U=this._min,K=this._max;if(ce.length===0)return or(this);if(!ce.every(function(de){return de[0]!==void 0&&de[1]!==void 0&&b(de[0],de[1])<=0}))return ln(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ye.InvalidArgument);var J=!i||i.includeLowers!==!1,ee=i&&i.includeUppers===!0,ae,Y=b;function te(de,me){return Y(de[0],me[0])}try{(ae=ce.reduce(function(de,me){for(var Se=0,Ee=de.length;Se<Ee;++Se){var Ne=de[Se];if(p(me[0],Ne[1])<0&&0<p(me[1],Ne[0])){Ne[0]=U(Ne[0],me[0]),Ne[1]=K(Ne[1],me[1]);break}}return Se===Ee&&de.push(me),de},[])).sort(te)}catch{return ln(this,Xn)}var Q=0,$=ee?function(de){return 0<b(de,ae[Q][1])}:function(de){return 0<=b(de,ae[Q][1])},re=J?function(de){return 0<A(de,ae[Q][0])}:function(de){return 0<=A(de,ae[Q][0])},oe=$,ce=new this.Collection(this,function(){return ur(ae[0][0],ae[ae.length-1][1],!J,!ee)});return ce._ondirectionchange=function(de){Y=de==="next"?(oe=$,b):(oe=re,A),ae.sort(te)},ce._addAlgorithm(function(de,me,Se){for(var Ee,Ne=de.key;oe(Ne);)if(++Q===ae.length)return me(Se),!1;return!$(Ee=Ne)&&!re(Ee)||(l._cmp(Ne,ae[Q][1])===0||l._cmp(Ne,ae[Q][0])===0||me(function(){Y===b?de.continue(ae[Q][0]):de.continue(ae[Q][1])}),!1)}),ce},Ft.prototype.startsWithAnyOf=function(){var n=z.apply(q,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?or(this):this.inAnyRange(n.map(function(i){return[i,i+Pr]})):ln(this,"startsWithAnyOf() only works with strings")},Ft);function Ft(){}function bn(n){return St(function(i){return Vr(i),n(i.target.error),!1})}function Vr(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var gi="storagemutated",fs="x-storagemutated-1",_t=qr(null,gi),gs=(Vn.prototype._lock=function(){return P(!qe.global),++this._reculock,this._reculock!==1||qe.global||(qe.lockOwnerFor=this),this},Vn.prototype._unlock=function(){if(P(!qe.global),--this._reculock==0)for(qe.global||(qe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{Cr(n[1],n[0])}catch{}}return this},Vn.prototype._locked=function(){return this._reculock&&qe.lockOwnerFor!==this},Vn.prototype.create=function(n){var i=this;if(!this.mode)return this;var l=this.db.idbdb,p=this.db._state.dbOpenError;if(P(!this.idbtrans),!n&&!l)switch(p&&p.name){case"DatabaseClosedError":throw new ye.DatabaseClosed(p);case"MissingAPIError":throw new ye.MissingAPI(p.message,p);default:throw new ye.OpenFailed(p)}if(!this.active)throw new ye.TransactionInactive;return P(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||l).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=St(function(b){Vr(b),i._reject(n.error)}),n.onabort=St(function(b){Vr(b),i.active&&i._reject(new ye.Abort(n.error)),i.active=!1,i.on("abort").fire(b)}),n.oncomplete=St(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&_t.storagemutated.fire(n.mutatedParts)}),this},Vn.prototype._promise=function(n,i,l){var p=this;if(n==="readwrite"&&this.mode!=="readwrite")return Et(new ye.ReadOnly("Transaction is readonly"));if(!this.active)return Et(new ye.TransactionInactive);if(this._locked())return new De(function(A,U){p._blockedFuncs.push([function(){p._promise(n,i,l).then(A,U)},qe])});if(l)return rr(function(){var A=new De(function(U,K){p._lock();var J=i(U,K,p);J&&J.then&&J.then(U,K)});return A.finally(function(){return p._unlock()}),A._lib=!0,A});var b=new De(function(A,U){var K=i(A,U,p);K&&K.then&&K.then(A,U)});return b._lib=!0,b},Vn.prototype._root=function(){return this.parent?this.parent._root():this},Vn.prototype.waitFor=function(n){var i,l=this._root(),p=De.resolve(n);l._waitingFor?l._waitingFor=l._waitingFor.then(function(){return p}):(l._waitingFor=p,l._waitingQueue=[],i=l.idbtrans.objectStore(l.storeNames[0]),(function A(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(i.get(-1/0).onsuccess=A)})());var b=l._waitingFor;return new De(function(A,U){p.then(function(K){return l._waitingQueue.push(St(A.bind(null,K)))},function(K){return l._waitingQueue.push(St(U.bind(null,K)))}).finally(function(){l._waitingFor===b&&(l._waitingFor=null)})})},Vn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ye.Abort))},Vn.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(R(i,n))return i[n];var l=this.schema[n];if(!l)throw new ye.NotFound("Table "+n+" not part of transaction");return l=new this.db.Table(n,l,this),l.core=this.db.core.table(n),i[n]=l},Vn);function Vn(){}function pi(n,i,l,p,b,A,U,K){return{name:n,keyPath:i,unique:l,multi:p,auto:b,compound:A,src:(l&&!U?"&":"")+(p?"*":"")+(b?"++":"")+Ma(i),type:K}}function Ma(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Kr(n,i,l){return{name:n,primKey:i,indexes:l,mappedClass:null,idxByName:(p=function(b){return[b.name,b]},l.reduce(function(b,A,U){return U=p(A,U),U&&(b[U[0]]=U[1]),b},{}))};var p}var un=function(n){try{return n.only([[]]),un=function(){return[[]]},[[]]}catch{return un=function(){return Pr},Pr}};function ps(n){return n==null?function(){}:typeof n=="string"?(i=n).split(".").length===1?function(l){return l[i]}:function(l){return I(l,i)}:function(l){return I(l,n)};var i}function Fa(n){return[].slice.call(n)}var Gn=0;function _n(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Li(n,i,J){function p(oe){if(oe.type===3)return null;if(oe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=oe.lower,$=oe.upper,re=oe.lowerOpen,oe=oe.upperOpen;return Q===void 0?$===void 0?null:i.upperBound($,!!oe):$===void 0?i.lowerBound(Q,!!re):i.bound(Q,$,!!re,!!oe)}function b(te){var Q,$=te.name;return{name:$,schema:te,mutate:function(re){var oe=re.trans,ce=re.type,de=re.keys,me=re.values,Se=re.range;return new Promise(function(Ee,Ne){Ee=St(Ee);var Pe=oe.objectStore($),ke=Pe.keyPath==null,Oe=ce==="put"||ce==="add";if(!Oe&&ce!=="delete"&&ce!=="deleteRange")throw new Error("Invalid operation type: "+ce);var Ae,Le=(de||me||{length:1}).length;if(de&&me&&de.length!==me.length)throw new Error("Given keys array must have same length as given values array.");if(Le===0)return Ee({numFailures:0,failures:{},results:[],lastResult:void 0});function Xe(Dt){++dn,Vr(Dt)}var Qe=[],$e=[],dn=0;if(ce==="deleteRange"){if(Se.type===4)return Ee({numFailures:dn,failures:$e,results:[],lastResult:void 0});Se.type===3?Qe.push(Ae=Pe.clear()):Qe.push(Ae=Pe.delete(p(Se)))}else{var ke=Oe?ke?[me,de]:[me,null]:[de,null],Ye=ke[0],Ht=ke[1];if(Oe)for(var Wt=0;Wt<Le;++Wt)Qe.push(Ae=Ht&&Ht[Wt]!==void 0?Pe[ce](Ye[Wt],Ht[Wt]):Pe[ce](Ye[Wt])),Ae.onerror=Xe;else for(Wt=0;Wt<Le;++Wt)Qe.push(Ae=Pe[ce](Ye[Wt])),Ae.onerror=Xe}function Si(Dt){Dt=Dt.target.result,Qe.forEach(function(pr,ei){return pr.error!=null&&($e[ei]=pr.error)}),Ee({numFailures:dn,failures:$e,results:ce==="delete"?de:Qe.map(function(pr){return pr.result}),lastResult:Dt})}Ae.onerror=function(Dt){Xe(Dt),Si(Dt)},Ae.onsuccess=Si})},getMany:function(re){var oe=re.trans,ce=re.keys;return new Promise(function(de,me){de=St(de);for(var Se,Ee=oe.objectStore($),Ne=ce.length,Pe=new Array(Ne),ke=0,Oe=0,Ae=function(Qe){Qe=Qe.target,Pe[Qe._pos]=Qe.result,++Oe===ke&&de(Pe)},Le=bn(me),Xe=0;Xe<Ne;++Xe)ce[Xe]!=null&&((Se=Ee.get(ce[Xe]))._pos=Xe,Se.onsuccess=Ae,Se.onerror=Le,++ke);ke===0&&de(Pe)})},get:function(re){var oe=re.trans,ce=re.key;return new Promise(function(de,me){de=St(de);var Se=oe.objectStore($).get(ce);Se.onsuccess=function(Ee){return de(Ee.target.result)},Se.onerror=bn(me)})},query:(Q=ee,function(re){return new Promise(function(oe,ce){oe=St(oe);var de,me,Se,ke=re.trans,Ee=re.values,Ne=re.limit,Ae=re.query,Pe=Ne===1/0?void 0:Ne,Oe=Ae.index,Ae=Ae.range,ke=ke.objectStore($),Oe=Oe.isPrimaryKey?ke:ke.index(Oe.name),Ae=p(Ae);if(Ne===0)return oe({result:[]});Q?((Pe=Ee?Oe.getAll(Ae,Pe):Oe.getAllKeys(Ae,Pe)).onsuccess=function(Le){return oe({result:Le.target.result})},Pe.onerror=bn(ce)):(de=0,me=!Ee&&"openKeyCursor"in Oe?Oe.openKeyCursor(Ae):Oe.openCursor(Ae),Se=[],me.onsuccess=function(Le){var Xe=me.result;return Xe?(Se.push(Ee?Xe.value:Xe.primaryKey),++de===Ne?oe({result:Se}):void Xe.continue()):oe({result:Se})},me.onerror=bn(ce))})}),openCursor:function(re){var oe=re.trans,ce=re.values,de=re.query,me=re.reverse,Se=re.unique;return new Promise(function(Ee,Ne){Ee=St(Ee);var Oe=de.index,Pe=de.range,ke=oe.objectStore($),ke=Oe.isPrimaryKey?ke:ke.index(Oe.name),Oe=me?Se?"prevunique":"prev":Se?"nextunique":"next",Ae=!ce&&"openKeyCursor"in ke?ke.openKeyCursor(p(Pe),Oe):ke.openCursor(p(Pe),Oe);Ae.onerror=bn(Ne),Ae.onsuccess=St(function(Le){var Xe,Qe,$e,dn,Ye=Ae.result;Ye?(Ye.___id=++Gn,Ye.done=!1,Xe=Ye.continue.bind(Ye),Qe=(Qe=Ye.continuePrimaryKey)&&Qe.bind(Ye),$e=Ye.advance.bind(Ye),dn=function(){throw new Error("Cursor not stopped")},Ye.trans=oe,Ye.stop=Ye.continue=Ye.continuePrimaryKey=Ye.advance=function(){throw new Error("Cursor not started")},Ye.fail=St(Ne),Ye.next=function(){var Ht=this,Wt=1;return this.start(function(){return Wt--?Ht.continue():Ht.stop()}).then(function(){return Ht})},Ye.start=function(Ht){function Wt(){if(Ae.result)try{Ht()}catch(Dt){Ye.fail(Dt)}else Ye.done=!0,Ye.start=function(){throw new Error("Cursor behind last entry")},Ye.stop()}var Si=new Promise(function(Dt,pr){Dt=St(Dt),Ae.onerror=bn(pr),Ye.fail=pr,Ye.stop=function(ei){Ye.stop=Ye.continue=Ye.continuePrimaryKey=Ye.advance=dn,Dt(ei)}});return Ae.onsuccess=St(function(Dt){Ae.onsuccess=Wt,Wt()}),Ye.continue=Xe,Ye.continuePrimaryKey=Qe,Ye.advance=$e,Wt(),Si},Ee(Ye)):Ee(null)},Ne)})},count:function(re){var oe=re.query,ce=re.trans,de=oe.index,me=oe.range;return new Promise(function(Se,Ee){var Ne=ce.objectStore($),Pe=de.isPrimaryKey?Ne:Ne.index(de.name),Ne=p(me),Pe=Ne?Pe.count(Ne):Pe.count();Pe.onsuccess=St(function(ke){return Se(ke.target.result)}),Pe.onerror=bn(Ee)})}}}var A,U,K,ae=(U=J,K=Fa((A=n).objectStoreNames),{schema:{name:A.name,tables:K.map(function(te){return U.objectStore(te)}).map(function(te){var Q=te.keyPath,oe=te.autoIncrement,$=d(Q),re={},oe={name:te.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:$,keyPath:Q,autoIncrement:oe,unique:!0,extractKey:ps(Q)},indexes:Fa(te.indexNames).map(function(ce){return te.index(ce)}).map(function(Se){var de=Se.name,me=Se.unique,Ee=Se.multiEntry,Se=Se.keyPath,Ee={name:de,compound:d(Se),keyPath:Se,unique:me,multiEntry:Ee,extractKey:ps(Se)};return re[_n(Se)]=Ee}),getIndexByKeyPath:function(ce){return re[_n(ce)]}};return re[":id"]=oe.primaryKey,Q!=null&&(re[_n(Q)]=oe.primaryKey),oe})},hasGetAll:0<K.length&&"getAll"in U.objectStore(K[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),J=ae.schema,ee=ae.hasGetAll,ae=J.tables.map(b),Y={};return ae.forEach(function(te){return Y[te.name]=te}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(te){if(!Y[te])throw new Error("Table '".concat(te,"' not found"));return Y[te]},MIN_KEY:-1/0,MAX_KEY:un(i),schema:J}}function ms(n,i,l,p){var b=l.IDBKeyRange;return l.indexedDB,{dbcore:(p=Li(i,b,p),n.dbcore.reduce(function(A,U){return U=U.create,T(T({},A),U(A))},p))}}function mi(n,p){var l=p.db,p=ms(n._middlewares,l,n._deps,p);n.core=p.dbcore,n.tables.forEach(function(b){var A=b.name;n.core.schema.tables.some(function(U){return U.name===A})&&(b.core=n.core.table(A),n[A]instanceof n.Table&&(n[A].core=b.core))})}function Gi(n,i,l,p){l.forEach(function(b){var A=p[b];i.forEach(function(U){var K=(function J(ee,ae){return M(ee,ae)||(ee=S(ee))&&J(ee,ae)})(U,b);(!K||"value"in K&&K.value===void 0)&&(U===n.Transaction.prototype||U instanceof n.Transaction?g(U,b,{get:function(){return this.table(b)},set:function(J){f(this,b,{value:J,writable:!0,configurable:!0,enumerable:!0})}}):U[b]=new n.Table(b,A))})})}function Cn(n,i){i.forEach(function(l){for(var p in l)l[p]instanceof n.Table&&delete l[p]})}function Hr(n,i){return n._cfg.version-i._cfg.version}function Wr(n,i,l,p){var b=n._dbSchema;l.objectStoreNames.contains("$meta")&&!b.$meta&&(b.$meta=Kr("$meta",cr("")[0],[]),n._storeNames.push("$meta"));var A=n._createTransaction("readwrite",n._storeNames,b);A.create(l),A._completion.catch(p);var U=A._reject.bind(A),K=qe.transless||qe;rr(function(){return qe.trans=A,qe.transless=K,i!==0?(mi(n,l),ee=i,((J=A).storeNames.includes("$meta")?J.table("$meta").get("version").then(function(ae){return ae??ee}):De.resolve(ee)).then(function(ae){return te=ae,Q=A,$=l,re=[],ae=(Y=n)._versions,oe=Y._dbSchema=Pn(0,Y.idbdb,$),(ae=ae.filter(function(ce){return ce._cfg.version>=te})).length!==0?(ae.forEach(function(ce){re.push(function(){var de=oe,me=ce._cfg.dbschema;kn(Y,de,$),kn(Y,me,$),oe=Y._dbSchema=me;var Se=Yr(de,me);Se.add.forEach(function(Oe){cn($,Oe[0],Oe[1].primKey,Oe[1].indexes)}),Se.change.forEach(function(Oe){if(Oe.recreate)throw new ye.Upgrade("Not yet support for changing primary key");var Ae=$.objectStore(Oe.name);Oe.add.forEach(function(Le){return Kn(Ae,Le)}),Oe.change.forEach(function(Le){Ae.deleteIndex(Le.name),Kn(Ae,Le)}),Oe.del.forEach(function(Le){return Ae.deleteIndex(Le)})});var Ee=ce._cfg.contentUpgrade;if(Ee&&ce._cfg.version>te){mi(Y,$),Q._memoizedTables={};var Ne=F(me);Se.del.forEach(function(Oe){Ne[Oe]=de[Oe]}),Cn(Y,[Y.Transaction.prototype]),Gi(Y,[Y.Transaction.prototype],h(Ne),Ne),Q.schema=Ne;var Pe,ke=X(Ee);return ke&&Ur(),Se=De.follow(function(){var Oe;(Pe=Ee(Q))&&ke&&(Oe=ir.bind(null,null),Pe.then(Oe,Oe))}),Pe&&typeof Pe.then=="function"?De.resolve(Pe):Se.then(function(){return Pe})}}),re.push(function(de){var me,Se,Ee=ce._cfg.dbschema;me=Ee,Se=de,[].slice.call(Se.db.objectStoreNames).forEach(function(Ne){return me[Ne]==null&&Se.db.deleteObjectStore(Ne)}),Cn(Y,[Y.Transaction.prototype]),Gi(Y,[Y.Transaction.prototype],Y._storeNames,Y._dbSchema),Q.schema=Y._dbSchema}),re.push(function(de){Y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Y.idbdb.version/10)===ce._cfg.version?(Y.idbdb.deleteObjectStore("$meta"),delete Y._dbSchema.$meta,Y._storeNames=Y._storeNames.filter(function(me){return me!=="$meta"})):de.objectStore("$meta").put(ce._cfg.version,"version"))})}),(function ce(){return re.length?De.resolve(re.shift()(Q.idbtrans)).then(ce):De.resolve()})().then(function(){wn(oe,$)})):De.resolve();var Y,te,Q,$,re,oe}).catch(U)):(h(b).forEach(function(ae){cn(l,ae,b[ae].primKey,b[ae].indexes)}),mi(n,l),void De.follow(function(){return n.on.populate.fire(A)}).catch(U));var J,ee})}function Bi(n,i){wn(n._dbSchema,i),i.db.version%10!=0||i.objectStoreNames.contains("$meta")||i.db.createObjectStore("$meta").add(Math.ceil(i.db.version/10-1),"version");var l=Pn(0,n.idbdb,i);kn(n,n._dbSchema,i);for(var p=0,b=Yr(l,n._dbSchema).change;p<b.length;p++){var A=(function(U){if(U.change.length||U.recreate)return console.warn("Unable to patch indexes of table ".concat(U.name," because it has changes on the type of index or primary key.")),{value:void 0};var K=i.objectStore(U.name);U.add.forEach(function(J){Xt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(U.name,".").concat(J.src)),Kn(K,J)})})(b[p]);if(typeof A=="object")return A.value}}function Yr(n,i){var l,p={del:[],add:[],change:[]};for(l in n)i[l]||p.del.push(l);for(l in i){var b=n[l],A=i[l];if(b){var U={name:l,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(b.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||b.primKey.auto!==A.primKey.auto)U.recreate=!0,p.change.push(U);else{var K=b.idxByName,J=A.idxByName,ee=void 0;for(ee in K)J[ee]||U.del.push(ee);for(ee in J){var ae=K[ee],Y=J[ee];ae?ae.src!==Y.src&&U.change.push(Y):U.add.push(Y)}(0<U.del.length||0<U.add.length||0<U.change.length)&&p.change.push(U)}}else p.add.push([l,A])}return p}function cn(n,i,l,p){var b=n.db.createObjectStore(i,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return p.forEach(function(A){return Kn(b,A)}),b}function wn(n,i){h(n).forEach(function(l){i.db.objectStoreNames.contains(l)||(Xt&&console.debug("Dexie: Creating missing table",l),cn(i,l,n[l].primKey,n[l].indexes))})}function Kn(n,i){n.createIndex(i.name,i.keyPath,{unique:i.unique,multiEntry:i.multi})}function Pn(n,i,l){var p={};return v(i.objectStoreNames,0).forEach(function(b){for(var A=l.objectStore(b),U=pi(Ma(ee=A.keyPath),ee||"",!0,!1,!!A.autoIncrement,ee&&typeof ee!="string",!0),K=[],J=0;J<A.indexNames.length;++J){var ae=A.index(A.indexNames[J]),ee=ae.keyPath,ae=pi(ae.name,ee,!!ae.unique,!!ae.multiEntry,!1,ee&&typeof ee!="string",!1);K.push(ae)}p[b]=Kr(b,U,K)}),p}function kn(n,i,l){for(var p=l.db.objectStoreNames,b=0;b<p.length;++b){var A=p[b],U=l.objectStore(A);n._hasGetAll="getAll"in U;for(var K=0;K<U.indexNames.length;++K){var J=U.indexNames[K],ee=U.index(J).keyPath,ae=typeof ee=="string"?ee:"["+v(ee).join("+")+"]";!i[A]||(ee=i[A].idxByName[ae])&&(ee.name=J,delete i[A].idxByName[ae],i[A].idxByName[J]=ee)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&m.WorkerGlobalScope&&m instanceof m.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function cr(n){return n.split(",").map(function(i,l){var A=i.split(":"),p=(b=A[1])===null||b===void 0?void 0:b.trim(),b=(i=A[0].trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(b)?b.match(/^\[(.*)\]$/)[1].split("+"):b;return pi(b,A||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),d(A),l===0,p)})}var Ia=(hr.prototype._createTableSchema=Kr,hr.prototype._parseIndexSyntax=cr,hr.prototype._parseStoresSpec=function(n,i){var l=this;h(n).forEach(function(p){if(n[p]!==null){var b=l._parseIndexSyntax(n[p]),A=b.shift();if(!A)throw new ye.Schema("Invalid schema for table "+p+": "+n[p]);if(A.unique=!0,A.multi)throw new ye.Schema("Primary key cannot be multiEntry*");b.forEach(function(U){if(U.auto)throw new ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!U.keyPath)throw new ye.Schema("Index must have a name and cannot be an empty string")}),b=l._createTableSchema(p,A,b),i[p]=b}})},hr.prototype.stores=function(l){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,l):l;var l=i._versions,p={},b={};return l.forEach(function(A){y(p,A._cfg.storesSource),b=A._cfg.dbschema={},A._parseStoresSpec(p,b)}),i._dbSchema=b,Cn(i,[i._allTables,i,i.Transaction.prototype]),Gi(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],h(b),b),i._storeNames=h(b),this},hr.prototype.upgrade=function(n){return this._cfg.contentUpgrade=Rt(this._cfg.contentUpgrade||Fe,n),this},hr);function hr(){}function yi(n,i){var l=n._dbNamesDB;return l||(l=n._dbNamesDB=new jn(zr,{addons:[],indexedDB:n,IDBKeyRange:i})).version(1).stores({dbnames:"name"}),l.table("dbnames")}function rn(n){return n&&typeof n.databases=="function"}function hn(n){return rr(function(){return qe.letThrough=!0,n()})}function vt(n){return!("from"in n)}var Tt=function(n,i){if(!this){var l=new Tt;return n&&"d"in n&&y(l,n),l}y(this,arguments.length?{d:1,from:n,to:1<arguments.length?i:n}:{d:0})};function sn(n,i,l){var p=Ve(i,l);if(!isNaN(p)){if(0<p)throw RangeError();if(vt(n))return y(n,{from:i,to:l,d:1});var b=n.l,p=n.r;if(Ve(l,n.from)<0)return b?sn(b,i,l):n.l={from:i,to:l,d:1,l:null,r:null},ji(n);if(0<Ve(i,n.to))return p?sn(p,i,l):n.r={from:i,to:l,d:1,l:null,r:null},ji(n);Ve(i,n.from)<0&&(n.from=i,n.l=null,n.d=p?p.d+1:1),0<Ve(l,n.to)&&(n.to=l,n.r=null,n.d=n.l?n.l.d+1:1),l=!n.r,b&&!n.l&&Xr(n,b),p&&l&&Xr(n,p)}}function Xr(n,i){vt(i)||(function l(p,J){var A=J.from,U=J.to,K=J.l,J=J.r;sn(p,A,U),K&&l(p,K),J&&l(p,J)})(n,i)}function ys(n,i){var l=Qr(i),p=l.next();if(p.done)return!1;for(var b=p.value,A=Qr(n),U=A.next(b.from),K=U.value;!p.done&&!U.done;){if(Ve(K.from,b.to)<=0&&0<=Ve(K.to,b.from))return!0;Ve(b.from,K.from)<0?b=(p=l.next(K.from)).value:K=(U=A.next(b.from)).value}return!1}function Qr(n){var i=vt(n)?null:{s:0,n};return{next:function(l){for(var p=0<arguments.length;i;)switch(i.s){case 0:if(i.s=1,p)for(;i.n.l&&Ve(l,i.n.from)<0;)i={up:i,n:i.n.l,s:1};else for(;i.n.l;)i={up:i,n:i.n.l,s:1};case 1:if(i.s=2,!p||Ve(l,i.n.to)<=0)return{value:i.n,done:!1};case 2:if(i.n.r){i.s=3,i={up:i,n:i.n.r,s:0};continue}case 3:i=i.up}return{done:!0}}}}function ji(n){var i,l,p=(((i=n.r)===null||i===void 0?void 0:i.d)||0)-(((l=n.l)===null||l===void 0?void 0:l.d)||0),b=1<p?"r":p<-1?"l":"";b&&(i=b=="r"?"l":"r",l=T({},n),p=n[b],n.from=p.from,n.to=p.to,n[b]=p[b],l[b]=p[i],(n[i]=l).d=vs(l)),n.d=vs(n)}function vs(l){var i=l.r,l=l.l;return(i?l?Math.max(i.d,l.d):i.d:l?l.d:0)+1}function Ar(n,i){return h(i).forEach(function(l){n[l]?Xr(n[l],i[l]):n[l]=(function p(b){var A,U,K={};for(A in b)R(b,A)&&(U=b[A],K[A]=!U||typeof U!="object"||H.has(U.constructor)?U:p(U));return K})(i[l])}),n}function Ui(n,i){return n.all||i.all||Object.keys(n).some(function(l){return i[l]&&ys(i[l],n[l])})}w(Tt.prototype,((It={add:function(n){return Xr(this,n),this},addKey:function(n){return sn(this,n,n),this},addKeys:function(n){var i=this;return n.forEach(function(l){return sn(i,l,l)}),this},hasKey:function(n){var i=Qr(this).next(n).value;return i&&Ve(i.from,n)<=0&&0<=Ve(i.to,n)}})[Ce]=function(){return Qr(this)},It));var En={},vi={},_s=!1;function Or(n){Ar(vi,n),_s||(_s=!0,setTimeout(function(){_s=!1,ws(vi,!(vi={}))},0))}function ws(n,i){i===void 0&&(i=!1);var l=new Set;if(n.all)for(var p=0,b=Object.values(En);p<b.length;p++)Jr(U=b[p],n,l,i);else for(var A in n){var U,K=/^idb\:\/\/(.*)\/(.*)\//.exec(A);K&&(A=K[1],K=K[2],(U=En["idb://".concat(A,"/").concat(K)])&&Jr(U,n,l,i))}l.forEach(function(J){return J()})}function Jr(n,i,l,p){for(var b=[],A=0,U=Object.entries(n.queries.query);A<U.length;A++){for(var K=U[A],J=K[0],ee=[],ae=0,Y=K[1];ae<Y.length;ae++){var te=Y[ae];Ui(i,te.obsSet)?te.subscribers.forEach(function(oe){return l.add(oe)}):p&&ee.push(te)}p&&b.push([J,ee])}if(p)for(var Q=0,$=b;Q<$.length;Q++){var re=$[Q],J=re[0],ee=re[1];n.queries.query[J]=ee}}function zi(n){var i=n._state,l=n._deps.indexedDB;if(i.isBeingOpened||n.idbdb)return i.dbReadyPromise.then(function(){return i.dbOpenError?Et(i.dbOpenError):n});i.isBeingOpened=!0,i.dbOpenError=null,i.openComplete=!1;var p=i.openCanceller,b=Math.round(10*n.verno),A=!1;function U(){if(i.openCanceller!==p)throw new ye.DatabaseClosed("db.open() was cancelled")}function K(){return new De(function(te,Q){if(U(),!l)throw new ye.MissingAPI;var $=n.name,re=i.autoSchema||!b?l.open($):l.open($,b);if(!re)throw new ye.MissingAPI;re.onerror=bn(Q),re.onblocked=St(n._fireOnBlocked),re.onupgradeneeded=St(function(oe){var ce;ae=re.transaction,i.autoSchema&&!n._options.allowEmptyDB?(re.onerror=Vr,ae.abort(),re.result.close(),(ce=l.deleteDatabase($)).onsuccess=ce.onerror=St(function(){Q(new ye.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(ae.onerror=bn(Q),oe=oe.oldVersion>Math.pow(2,62)?0:oe.oldVersion,Y=oe<1,n.idbdb=re.result,A&&Bi(n,ae),Wr(n,oe/10,ae,Q))},Q),re.onsuccess=St(function(){ae=null;var oe,ce,de,me,Se,Ee=n.idbdb=re.result,Ne=v(Ee.objectStoreNames);if(0<Ne.length)try{var Pe=Ee.transaction((me=Ne).length===1?me[0]:me,"readonly");if(i.autoSchema)ce=Ee,de=Pe,(oe=n).verno=ce.version/10,de=oe._dbSchema=Pn(0,ce,de),oe._storeNames=v(ce.objectStoreNames,0),Gi(oe,[oe._allTables],h(de),de);else if(kn(n,n._dbSchema,Pe),((Se=Yr(Pn(0,(Se=n).idbdb,Pe),Se._dbSchema)).add.length||Se.change.some(function(ke){return ke.add.length||ke.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ee.close(),b=Ee.version+1,A=!0,te(K());mi(n,Pe)}catch{}qn.push(n),Ee.onversionchange=St(function(ke){i.vcFired=!0,n.on("versionchange").fire(ke)}),Ee.onclose=St(function(){n.close({disableAutoOpen:!1})}),Y&&(Se=n._deps,Pe=$,Ee=Se.indexedDB,Se=Se.IDBKeyRange,rn(Ee)||Pe===zr||yi(Ee,Se).put({name:Pe}).catch(Fe)),te()},Q)}).catch(function(te){switch(te?.name){case"UnknownError":if(0<i.PR1398_maxLoop)return i.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),K();break;case"VersionError":if(0<b)return b=0,K()}return De.reject(te)})}var J,ee=i.dbReadyResolve,ae=null,Y=!1;return De.race([p,(typeof navigator>"u"?De.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(te){function Q(){return indexedDB.databases().finally(te)}J=setInterval(Q,100),Q()}).finally(function(){return clearInterval(J)}):Promise.resolve()).then(K)]).then(function(){return U(),i.onReadyBeingFired=[],De.resolve(hn(function(){return n.on.ready.fire(n.vip)})).then(function te(){if(0<i.onReadyBeingFired.length){var Q=i.onReadyBeingFired.reduce(Rt,Fe);return i.onReadyBeingFired=[],De.resolve(hn(function(){return Q(n.vip)})).then(te)}})}).finally(function(){i.openCanceller===p&&(i.onReadyBeingFired=null,i.isBeingOpened=!1)}).catch(function(te){i.dbOpenError=te;try{ae&&ae.abort()}catch{}return p===i.openCanceller&&n._close(),Et(te)}).finally(function(){i.openComplete=!0,ee()}).then(function(){var te;return Y&&(te={},n.tables.forEach(function(Q){Q.schema.indexes.forEach(function($){$.name&&(te["idb://".concat(n.name,"/").concat(Q.name,"/").concat($.name)]=new Tt(-1/0,[[[]]]))}),te["idb://".concat(n.name,"/").concat(Q.name,"/")]=te["idb://".concat(n.name,"/").concat(Q.name,"/:dels")]=new Tt(-1/0,[[[]]])}),_t(gi).fire(te),ws(te,!0)),n})}function qi(n){function i(A){return n.next(A)}var l=b(i),p=b(function(A){return n.throw(A)});function b(A){return function(J){var K=A(J),J=K.value;return K.done?J:J&&typeof J.then=="function"?J.then(l,p):d(J)?Promise.all(J).then(l,p):l(J)}}return b(i)()}function _i(n,i,l){for(var p=d(n)?n.slice():[n],b=0;b<l;++b)p.push(i);return p}var Zr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return T(T({},n),{table:function(i){var l=n.table(i),p=l.schema,b={},A=[];function U(Y,te,Q){var $=_n(Y),re=b[$]=b[$]||[],oe=Y==null?0:typeof Y=="string"?1:Y.length,ce=0<te,ce=T(T({},Q),{name:ce?"".concat($,"(virtual-from:").concat(Q.name,")"):Q.name,lowLevelIndex:Q,isVirtual:ce,keyTail:te,keyLength:oe,extractKey:ps(Y),unique:!ce&&Q.unique});return re.push(ce),ce.isPrimaryKey||A.push(ce),1<oe&&U(oe===2?Y[0]:Y.slice(0,oe-1),te+1,Q),re.sort(function(de,me){return de.keyTail-me.keyTail}),ce}i=U(p.primaryKey.keyPath,0,p.primaryKey),b[":id"]=[i];for(var K=0,J=p.indexes;K<J.length;K++){var ee=J[K];U(ee.keyPath,0,ee)}function ae(Y){var te,Q=Y.query.index;return Q.isVirtual?T(T({},Y),{query:{index:Q.lowLevelIndex,range:(te=Y.query.range,Q=Q.keyTail,{type:te.type===1?2:te.type,lower:_i(te.lower,te.lowerOpen?n.MAX_KEY:n.MIN_KEY,Q),lowerOpen:!0,upper:_i(te.upper,te.upperOpen?n.MIN_KEY:n.MAX_KEY,Q),upperOpen:!0})}}):Y}return T(T({},l),{schema:T(T({},p),{primaryKey:i,indexes:A,getIndexByKeyPath:function(Y){return(Y=b[_n(Y)])&&Y[0]}}),count:function(Y){return l.count(ae(Y))},query:function(Y){return l.query(ae(Y))},openCursor:function(Y){var te=Y.query.index,Q=te.keyTail,$=te.isVirtual,re=te.keyLength;return $?l.openCursor(ae(Y)).then(function(ce){return ce&&oe(ce)}):l.openCursor(Y);function oe(ce){return Object.create(ce,{continue:{value:function(de){de!=null?ce.continue(_i(de,Y.reverse?n.MAX_KEY:n.MIN_KEY,Q)):Y.unique?ce.continue(ce.key.slice(0,re).concat(Y.reverse?n.MIN_KEY:n.MAX_KEY,Q)):ce.continue()}},continuePrimaryKey:{value:function(de,me){ce.continuePrimaryKey(_i(de,n.MAX_KEY,Q),me)}},primaryKey:{get:function(){return ce.primaryKey}},key:{get:function(){var de=ce.key;return re===1?de[0]:de.slice(0,re)}},value:{get:function(){return ce.value}}})}}})}})}};function Vi(n,i,l,p){return l=l||{},p=p||"",h(n).forEach(function(b){var A,U,K;R(i,b)?(A=n[b],U=i[b],typeof A=="object"&&typeof U=="object"&&A&&U?(K=ne(A))!==ne(U)?l[p+b]=i[b]:K==="Object"?Vi(A,U,l,p+b+"."):A!==U&&(l[p+b]=i[b]):A!==U&&(l[p+b]=i[b])):l[p+b]=void 0}),h(i).forEach(function(b){R(n,b)||(l[p+b]=i[b])}),l}function $r(n,i){return i.type==="delete"?i.keys:i.keys||i.values.map(n.extractKey)}var Ki={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return T(T({},n),{table:function(i){var l=n.table(i),p=l.schema.primaryKey;return T(T({},l),{mutate:function(b){var A=qe.trans,U=A.table(i).hook,K=U.deleting,J=U.creating,ee=U.updating;switch(b.type){case"add":if(J.fire===Fe)break;return A._promise("readwrite",function(){return ae(b)},!0);case"put":if(J.fire===Fe&&ee.fire===Fe)break;return A._promise("readwrite",function(){return ae(b)},!0);case"delete":if(K.fire===Fe)break;return A._promise("readwrite",function(){return ae(b)},!0);case"deleteRange":if(K.fire===Fe)break;return A._promise("readwrite",function(){return(function Y(te,Q,$){return l.query({trans:te,values:!1,query:{index:p,range:Q},limit:$}).then(function(re){var oe=re.result;return ae({type:"delete",keys:oe,trans:te}).then(function(ce){return 0<ce.numFailures?Promise.reject(ce.failures[0]):oe.length<$?{failures:[],numFailures:0,lastResult:void 0}:Y(te,T(T({},Q),{lower:oe[oe.length-1],lowerOpen:!0}),$)})})})(b.trans,b.range,1e4)},!0)}return l.mutate(b);function ae(Y){var te,Q,$,re=qe.trans,oe=Y.keys||$r(p,Y);if(!oe)throw new Error("Keys missing");return(Y=Y.type==="add"||Y.type==="put"?T(T({},Y),{keys:oe}):T({},Y)).type!=="delete"&&(Y.values=O([],Y.values)),Y.keys&&(Y.keys=O([],Y.keys)),te=l,$=oe,((Q=Y).type==="add"?Promise.resolve([]):te.getMany({trans:Q.trans,keys:$,cache:"immutable"})).then(function(ce){var de=oe.map(function(me,Se){var Ee,Ne,Pe,ke=ce[Se],Oe={onerror:null,onsuccess:null};return Y.type==="delete"?K.fire.call(Oe,me,ke,re):Y.type==="add"||ke===void 0?(Ee=J.fire.call(Oe,me,Y.values[Se],re),me==null&&Ee!=null&&(Y.keys[Se]=me=Ee,p.outbound||W(Y.values[Se],p.keyPath,me))):(Ee=Vi(ke,Y.values[Se]),(Ne=ee.fire.call(Oe,Ee,me,ke,re))&&(Pe=Y.values[Se],Object.keys(Ne).forEach(function(Ae){R(Pe,Ae)?Pe[Ae]=Ne[Ae]:W(Pe,Ae,Ne[Ae])}))),Oe});return l.mutate(Y).then(function(me){for(var Se=me.failures,Ee=me.results,Ne=me.numFailures,me=me.lastResult,Pe=0;Pe<oe.length;++Pe){var ke=(Ee||oe)[Pe],Oe=de[Pe];ke==null?Oe.onerror&&Oe.onerror(Se[Pe]):Oe.onsuccess&&Oe.onsuccess(Y.type==="put"&&ce[Pe]?Y.values[Pe]:ke)}return{failures:Se,results:Ee,numFailures:Ne,lastResult:me}}).catch(function(me){return de.forEach(function(Se){return Se.onerror&&Se.onerror(me)}),Promise.reject(me)})})}}})}})}};function Nr(n,i,l){try{if(!i||i.keys.length<n.length)return null;for(var p=[],b=0,A=0;b<i.keys.length&&A<n.length;++b)Ve(i.keys[b],n[A])===0&&(p.push(l?se(i.values[b]):i.values[b]),++A);return p.length===n.length?p:null}catch{return null}}var Ss={stack:"dbcore",level:-1,create:function(n){return{table:function(i){var l=n.table(i);return T(T({},l),{getMany:function(p){if(!p.cache)return l.getMany(p);var b=Nr(p.keys,p.trans._cache,p.cache==="clone");return b?De.resolve(b):l.getMany(p).then(function(A){return p.trans._cache={keys:p.keys,values:p.cache==="clone"?se(A):A},A})},mutate:function(p){return p.type!=="add"&&(p.trans._cache=null),l.mutate(p)}})}}}};function Hi(n,i){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!i.schema.primaryKey.outbound}function xs(n,i){switch(n){case"query":return i.values&&!i.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var bs={stack:"dbcore",level:0,name:"Observability",create:function(n){var i=n.schema.name,l=new Tt(n.MIN_KEY,n.MAX_KEY);return T(T({},n),{transaction:function(p,b,A){if(qe.subscr&&b!=="readonly")throw new ye.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(qe.querier));return n.transaction(p,b,A)},table:function(p){var b=n.table(p),A=b.schema,U=A.primaryKey,Y=A.indexes,K=U.extractKey,J=U.outbound,ee=U.autoIncrement&&Y.filter(function(Q){return Q.compound&&Q.keyPath.includes(U.keyPath)}),ae=T(T({},b),{mutate:function(Q){function $(Ae){return Ae="idb://".concat(i,"/").concat(p,"/").concat(Ae),me[Ae]||(me[Ae]=new Tt)}var re,oe,ce,de=Q.trans,me=Q.mutatedParts||(Q.mutatedParts={}),Se=$(""),Ee=$(":dels"),Ne=Q.type,Oe=Q.type==="deleteRange"?[Q.range]:Q.type==="delete"?[Q.keys]:Q.values.length<50?[$r(U,Q).filter(function(Ae){return Ae}),Q.values]:[],Pe=Oe[0],ke=Oe[1],Oe=Q.trans._cache;return d(Pe)?(Se.addKeys(Pe),(Oe=Ne==="delete"||Pe.length===ke.length?Nr(Pe,Oe):null)||Ee.addKeys(Pe),(Oe||ke)&&(re=$,oe=Oe,ce=ke,A.indexes.forEach(function(Ae){var Le=re(Ae.name||"");function Xe($e){return $e!=null?Ae.extractKey($e):null}function Qe($e){return Ae.multiEntry&&d($e)?$e.forEach(function(dn){return Le.addKey(dn)}):Le.addKey($e)}(oe||ce).forEach(function($e,Ht){var Ye=oe&&Xe(oe[Ht]),Ht=ce&&Xe(ce[Ht]);Ve(Ye,Ht)!==0&&(Ye!=null&&Qe(Ye),Ht!=null&&Qe(Ht))})}))):Pe?(ke={from:(ke=Pe.lower)!==null&&ke!==void 0?ke:n.MIN_KEY,to:(ke=Pe.upper)!==null&&ke!==void 0?ke:n.MAX_KEY},Ee.add(ke),Se.add(ke)):(Se.add(l),Ee.add(l),A.indexes.forEach(function(Ae){return $(Ae.name).add(l)})),b.mutate(Q).then(function(Ae){return!Pe||Q.type!=="add"&&Q.type!=="put"||(Se.addKeys(Ae.results),ee&&ee.forEach(function(Le){for(var Xe=Q.values.map(function(Ye){return Le.extractKey(Ye)}),Qe=Le.keyPath.findIndex(function(Ye){return Ye===U.keyPath}),$e=0,dn=Ae.results.length;$e<dn;++$e)Xe[$e][Qe]=Ae.results[$e];$(Le.name).addKeys(Xe)})),de.mutatedParts=Ar(de.mutatedParts||{},me),Ae})}}),Y=function($){var re=$.query,$=re.index,re=re.range;return[$,new Tt(($=re.lower)!==null&&$!==void 0?$:n.MIN_KEY,(re=re.upper)!==null&&re!==void 0?re:n.MAX_KEY)]},te={get:function(Q){return[U,new Tt(Q.key)]},getMany:function(Q){return[U,new Tt().addKeys(Q.keys)]},count:Y,query:Y,openCursor:Y};return h(te).forEach(function(Q){ae[Q]=function($){var re=qe.subscr,oe=!!re,ce=Hi(qe,b)&&xs(Q,$)?$.obsSet={}:re;if(oe){var de=function(ke){return ke="idb://".concat(i,"/").concat(p,"/").concat(ke),ce[ke]||(ce[ke]=new Tt)},me=de(""),Se=de(":dels"),re=te[Q]($),oe=re[0],re=re[1];if((Q==="query"&&oe.isPrimaryKey&&!$.values?Se:de(oe.name||"")).add(re),!oe.isPrimaryKey){if(Q!=="count"){var Ee=Q==="query"&&J&&$.values&&b.query(T(T({},$),{values:!1}));return b[Q].apply(this,arguments).then(function(ke){if(Q==="query"){if(J&&$.values)return Ee.then(function(Xe){return Xe=Xe.result,me.addKeys(Xe),ke});var Oe=$.values?ke.result.map(K):ke.result;($.values?me:Se).addKeys(Oe)}else if(Q==="openCursor"){var Ae=ke,Le=$.values;return Ae&&Object.create(Ae,{key:{get:function(){return Se.addKey(Ae.primaryKey),Ae.key}},primaryKey:{get:function(){var Xe=Ae.primaryKey;return Se.addKey(Xe),Xe}},value:{get:function(){return Le&&me.addKey(Ae.primaryKey),Ae.value}}})}return ke})}Se.add(l)}}return b[Q].apply(this,arguments)}}),ae}})}};function Wi(n,i,l){if(l.numFailures===0)return i;if(i.type==="deleteRange")return null;var p=i.keys?i.keys.length:"values"in i&&i.values?i.values.length:1;return l.numFailures===p?null:(i=T({},i),d(i.keys)&&(i.keys=i.keys.filter(function(b,A){return!(A in l.failures)})),"values"in i&&d(i.values)&&(i.values=i.values.filter(function(b,A){return!(A in l.failures)})),i)}function dr(n,i){return l=n,((p=i).lower===void 0||(p.lowerOpen?0<Ve(l,p.lower):0<=Ve(l,p.lower)))&&(n=n,(i=i).upper===void 0||(i.upperOpen?Ve(n,i.upper)<0:Ve(n,i.upper)<=0));var l,p}function Sn(n,i,te,p,b,A){if(!te||te.length===0)return n;var U=i.query.index,K=U.multiEntry,J=i.query.range,ee=p.schema.primaryKey.extractKey,ae=U.extractKey,Y=(U.lowLevelIndex||U).extractKey,te=te.reduce(function(Q,$){var re=Q,oe=[];if($.type==="add"||$.type==="put")for(var ce=new Tt,de=$.values.length-1;0<=de;--de){var me,Se=$.values[de],Ee=ee(Se);ce.hasKey(Ee)||(me=ae(Se),(K&&d(me)?me.some(function(Ae){return dr(Ae,J)}):dr(me,J))&&(ce.addKey(Ee),oe.push(Se)))}switch($.type){case"add":var Ne=new Tt().addKeys(i.values?Q.map(function(Le){return ee(Le)}):Q),re=Q.concat(i.values?oe.filter(function(Le){return Le=ee(Le),!Ne.hasKey(Le)&&(Ne.addKey(Le),!0)}):oe.map(function(Le){return ee(Le)}).filter(function(Le){return!Ne.hasKey(Le)&&(Ne.addKey(Le),!0)}));break;case"put":var Pe=new Tt().addKeys($.values.map(function(Le){return ee(Le)}));re=Q.filter(function(Le){return!Pe.hasKey(i.values?ee(Le):Le)}).concat(i.values?oe:oe.map(function(Le){return ee(Le)}));break;case"delete":var ke=new Tt().addKeys($.keys);re=Q.filter(function(Le){return!ke.hasKey(i.values?ee(Le):Le)});break;case"deleteRange":var Oe=$.range;re=Q.filter(function(Le){return!dr(ee(Le),Oe)})}return re},n);return te===n?n:(te.sort(function(Q,$){return Ve(Y(Q),Y($))||Ve(ee(Q),ee($))}),i.limit&&i.limit<1/0&&(te.length>i.limit?te.length=i.limit:n.length===i.limit&&te.length<i.limit&&(b.dirty=!0)),A?Object.freeze(te):te)}function fr(n,i){return Ve(n.lower,i.lower)===0&&Ve(n.upper,i.upper)===0&&!!n.lowerOpen==!!i.lowerOpen&&!!n.upperOpen==!!i.upperOpen}function Cs(n,i){return(function(l,p,b,A){if(l===void 0)return p!==void 0?-1:0;if(p===void 0)return 1;if((p=Ve(l,p))===0){if(b&&A)return 0;if(b)return 1;if(A)return-1}return p})(n.lower,i.lower,n.lowerOpen,i.lowerOpen)<=0&&0<=(function(l,p,b,A){if(l===void 0)return p!==void 0?1:0;if(p===void 0)return-1;if((p=Ve(l,p))===0){if(b&&A)return 0;if(b)return-1;if(A)return 1}return p})(n.upper,i.upper,n.upperOpen,i.upperOpen)}function Da(n,i,l,p){n.subscribers.add(l),p.addEventListener("abort",function(){var b,A;n.subscribers.delete(l),n.subscribers.size===0&&(b=n,A=i,setTimeout(function(){b.subscribers.size===0&&L(A,b)},3e3))})}var Hn={stack:"dbcore",level:0,name:"Cache",create:function(n){var i=n.schema.name;return T(T({},n),{transaction:function(l,p,b){var A,U,K=n.transaction(l,p,b);return p==="readwrite"&&(U=(A=new AbortController).signal,b=function(J){return function(){if(A.abort(),p==="readwrite"){for(var ee=new Set,ae=0,Y=l;ae<Y.length;ae++){var te=Y[ae],Q=En["idb://".concat(i,"/").concat(te)];if(Q){var $=n.table(te),re=Q.optimisticOps.filter(function(Le){return Le.trans===K});if(K._explicit&&J&&K.mutatedParts)for(var oe=0,ce=Object.values(Q.queries.query);oe<ce.length;oe++)for(var de=0,me=(Ne=ce[oe]).slice();de<me.length;de++)Ui((Pe=me[de]).obsSet,K.mutatedParts)&&(L(Ne,Pe),Pe.subscribers.forEach(function(Le){return ee.add(Le)}));else if(0<re.length){Q.optimisticOps=Q.optimisticOps.filter(function(Le){return Le.trans!==K});for(var Se=0,Ee=Object.values(Q.queries.query);Se<Ee.length;Se++)for(var Ne,Pe,ke,Oe=0,Ae=(Ne=Ee[Se]).slice();Oe<Ae.length;Oe++)(Pe=Ae[Oe]).res!=null&&K.mutatedParts&&(J&&!Pe.dirty?(ke=Object.isFrozen(Pe.res),ke=Sn(Pe.res,Pe.req,re,$,Pe,ke),Pe.dirty?(L(Ne,Pe),Pe.subscribers.forEach(function(Le){return ee.add(Le)})):ke!==Pe.res&&(Pe.res=ke,Pe.promise=De.resolve({result:ke}))):(Pe.dirty&&L(Ne,Pe),Pe.subscribers.forEach(function(Le){return ee.add(Le)})))}}}ee.forEach(function(Le){return Le()})}}},K.addEventListener("abort",b(!1),{signal:U}),K.addEventListener("error",b(!1),{signal:U}),K.addEventListener("complete",b(!0),{signal:U})),K},table:function(l){var p=n.table(l),b=p.schema.primaryKey;return T(T({},p),{mutate:function(A){var U=qe.trans;if(b.outbound||U.db._options.cache==="disabled"||U.explicit||U.idbtrans.mode!=="readwrite")return p.mutate(A);var K=En["idb://".concat(i,"/").concat(l)];return K?(U=p.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||$r(b,A).some(function(J){return J==null}))?(K.optimisticOps.push(A),A.mutatedParts&&Or(A.mutatedParts),U.then(function(J){0<J.numFailures&&(L(K.optimisticOps,A),(J=Wi(0,A,J))&&K.optimisticOps.push(J),A.mutatedParts&&Or(A.mutatedParts))}),U.catch(function(){L(K.optimisticOps,A),A.mutatedParts&&Or(A.mutatedParts)})):U.then(function(J){var ee=Wi(0,T(T({},A),{values:A.values.map(function(ae,Y){var te;return J.failures[Y]?ae:(ae=(te=b.keyPath)!==null&&te!==void 0&&te.includes(".")?se(ae):T({},ae),W(ae,b.keyPath,J.results[Y]),ae)})}),J);K.optimisticOps.push(ee),queueMicrotask(function(){return A.mutatedParts&&Or(A.mutatedParts)})}),U):p.mutate(A)},query:function(A){if(!Hi(qe,p)||!xs("query",A))return p.query(A);var U=((ee=qe.trans)===null||ee===void 0?void 0:ee.db._options.cache)==="immutable",Y=qe,K=Y.requery,J=Y.signal,ee=(function($,re,oe,ce){var de=En["idb://".concat($,"/").concat(re)];if(!de)return[];if(!(re=de.queries[oe]))return[null,!1,de,null];var me=re[(ce.query?ce.query.index.name:null)||""];if(!me)return[null,!1,de,null];switch(oe){case"query":var Se=me.find(function(Ee){return Ee.req.limit===ce.limit&&Ee.req.values===ce.values&&fr(Ee.req.query.range,ce.query.range)});return Se?[Se,!0,de,me]:[me.find(function(Ee){return("limit"in Ee.req?Ee.req.limit:1/0)>=ce.limit&&(!ce.values||Ee.req.values)&&Cs(Ee.req.query.range,ce.query.range)}),!1,de,me];case"count":return Se=me.find(function(Ee){return fr(Ee.req.query.range,ce.query.range)}),[Se,!!Se,de,me]}})(i,l,"query",A),ae=ee[0],Y=ee[1],te=ee[2],Q=ee[3];return ae&&Y?ae.obsSet=A.obsSet:(Y=p.query(A).then(function($){var re=$.result;if(ae&&(ae.res=re),U){for(var oe=0,ce=re.length;oe<ce;++oe)Object.freeze(re[oe]);Object.freeze(re)}else $.result=se(re);return $}).catch(function($){return Q&&ae&&L(Q,ae),Promise.reject($)}),ae={obsSet:A.obsSet,promise:Y,subscribers:new Set,type:"query",req:A,dirty:!1},Q?Q.push(ae):(Q=[ae],(te=te||(En["idb://".concat(i,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=Q)),Da(ae,Q,K,J),ae.promise.then(function($){return{result:Sn($.result,A,te?.optimisticOps,p,ae,U)}})}})}})}};function Bn(n,i){return new Proxy(n,{get:function(l,p,b){return p==="db"?i:Reflect.get(l,p,b)}})}var jn=(Pt.prototype.version=function(n){if(isNaN(n)||n<.1)throw new ye.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,l=i.filter(function(p){return p._cfg.version===n})[0];return l||(l=new this.Version(n),i.push(l),i.sort(Hr),l.stores({}),this._state.autoSchema=!1,l)},Pt.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||qe.letThrough||this._vip)?n():new De(function(l,p){if(i._state.openComplete)return p(new ye.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen)return void p(new ye.DatabaseClosed);i.open().catch(Fe)}i._state.dbReadyPromise.then(l,p)}).then(n)},Pt.prototype.use=function(n){var i=n.stack,l=n.create,p=n.level,b=n.name;return b&&this.unuse({stack:i,name:b}),n=this._middlewares[i]||(this._middlewares[i]=[]),n.push({stack:i,create:l,level:p??10,name:b}),n.sort(function(A,U){return A.level-U.level}),this},Pt.prototype.unuse=function(n){var i=n.stack,l=n.name,p=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(b){return p?b.create!==p:!!l&&b.name!==l})),this},Pt.prototype.open=function(){var n=this;return Cr(zn,function(){return zi(n)})},Pt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=qn.indexOf(this);if(0<=i&&qn.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new De(function(l){n.dbReadyResolve=l}),n.openCanceller=new De(function(l,p){n.cancelOpen=p}))},Pt.prototype.close=function(l){var i=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,l=this._state;i?(l.isBeingOpened&&l.cancelOpen(new ye.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new ye.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},Pt.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var l=0<arguments.length&&typeof arguments[0]!="object",p=this._state;return new De(function(b,A){function U(){i.close(n);var K=i._deps.indexedDB.deleteDatabase(i.name);K.onsuccess=St(function(){var J,ee,ae;J=i._deps,ee=i.name,ae=J.indexedDB,J=J.IDBKeyRange,rn(ae)||ee===zr||yi(ae,J).delete(ee).catch(Fe),b()}),K.onerror=bn(A),K.onblocked=i._fireOnBlocked}if(l)throw new ye.InvalidArgument("Invalid closeOptions argument to db.delete()");p.isBeingOpened?p.dbReadyPromise.then(U):U()})},Pt.prototype.backendDB=function(){return this.idbdb},Pt.prototype.isOpen=function(){return this.idbdb!==null},Pt.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},Pt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Pt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Pt.prototype,"tables",{get:function(){var n=this;return h(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),Pt.prototype.transaction=function(){var n=(function(i,l,p){var b=arguments.length;if(b<2)throw new ye.InvalidArgument("Too few arguments");for(var A=new Array(b-1);--b;)A[b-1]=arguments[b];return p=A.pop(),[i,B(A),p]}).apply(this,arguments);return this._transaction.apply(this,n)},Pt.prototype._transaction=function(n,i,l){var p=this,b=qe.trans;b&&b.db===this&&n.indexOf("!")===-1||(b=null);var A,U,K=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");try{if(U=i.map(function(ee){if(ee=ee instanceof p.Table?ee.name:ee,typeof ee!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ee}),n=="r"||n===ci)A=ci;else{if(n!="rw"&&n!=cs)throw new ye.InvalidArgument("Invalid transaction mode: "+n);A=cs}if(b){if(b.mode===ci&&A===cs){if(!K)throw new ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");b=null}b&&U.forEach(function(ee){if(b&&b.storeNames.indexOf(ee)===-1){if(!K)throw new ye.SubTransaction("Table "+ee+" not included in parent transaction.");b=null}}),K&&b&&!b.active&&(b=null)}}catch(ee){return b?b._promise(null,function(ae,Y){Y(ee)}):Et(ee)}var J=(function ee(ae,Y,te,Q,$){return De.resolve().then(function(){var re=qe.transless||qe,oe=ae._createTransaction(Y,te,ae._dbSchema,Q);if(oe.explicit=!0,re={trans:oe,transless:re},Q)oe.idbtrans=Q.idbtrans;else try{oe.create(),oe.idbtrans._explicit=!0,ae._state.PR1398_maxLoop=3}catch(me){return me.name===V.InvalidState&&ae.isOpen()&&0<--ae._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ae.close({disableAutoOpen:!1}),ae.open().then(function(){return ee(ae,Y,te,null,$)})):Et(me)}var ce,de=X($);return de&&Ur(),re=De.follow(function(){var me;(ce=$.call(oe,oe))&&(de?(me=ir.bind(null,null),ce.then(me,me)):typeof ce.next=="function"&&typeof ce.throw=="function"&&(ce=qi(ce)))},re),(ce&&typeof ce.then=="function"?De.resolve(ce).then(function(me){return oe.active?me:Et(new ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):re.then(function(){return ce})).then(function(me){return Q&&oe._resolve(),oe._completion.then(function(){return me})}).catch(function(me){return oe._reject(me),Et(me)})})}).bind(null,this,A,U,b,l);return b?b._promise(A,J,"lock"):qe.trans?Cr(qe.transless,function(){return p._whenReady(J)}):this._whenReady(J)},Pt.prototype.table=function(n){if(!R(this._allTables,n))throw new ye.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},Pt);function Pt(n,i){var l=this;this._middlewares={},this.verno=0;var p=Pt.dependencies;this._options=i=T({addons:Pt.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},p=i.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var b,A,U,K,J,ee={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Fe,dbReadyPromise:null,cancelOpen:Fe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};ee.dbReadyPromise=new De(function(Y){ee.dbReadyResolve=Y}),ee.openCanceller=new De(function(Y,te){ee.cancelOpen=te}),this._state=ee,this.name=n,this.on=qr(this,"populate","blocked","versionchange","close",{ready:[Rt,Fe]}),this.once=function(Y,te){var Q=function(){for(var $=[],re=0;re<arguments.length;re++)$[re]=arguments[re];l.on(Y).unsubscribe(Q),te.apply(l,$)};return l.on(Y,Q)},this.on.ready.subscribe=u(this.on.ready.subscribe,function(Y){return function(te,Q){Pt.vip(function(){var $,re=l._state;re.openComplete?(re.dbOpenError||De.resolve().then(te),Q&&Y(te)):re.onReadyBeingFired?(re.onReadyBeingFired.push(te),Q&&Y(te)):(Y(te),$=l,Q||Y(function oe(){$.on.ready.unsubscribe(te),$.on.ready.unsubscribe(oe)}))})}}),this.Collection=(b=this,ar(fi.prototype,function(ce,oe){this.db=b;var Q=kr,$=null;if(oe)try{Q=oe()}catch(de){$=de}var re=ce._ctx,oe=re.table,ce=oe.hook.reading.fire;this._ctx={table:oe,index:re.index,isPrimKey:!re.index||oe.schema.primKey.keyPath&&re.index===oe.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:re.or,valueMapper:ce!==Ke?ce:null}})),this.Table=(A=this,ar(hi.prototype,function(Y,te,Q){this.db=A,this._tx=Q,this.name=Y,this.schema=te,this.hook=A._allTables[Y]?A._allTables[Y].hook:qr(null,{creating:[Ot,Fe],reading:[lt,Ke],updating:[xt,Fe],deleting:[ft,Fe]})})),this.Transaction=(U=this,ar(gs.prototype,function(Y,te,Q,$,re){var oe=this;Y!=="readonly"&&te.forEach(function(ce){ce=(ce=Q[ce])===null||ce===void 0?void 0:ce.yProps,ce&&(te=te.concat(ce.map(function(de){return de.updatesTable})))}),this.db=U,this.mode=Y,this.storeNames=te,this.schema=Q,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=qr(this,"complete","error","abort"),this.parent=re||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new De(function(ce,de){oe._resolve=ce,oe._reject=de}),this._completion.then(function(){oe.active=!1,oe.on.complete.fire()},function(ce){var de=oe.active;return oe.active=!1,oe.on.error.fire(ce),oe.parent?oe.parent._reject(ce):de&&oe.idbtrans&&oe.idbtrans.abort(),Et(ce)})})),this.Version=(K=this,ar(Ia.prototype,function(Y){this.db=K,this._cfg={version:Y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(J=this,ar(ot.prototype,function(Y,te,Q){if(this.db=J,this._ctx={table:Y,index:te===":id"?null:te,or:Q},this._cmp=this._ascending=Ve,this._descending=function($,re){return Ve(re,$)},this._max=function($,re){return 0<Ve($,re)?$:re},this._min=function($,re){return Ve($,re)<0?$:re},this._IDBKeyRange=J._deps.IDBKeyRange,!this._IDBKeyRange)throw new ye.MissingAPI})),this.on("versionchange",function(Y){0<Y.newVersion?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(Y){!Y.newVersion||Y.newVersion<Y.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(Y.oldVersion/10))}),this._maxKey=un(i.IDBKeyRange),this._createTransaction=function(Y,te,Q,$){return new l.Transaction(Y,te,Q,l._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(Y){l.on("blocked").fire(Y),qn.filter(function(te){return te.name===l.name&&te!==l&&!te._state.vcFired}).map(function(te){return te.on("versionchange").fire(Y)})},this.use(Ss),this.use(Hn),this.use(bs),this.use(Zr),this.use(Ki);var ae=new Proxy(this,{get:function(Y,te,Q){if(te==="_vip")return!0;if(te==="table")return function(re){return Bn(l.table(re),ae)};var $=Reflect.get(Y,te,Q);return $ instanceof hi?Bn($,ae):te==="tables"?$.map(function(re){return Bn(re,ae)}):te==="_createTransaction"?function(){return Bn($.apply(this,arguments),ae)}:$}});this.vip=ae,p.forEach(function(Y){return Y(l)})}var Rn,It=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Yi=(Xi.prototype.subscribe=function(n,i,l){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:i,complete:l})},Xi.prototype[It]=function(){return this},Xi);function Xi(n){this._subscribe=n}try{Rn={indexedDB:m.indexedDB||m.mozIndexedDB||m.webkitIndexedDB||m.msIndexedDB,IDBKeyRange:m.IDBKeyRange||m.webkitIDBKeyRange}}catch{Rn={indexedDB:null,IDBKeyRange:null}}function wi(n){var i,l=!1,p=new Yi(function(b){var A=X(n),U,K=!1,J={},ee={},ae={get closed(){return K},unsubscribe:function(){K||(K=!0,U&&U.abort(),Y&&_t.storagemutated.unsubscribe(Q))}};b.start&&b.start(ae);var Y=!1,te=function(){return us($)},Q=function(re){Ar(J,re),Ui(ee,J)&&te()},$=function(){var re,oe,ce;!K&&Rn.indexedDB&&(J={},re={},U&&U.abort(),U=new AbortController,ce=(function(de){var me=Sr();try{A&&Ur();var Se=rr(n,de);return Se=A?Se.finally(ir):Se}finally{me&&xr()}})(oe={subscr:re,signal:U.signal,requery:te,querier:n,trans:null}),Promise.resolve(ce).then(function(de){l=!0,i=de,K||oe.signal.aborted||(J={},(function(me){for(var Se in me)if(R(me,Se))return;return 1})(ee=re)||Y||(_t(gi,Q),Y=!0),us(function(){return!K&&b.next&&b.next(de)}))},function(de){l=!1,["DatabaseClosedError","AbortError"].includes(de?.name)||K||us(function(){K||b.error&&b.error(de)})}))};return setTimeout(te,0),ae});return p.hasValue=function(){return l},p.getValue=function(){return i},p}var gr=jn;function Mr(n){var i=Tn;try{Tn=!0,_t.storagemutated.fire(n),ws(n,!0)}finally{Tn=i}}w(gr,T(T({},Ie),{delete:function(n){return new gr(n,{addons:[]}).delete()},exists:function(n){return new gr(n,{addons:[]}).open().then(function(i){return i.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return i=gr.dependencies,l=i.indexedDB,i=i.IDBKeyRange,(rn(l)?Promise.resolve(l.databases()).then(function(p){return p.map(function(b){return b.name}).filter(function(b){return b!==zr})}):yi(l,i).toCollection().primaryKeys()).then(n)}catch{return Et(new ye.MissingAPI)}var i,l},defineClass:function(){return function(n){y(this,n)}},ignoreTransaction:function(n){return qe.trans?Cr(qe.transless,n):n()},vip:hn,async:function(n){return function(){try{var i=qi(n.apply(this,arguments));return i&&typeof i.then=="function"?i:De.resolve(i)}catch(l){return Et(l)}}},spawn:function(n,i,l){try{var p=qi(n.apply(l,i||[]));return p&&typeof p.then=="function"?p:De.resolve(p)}catch(b){return Et(b)}},currentTransaction:{get:function(){return qe.trans||null}},waitFor:function(n,i){return i=De.resolve(typeof n=="function"?gr.ignoreTransaction(n):n).timeout(i||6e4),qe.trans?qe.trans.waitFor(i):i},Promise:De,debug:{get:function(){return Xt},set:function(n){gt(n)}},derive:k,extend:y,props:w,override:u,Events:qr,on:_t,liveQuery:wi,extendObservabilitySet:Ar,getByKeyPath:I,setByKeyPath:W,delByKeyPath:function(n,i){typeof i=="string"?W(n,i,void 0):"length"in i&&[].map.call(i,function(l){W(n,l,void 0)})},shallowClone:F,deepClone:se,getObjectDiff:Vi,cmp:Ve,asap:N,minKey:-1/0,addons:[],connections:qn,errnames:V,dependencies:Rn,cache:En,semVer:"4.2.1",version:"4.2.1".split(".").map(function(n){return parseInt(n)}).reduce(function(n,i,l){return n+i/Math.pow(10,2*l)})})),gr.maxKey=un(gr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(_t(gi,function(n){Tn||(n=new CustomEvent(fs,{detail:n}),Tn=!0,dispatchEvent(n),Tn=!1)}),addEventListener(fs,function(n){n=n.detail,Tn||Mr(n)}));var Kt,Tn=!1,Fr=function(){};return typeof BroadcastChannel<"u"&&((Fr=function(){(Kt=new BroadcastChannel(fs)).onmessage=function(n){return n.data&&Mr(n.data)}})(),typeof Kt.unref=="function"&&Kt.unref(),_t(gi,function(n){Tn||Kt.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!jn.disableBfCache&&n.persisted){Xt&&console.debug("Dexie: handling persisted pagehide"),Kt?.close();for(var i=0,l=qn;i<l.length;i++)l[i].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!jn.disableBfCache&&n.persisted&&(Xt&&console.debug("Dexie: handling persisted pageshow"),Fr(),Mr({all:new Tt(-1/0,[[]])}))})),De.rejectionMapper=function(n,i){return!n||n instanceof ie||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Me[n.name]?n:(i=new Me[n.name](i||n.message,n),"stack"in n&&g(i,"stack",{get:function(){return this.inner.stack}}),i)},gt(Xt),T(jn,Object.freeze({__proto__:null,Dexie:jn,liveQuery:wi,Entity:yt,cmp:Ve,PropModification:Ln,replacePrefix:function(n,i){return new Ln({replacePrefix:[n,i]})},add:function(n){return new Ln({add:n})},remove:function(n){return new Ln({remove:n})},default:jn,RangeSet:Tt,mergeRanges:Xr,rangesOverlap:ys}),{default:jn}),jn})})(go)),go.exports}var X1=Y1();const kl=Ea(X1),fh=Symbol.for("Dexie"),ns=globalThis[fh]||(globalThis[fh]=kl);if(kl.semVer!==ns.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${kl.semVer} and ${ns.semVer}`);const{liveQuery:Rg,mergeRanges:Tg,rangesOverlap:Ag,RangeSet:Og,cmp:Ng,Entity:Mg,PropModification:Fg,replacePrefix:Ig,add:Dg,remove:Lg,DexieYProvider:Gg}=ns;function Q1(a,c,E){var T,O;typeof a=="function"?(T=c||[],O=E):(T=[],O=c);var m=mt.useRef({hasResult:!1,result:O,error:null}),h=mt.useReducer(function(S){return S+1},0);h[0];var d=h[1],y=mt.useMemo(function(){var S=typeof a=="function"?a():a;if(!S||typeof S.subscribe!="function")throw a===S?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!m.current.hasResult&&typeof window<"u"&&(typeof S.hasValue!="function"||S.hasValue()))if(typeof S.getValue=="function")m.current.result=S.getValue(),m.current.hasResult=!0;else{var x=S.subscribe(function(R){m.current.result=R,m.current.hasResult=!0});typeof x=="function"?x():x.unsubscribe()}return S},T);if(mt.useDebugValue(m.current.result),mt.useEffect(function(){var S=y.subscribe(function(x){var R=m.current;(R.error!==null||R.result!==x)&&(R.error=null,R.result=x,R.hasResult=!0,d())},function(x){var R=m.current;R.error!==x&&(R.error=x,d())});return typeof S=="function"?S:S.unsubscribe.bind(S)},T),m.current.error)throw m.current.error;return m.current.result}function J1(a,c,E){return Q1(function(){return ns.liveQuery(a)},c||[],E)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(a){var c=ns.DexieYProvider;c&&c.release(a)});class Z1 extends ns{app;constructor(){super("my-app-db"),this.version(1).stores({app:"id, updatedAt"})}}const El=new Z1,gh="app",ph=1;async function wl(a){const c=await El.app.get(gh)??{id:gh,version:ph,updatedAt:0,state:{settings:{mode:"battle",sort:"reverse"},progress:{level:1,lastOpenedAt:0}}},E={...c,version:ph,updatedAt:Date.now(),state:{...c.state,...a}};return await El.app.put(E),E}function $1({children:a}){const[c,E]=xe.useState(0),[T,O]=xe.useState(!1),m=J1(()=>El.app.get("app"),[],void 0),h=xe.useMemo(()=>(m?.state?.settings?.mode??"battle")==="battle",[m]),d=xe.useMemo(()=>(m?.state?.settings?.sort??"random")==="reverse",[m]),y=xe.useMemo(()=>m?.state?.progress?.level??1,[m]),S=xe.useCallback(w=>{const g=typeof w=="function"?w(h):w;wl({settings:{mode:g?"battle":"study",sort:d?"reverse":"random"},progress:{level:y,lastOpenedAt:Date.now()}})},[h,d,y]),x=xe.useCallback(w=>{const g=typeof w=="function"?w(d):w;wl({settings:{mode:h?"battle":"study",sort:g?"reverse":"random"},progress:{level:y,lastOpenedAt:Date.now()}})},[h,d,y]),R=xe.useCallback(w=>{const g=typeof w=="function"?w(y):w;wl({settings:{mode:h?"battle":"study",sort:d?"reverse":"random"},progress:{level:g,lastOpenedAt:Date.now()}})},[h,d,y]);return je.jsx(Nh.Provider,{value:c,children:je.jsx(Mh.Provider,{value:E,children:je.jsx(Fh.Provider,{value:T,children:je.jsx(Ih.Provider,{value:O,children:je.jsx(Dh.Provider,{value:h,children:je.jsx(Lh.Provider,{value:S,children:je.jsx(Gh.Provider,{value:d,children:je.jsx(Bh.Provider,{value:x,children:je.jsx(jh.Provider,{value:y,children:je.jsx(Uh.Provider,{value:R,children:a})})})})})})})})})})}const Yh=document.getElementById("root");if(!(Yh instanceof HTMLElement))throw new Error('Root element "#root" not found');zd.createRoot(Yh).render(je.jsx(mt.StrictMode,{children:je.jsx(H1,{children:je.jsx($1,{children:je.jsx(C1,{})})})}));export{C1 as A,Kd as _,W0 as a,Y0 as b,kg as c,f1 as d,Cg as e,H0 as f,Eg as g,Pa as h,X0 as i,bg as j,Pg as k,xg as u};
